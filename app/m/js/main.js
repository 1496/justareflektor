console.log("-- INIT --");window.onerror=function(a,b,c){console.log("-- ERROR --");console.warn(a,b,":",c);window.e=a;return true};!function(a,b){function c(a){var b=a.length,c=fb.type(a);return fb.isWindow(a)?!1:a.nodeType===1&&b?!0:c==="array"||c!=="function"&&(b===0||typeof b=="number"&&b>0&&b-1 in a)}function d(a){var b=ob[a]={};fb.each(a.match(hb)||[],function(a,c){b[c]=!0});return b}function e(){Object.defineProperty(this.cache={},0,{get:function(){return{}}});this.expando=fb.expando+Math.random()}function f(a,c,d){var e;if(d===b&&a.nodeType===1){e="data-"+c.replace(sb,"-$1").toLowerCase();d=a.getAttribute(e);if(typeof d=="string"){try{d=d==="true"?!0:d==="false"?!1:d==="null"?null:+d+""===d?+d:rb.test(d)?JSON.parse(d):d}catch(f){}pb.set(a,c,d)}else d=b}return d}function g(){return!0}function h(){return!1}function i(){try{return T.activeElement}catch(a){}}function j(a,b){while((a=a[b])&&a.nodeType!==1);return a}function k(a,b,c){if(fb.isFunction(b))return fb.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return fb.grep(a,function(a){return a===b!==c});if(typeof b=="string"){if(Cb.test(b))return fb.filter(b,a,c);b=fb.filter(b,a)}return fb.grep(a,function(a){return bb.call(b,a)>=0!==c})}function l(a,b){return fb.nodeName(a,"table")&&fb.nodeName(b.nodeType===1?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function m(a){a.type=(a.getAttribute("type")!==null)+"/"+a.type;return a}function n(a){var b=Mb.exec(a.type);b?a.type=b[1]:a.removeAttribute("type");return a}function o(a,b){var c=a.length,d=0;for(;d<c;d++)qb.set(a[d],"globalEval",!b||qb.get(b[d],"globalEval"))}function p(a,b){var c,d,e,f,g,h,i,j;if(b.nodeType!==1)return;if(qb.hasData(a)){f=qb.access(a);g=fb.extend({},f);j=f.events;qb.set(b,g);if(j){delete g.handle;g.events={};for(e in j)for(c=0,d=j[e].length;c<d;c++)fb.event.add(b,e,j[e][c])}}if(pb.hasData(a)){h=pb.access(a);i=fb.extend({},h);pb.set(b,i)}}function q(a,c){var d=a.getElementsByTagName?a.getElementsByTagName(c||"*"):a.querySelectorAll?a.querySelectorAll(c||"*"):[];return c===b||c&&fb.nodeName(a,c)?fb.merge([a],d):d}function r(a,b){var c=b.nodeName.toLowerCase();if(c==="input"&&Jb.test(a.type))b.checked=a.checked;else if(c==="input"||c==="textarea")b.defaultValue=a.defaultValue}function s(a,b){if(b in a)return b;var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=$b.length;while(e--){b=$b[e]+c;if(b in a)return b}return d}function t(a,b){a=b||a;return fb.css(a,"display")==="none"||!fb.contains(a.ownerDocument,a)}function u(b){return a.getComputedStyle(b,null)}function v(a,b){var c,d,e,f=[],g=0,h=a.length;for(;g<h;g++){d=a[g];if(!d.style)continue;f[g]=qb.get(d,"olddisplay");c=d.style.display;if(b){!f[g]&&c==="none"&&(d.style.display="");d.style.display===""&&t(d)&&(f[g]=qb.access(d,"olddisplay",z(d.nodeName)))}else if(!f[g]){e=t(d);(c&&c!=="none"||!e)&&qb.set(d,"olddisplay",e?c:fb.css(d,"display"))}}for(g=0;g<h;g++){d=a[g];if(!d.style)continue;if(!b||d.style.display==="none"||d.style.display==="")d.style.display=b?f[g]||"":"none"}return a}function w(a,b,c){var d=Tb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function x(a,b,c,d,e){var f=c===(d?"border":"content")?4:b==="width"?1:0,g=0;for(;f<4;f+=2){c==="margin"&&(g+=fb.css(a,c+Zb[f],!0,e));if(d){c==="content"&&(g-=fb.css(a,"padding"+Zb[f],!0,e));c!=="margin"&&(g-=fb.css(a,"border"+Zb[f]+"Width",!0,e))}else{g+=fb.css(a,"padding"+Zb[f],!0,e);c!=="padding"&&(g+=fb.css(a,"border"+Zb[f]+"Width",!0,e))}}return g}function y(a,b,c){var d=!0,e=b==="width"?a.offsetWidth:a.offsetHeight,f=u(a),g=fb.support.boxSizing&&fb.css(a,"boxSizing",!1,f)==="border-box";if(e<=0||e==null){e=Pb(a,b,f);if(e<0||e==null)e=a.style[b];if(Ub.test(e))return e;d=g&&(fb.support.boxSizingReliable||e===a.style[b]);e=parseFloat(e)||0}return e+x(a,b,c||(g?"border":"content"),d,f)+"px"}function z(a){var b=T,c=Wb[a];if(!c){c=A(a,b);if(c==="none"||!c){Qb=(Qb||fb("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(b.documentElement);b=(Qb[0].contentWindow||Qb[0].contentDocument).document;b.write("<!doctype html><html><body>");b.close();c=A(a,b);Qb.detach()}Wb[a]=c}return c}function A(a,b){var c=fb(b.createElement(a)).appendTo(b.body),d=fb.css(c[0],"display");c.remove();return d}function B(a,b,c,d){var e;if(fb.isArray(b))fb.each(b,function(b,e){c||ac.test(a)?d(a,e):B(a+"["+(typeof e=="object"?b:"")+"]",e,c,d)});else if(!c&&fb.type(b)==="object")for(e in b)B(a+"["+e+"]",b[e],c,d);else d(a,b)}function C(a){return function(b,c){if(typeof b!="string"){c=b;b="*"}var d,e=0,f=b.toLowerCase().match(hb)||[];if(fb.isFunction(c))while(d=f[e++])if(d[0]==="+"){d=d.slice(1)||"*";(a[d]=a[d]||[]).unshift(c)}else(a[d]=a[d]||[]).push(c)}}function D(a,b,c,d){function e(h){var i;f[h]=!0;fb.each(a[h]||[],function(a,h){var j=h(b,c,d);if(typeof j=="string"&&!g&&!f[j]){b.dataTypes.unshift(j);e(j);return!1}if(g)return!(i=j)});return i}var f={},g=a===rc;return e(b.dataTypes[0])||!f["*"]&&e("*")}function E(a,c){var d,e,f=fb.ajaxSettings.flatOptions||{};for(d in c)c[d]!==b&&((f[d]?a:e||(e={}))[d]=c[d]);e&&fb.extend(!0,a,e);return a}function F(a,c,d){var e,f,g,h,i=a.contents,j=a.dataTypes;while(j[0]==="*"){j.shift();e===b&&(e=a.mimeType||c.getResponseHeader("Content-Type"))}if(e)for(f in i)if(i[f]&&i[f].test(e)){j.unshift(f);break}if(j[0]in d)g=j[0];else{for(f in d){if(!j[0]||a.converters[f+" "+j[0]]){g=f;break}h||(h=f)}g=g||h}if(g){g!==j[0]&&j.unshift(g);return d[g]}}function G(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f){a.responseFields[f]&&(c[a.responseFields[f]]=b);!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType));i=f;f=k.shift();if(f)if(f==="*")f=i;else if(i!=="*"&&i!==f){g=j[i+" "+f]||j["* "+f];if(!g)for(e in j){h=e.split(" ");if(h[1]===f){g=j[i+" "+h[0]]||j["* "+h[0]];if(g){if(g===!0)g=j[e];else if(j[e]!==!0){f=h[0];k.unshift(h[1])}break}}}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}}return{state:"success",data:b}}function H(){setTimeout(function(){Ac=b});return Ac=fb.now()}function I(a,b){fb.each(b,function(b,c){var d=(Gc[b]||[]).concat(Gc["*"]),e=0,f=d.length;for(;e<f;e++)if(d[e].call(a,b,c))return})}function J(a,b,c){var d,e,f=0,g=Fc.length,h=fb.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;var b=Ac||H(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;for(;g<i;g++)j.tweens[g].run(f);h.notifyWith(a,[j,f,c]);if(f<1&&i)return c;h.resolveWith(a,[j]);return!1},j=h.promise({elem:a,props:fb.extend({},b),opts:fb.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Ac||H(),duration:c.duration,tweens:[],createTween:function(b,c){var d=fb.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);j.tweens.push(d);return d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;e=!0;for(;c<d;c++)j.tweens[c].run(1);b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]);return this}}),k=j.props;K(k,j.opts.specialEasing);for(;f<g;f++){d=Fc[f].call(j,a,k,j.opts);if(d)return d}I(j,k);fb.isFunction(j.opts.start)&&j.opts.start.call(a,j);fb.fx.timer(fb.extend(i,{elem:a,anim:j,queue:j.opts.queue}));return j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function K(a,b){var c,d,e,f,g;for(c in a){d=fb.camelCase(c);e=b[d];f=a[c];if(fb.isArray(f)){e=f[1];f=a[c]=f[0]}if(c!==d){a[d]=f;delete a[c]}g=fb.cssHooks[d];if(g&&"expand"in g){f=g.expand(f);delete a[d];for(c in f)if(!(c in a)){a[c]=f[c];b[c]=e}}else b[d]=e}}function L(a,c,d){var e,f,g,h,i,j,k,l,m,n=this,o=a.style,p={},q=[],r=a.nodeType&&t(a);if(!d.queue){l=fb._queueHooks(a,"fx");if(l.unqueued==null){l.unqueued=0;m=l.empty.fire;l.empty.fire=function(){l.unqueued||m()}}l.unqueued++;n.always(function(){n.always(function(){l.unqueued--;fb.queue(a,"fx").length||l.empty.fire()})})}if(a.nodeType===1&&("height"in c||"width"in c)){d.overflow=[o.overflow,o.overflowX,o.overflowY];fb.css(a,"display")==="inline"&&fb.css(a,"float")==="none"&&(o.display="inline-block")}if(d.overflow){o.overflow="hidden";n.always(function(){o.overflow=d.overflow[0];o.overflowX=d.overflow[1];o.overflowY=d.overflow[2]})}i=qb.get(a,"fxshow");for(e in c){g=c[e];if(Cc.exec(g)){delete c[e];j=j||g==="toggle";if(g===(r?"hide":"show")){if(g!=="show"||i===b||i[e]===b)continue;r=!0}q.push(e)}}h=q.length;if(h){i=qb.get(a,"fxshow")||qb.access(a,"fxshow",{});"hidden"in i&&(r=i.hidden);j&&(i.hidden=!r);r?fb(a).show():n.done(function(){fb(a).hide()});n.done(function(){var b;qb.remove(a,"fxshow");for(b in p)fb.style(a,b,p[b])});for(e=0;e<h;e++){f=q[e];k=n.createTween(f,r?i[f]:0);p[f]=i[f]||fb.style(a,f);if(!(f in i)){i[f]=k.start;if(r){k.end=k.start;k.start=f==="width"||f==="height"?1:0}}}}}function M(a,b,c,d,e){return new M.prototype.init(a,b,c,d,e)}function N(a,b){var c,d={height:a},e=0;b=b?1:0;for(;e<4;e+=2-b){c=Zb[e];d["margin"+c]=d["padding"+c]=a}b&&(d.opacity=d.width=a);return d}function O(a){return fb.isWindow(a)?a:a.nodeType===9&&a.defaultView}var P,Q,R=typeof b,S=a.location,T=a.document,U=T.documentElement,V=a.jQuery,W=a.$,X={},Y=[],Z="2.0.0",$=Y.concat,_=Y.push,ab=Y.slice,bb=Y.indexOf,cb=X.toString,db=X.hasOwnProperty,eb=Z.trim,fb=function(a,b){return new fb.fn.init(a,b,P)},gb=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,hb=/\S+/g,ib=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,jb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,kb=/^-ms-/,lb=/-([\da-z])/gi,mb=function(a,b){return b.toUpperCase()},nb=function(){T.removeEventListener("DOMContentLoaded",nb,!1);a.removeEventListener("load",nb,!1);fb.ready()};fb.fn=fb.prototype={jquery:Z,constructor:fb,init:function(a,c,d){var e,f;if(!a)return this;if(typeof a=="string"){a.charAt(0)==="<"&&a.charAt(a.length-1)===">"&&a.length>=3?e=[null,a,null]:e=ib.exec(a);if(e&&(e[1]||!c)){if(e[1]){c=c instanceof fb?c[0]:c;fb.merge(this,fb.parseHTML(e[1],c&&c.nodeType?c.ownerDocument||c:T,!0));if(jb.test(e[1])&&fb.isPlainObject(c))for(e in c)fb.isFunction(this[e])?this[e](c[e]):this.attr(e,c[e]);return this}f=T.getElementById(e[2]);if(f&&f.parentNode){this.length=1;this[0]=f}this.context=T;this.selector=a;return this}return!c||c.jquery?(c||d).find(a):this.constructor(c).find(a)}if(a.nodeType){this.context=this[0]=a;this.length=1;return this}if(fb.isFunction(a))return d.ready(a);if(a.selector!==b){this.selector=a.selector;this.context=a.context}return fb.makeArray(a,this)},selector:"",length:0,toArray:function(){return ab.call(this)},get:function(a){return a==null?this.toArray():a<0?this[this.length+a]:this[a]},pushStack:function(a){var b=fb.merge(this.constructor(),a);b.prevObject=this;b.context=this.context;return b},each:function(a,b){return fb.each(this,a,b)},ready:function(a){fb.ready.promise().done(a);return this},slice:function(){return this.pushStack(ab.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(a<0?b:0);return this.pushStack(c>=0&&c<b?[this[c]]:[])},map:function(a){return this.pushStack(fb.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:_,sort:[].sort,splice:[].splice};fb.fn.init.prototype=fb.fn;fb.extend=fb.fn.extend=function(){var a,c,d,e,f,g,h=arguments[0]||{},i=1,j=arguments.length,k=!1;if(typeof h=="boolean"){k=h;h=arguments[1]||{};i=2}typeof h!="object"&&!fb.isFunction(h)&&(h={});if(j===i){h=this;--i}for(;i<j;i++)if((a=arguments[i])!=null)for(c in a){d=h[c];e=a[c];if(h===e)continue;if(k&&e&&(fb.isPlainObject(e)||(f=fb.isArray(e)))){if(f){f=!1;g=d&&fb.isArray(d)?d:[]}else g=d&&fb.isPlainObject(d)?d:{};h[c]=fb.extend(k,g,e)}else e!==b&&(h[c]=e)}return h};fb.extend({expando:"jQuery"+(Z+Math.random()).replace(/\D/g,""),noConflict:function(b){a.$===fb&&(a.$=W);b&&a.jQuery===fb&&(a.jQuery=V);return fb},isReady:!1,readyWait:1,holdReady:function(a){a?fb.readyWait++:fb.ready(!0)},ready:function(a){if(a===!0?--fb.readyWait:fb.isReady)return;fb.isReady=!0;if(a!==!0&&--fb.readyWait>0)return;Q.resolveWith(T,[fb]);fb.fn.trigger&&fb(T).trigger("ready").off("ready")},isFunction:function(a){return fb.type(a)==="function"},isArray:Array.isArray,isWindow:function(a){return a!=null&&a===a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return a==null?String(a):typeof a=="object"||typeof a=="function"?X[cb.call(a)]||"object":typeof a},isPlainObject:function(a){if(fb.type(a)!=="object"||a.nodeType||fb.isWindow(a))return!1;try{if(a.constructor&&!db.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(b){return!1}return!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},error:function(a){throw new Error(a)},parseHTML:function(a,b,c){if(!a||typeof a!="string")return null;if(typeof b=="boolean"){c=b;b=!1}b=b||T;var d=jb.exec(a),e=!c&&[];if(d)return[b.createElement(d[1])];d=fb.buildFragment([a],b,e);e&&fb(e).remove();return fb.merge([],d.childNodes)},parseJSON:JSON.parse,parseXML:function(a){var c,d;if(!a||typeof a!="string")return null;try{d=new DOMParser;c=d.parseFromString(a,"text/xml")}catch(e){c=b}(!c||c.getElementsByTagName("parsererror").length)&&fb.error("Invalid XML: "+a);return c},noop:function(){},globalEval:function(a){var b,c=eval;a=fb.trim(a);if(a)if(a.indexOf("use strict")===1){b=T.createElement("script");b.text=a;T.head.appendChild(b).parentNode.removeChild(b)}else c(a)},camelCase:function(a){return a.replace(kb,"ms-").replace(lb,mb)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d)if(h)for(;f<g;f++){e=b.apply(a[f],d);if(e===!1)break}else for(f in a){e=b.apply(a[f],d);if(e===!1)break}else if(h)for(;f<g;f++){e=b.call(a[f],f,a[f]);if(e===!1)break}else for(f in a){e=b.call(a[f],f,a[f]);if(e===!1)break}return a},trim:function(a){return a==null?"":eb.call(a)},makeArray:function(a,b){var d=b||[];a!=null&&(c(Object(a))?fb.merge(d,typeof a=="string"?[a]:a):_.call(d,a));return d},inArray:function(a,b,c){return b==null?-1:bb.call(b,a,c)},merge:function(a,c){var d=c.length,e=a.length,f=0;if(typeof d=="number")for(;f<d;f++)a[e++]=c[f];else while(c[f]!==b)a[e++]=c[f++];a.length=e;return a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;c=!!c;for(;f<g;f++){d=!!b(a[f],f);c!==d&&e.push(a[f])}return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;f<g;f++){e=b(a[f],f,d);e!=null&&(i[i.length]=e)}else for(f in a){e=b(a[f],f,d);e!=null&&(i[i.length]=e)}return $.apply([],i)},guid:1,proxy:function(a,c){var d,e,f;if(typeof c=="string"){d=a[c];c=a;a=d}if(!fb.isFunction(a))return b;e=ab.call(arguments,2);f=function(){return a.apply(c||this,e.concat(ab.call(arguments)))};f.guid=a.guid=a.guid||fb.guid++;return f},access:function(a,c,d,e,f,g,h){var i=0,j=a.length,k=d==null;if(fb.type(d)==="object"){f=!0;for(i in d)fb.access(a,c,i,d[i],!0,g,h)}else if(e!==b){f=!0;fb.isFunction(e)||(h=!0);if(k)if(h){c.call(a,e);c=null}else{k=c;c=function(a,b,c){return k.call(fb(a),c)}}if(c)for(;i<j;i++)c(a[i],d,h?e:e.call(a[i],i,c(a[i],d)))}return f?a:k?c.call(a):j?c(a[0],d):g},now:Date.now,swap:function(a,b,c,d){var e,f,g={};for(f in b){g[f]=a.style[f];a.style[f]=b[f]}e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e}});fb.ready.promise=function(b){if(!Q){Q=fb.Deferred();if(T.readyState==="complete")setTimeout(fb.ready);else{T.addEventListener("DOMContentLoaded",nb,!1);a.addEventListener("load",nb,!1)}}return Q.promise(b)};fb.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){X["[object "+b+"]"]=b.toLowerCase()});P=fb(T);!function(a,b){function c(a){return tb.test(a+"")}function d(){var a,b=[];return a=function(c,d){b.push(c+=" ")>A.cacheLength&&delete a[b.shift()];return a[c]=d}}function e(a){a[O]=!0;return a}function f(a){var b=H.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b);b=null}}function g(a,b,c,d){var e,f,g,h,i,j,k,l,m,p;(b?b.ownerDocument||b:P)!==H&&G(b);b=b||H;c=c||[];if(!a||typeof a!="string")return c;if((h=b.nodeType)!==1&&h!==9)return[];if(J&&!d){if(e=ub.exec(a))if(g=e[1]){if(h===9){f=b.getElementById(g);if(!f||!f.parentNode)return c;if(f.id===g){c.push(f);return c}}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&N(b,f)&&f.id===g){c.push(f);return c}}else{if(e[2]){bb.apply(c,b.getElementsByTagName(a));return c}if((g=e[3])&&Q.getElementsByClassName&&b.getElementsByClassName){bb.apply(c,b.getElementsByClassName(g));return c}}if(Q.qsa&&(!K||!K.test(a))){l=k=O;m=b;p=h===9&&a;if(h===1&&b.nodeName.toLowerCase()!=="object"){j=n(a);(k=b.getAttribute("id"))?l=k.replace(xb,"\\$&"):b.setAttribute("id",l);l="[id='"+l+"'] ";i=j.length;while(i--)j[i]=l+o(j[i]);m=ob.test(a)&&b.parentNode||b;p=j.join(",")}if(p)try{bb.apply(c,m.querySelectorAll(p));return c}catch(q){}finally{k||b.removeAttribute("id")}}}return w(a.replace(lb,"$1"),b,c,d)}function h(a,b){var c=b&&a,d=c&&(~b.sourceIndex||Z)-(~a.sourceIndex||Z);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function i(a,c,d){var e;return d?b:(e=a.getAttributeNode(c))&&e.specified?e.value:a[c]===!0?c.toLowerCase():null}function j(a,c,d){var e;return d?b:e=a.getAttribute(c,c.toLowerCase()==="type"?1:2)}function k(a){return function(b){var c=b.nodeName.toLowerCase();return c==="input"&&b.type===a}}function l(a){return function(b){var c=b.nodeName.toLowerCase();return(c==="input"||c==="button")&&b.type===a}}function m(a){return e(function(b){b=+b;return e(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function n(a,b){var c,d,e,f,h,i,j,k=U[a+" "];if(k)return b?0:k.slice(0);h=a;i=[];j=A.preFilter;while(h){if(!c||(d=mb.exec(h))){d&&(h=h.slice(d[0].length)||h);i.push(e=[])}c=!1;if(d=nb.exec(h)){c=d.shift();e.push({value:c,type:d[0].replace(lb," ")});h=h.slice(c.length)}for(f in A.filter)if((d=sb[f].exec(h))&&(!j[f]||(d=j[f](d)))){c=d.shift();e.push({value:c,type:f,matches:d});h=h.slice(c.length)}if(!c)break}return b?h.length:h?g.error(a):U(a,i).slice(0)}function o(a){var b=0,c=a.length,d="";for(;b<c;b++)d+=a[b].value;return d}function p(a,b,c){var d=b.dir,e=c&&d==="parentNode",f=S++;return b.first?function(b,c,f){while(b=b[d])if(b.nodeType===1||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=R+" "+f;if(g){while(b=b[d])if(b.nodeType===1||e)if(a(b,c,g))return!0}else while(b=b[d])if(b.nodeType===1||e){j=b[O]||(b[O]={});if((i=j[d])&&i[0]===k){if((h=i[1])===!0||h===z)return h===!0}else{i=j[d]=[k];i[1]=a(b,c,g)||z;if(i[1]===!0)return!0}}}}function q(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function r(a,b,c,d,e){var f,g=[],h=0,i=a.length,j=b!=null;for(;h<i;h++)if(f=a[h])if(!c||c(f,d,e)){g.push(f);j&&b.push(h)}return g}function s(a,b,c,d,f,g){d&&!d[O]&&(d=s(d));f&&!f[O]&&(f=s(f,g));return e(function(e,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=e||v(b||"*",h.nodeType?[h]:h,[]),q=a&&(e||!b)?r(p,m,a,h,i):p,s=c?f||(e?a:o||d)?[]:g:q;c&&c(q,s,h,i);if(d){j=r(s,n);d(j,[],h,i);k=j.length;while(k--)if(l=j[k])s[n[k]]=!(q[n[k]]=l)}if(e){if(f||a){if(f){j=[];k=s.length;while(k--)(l=s[k])&&j.push(q[k]=l);f(null,s=[],j,i)}k=s.length;while(k--)(l=s[k])&&(j=f?db.call(e,l):m[k])>-1&&(e[j]=!(g[j]=l))}}else{s=r(s===g?s.splice(o,s.length):s);f?f(null,g,s,i):bb.apply(g,s)}})}function t(a){var b,c,d,e=a.length,f=A.relative[a[0].type],g=f||A.relative[" "],h=f?1:0,i=p(function(a){return a===b},g,!0),j=p(function(a){return db.call(b,a)>-1},g,!0),k=[function(a,c,d){return!f&&(d||c!==E)||((b=c).nodeType?i(a,c,d):j(a,c,d))}];for(;h<e;h++)if(c=A.relative[a[h].type])k=[p(q(k),c)];else{c=A.filter[a[h].type].apply(null,a[h].matches);if(c[O]){d=++h;for(;d<e;d++)if(A.relative[a[d].type])break;return s(h>1&&q(k),h>1&&o(a.slice(0,h-1)).replace(lb,"$1"),c,h<d&&t(a.slice(h,d)),d<e&&t(a=a.slice(d)),d<e&&o(a))}k.push(c)}return q(k)}function u(a,b){var c=0,d=b.length>0,f=a.length>0,h=function(e,h,i,j,k){var l,m,n,o=[],p=0,q="0",s=e&&[],t=k!=null,u=E,v=e||f&&A.find.TAG("*",k&&h.parentNode||h),w=R+=u==null?1:Math.random()||.1;if(t){E=h!==H&&h;z=c}for(;(l=v[q])!=null;q++){if(f&&l){m=0;while(n=a[m++])if(n(l,h,i)){j.push(l);break}if(t){R=w;z=++c}}if(d){(l=!n&&l)&&p--;e&&s.push(l)}}p+=q;if(d&&q!==p){m=0;while(n=b[m++])n(s,o,h,i);if(e){if(p>0)while(q--)!s[q]&&!o[q]&&(o[q]=_.call(j));o=r(o)}bb.apply(j,o);t&&!e&&o.length>0&&p+b.length>1&&g.uniqueSort(j)}if(t){R=w;E=u}return s};return d?e(h):h}function v(a,b,c){var d=0,e=b.length;for(;d<e;d++)g(a,b[d],c);return c}function w(a,b,c,d){var e,f,g,h,i,j=n(a);if(!d&&j.length===1){f=j[0]=j[0].slice(0);if(f.length>2&&(g=f[0]).type==="ID"&&b.nodeType===9&&J&&A.relative[f[1].type]){b=(A.find.ID(g.matches[0].replace(yb,zb),b)||[])[0];if(!b)return c;a=a.slice(f.shift().value.length)}e=sb.needsContext.test(a)?0:f.length;while(e--){g=f[e];if(A.relative[h=g.type])break;if(i=A.find[h])if(d=i(g.matches[0].replace(yb,zb),ob.test(f[0].type)&&b.parentNode||b)){f.splice(e,1);a=d.length&&o(f);if(!a){bb.apply(c,d);return c}break}}}D(a,j)(d,b,!J,c,ob.test(a));return c}function x(){}var y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O="sizzle"+-new Date,P=a.document,Q={},R=0,S=0,T=d(),U=d(),V=d(),W=!1,X=function(){return 0},Y=typeof b,Z=1<<31,$=[],_=$.pop,ab=$.push,bb=$.push,cb=$.slice,db=$.indexOf||function(a){var b=0,c=this.length;for(;b<c;b++)if(this[b]===a)return b;return-1},eb="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",gb="[\\x20\\t\\r\\n\\f]",hb="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ib=hb.replace("w","w#"),jb="\\["+gb+"*("+hb+")"+gb+"*(?:([*^$|!~]?=)"+gb+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+ib+")|)|)"+gb+"*\\]",kb=":("+hb+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+jb.replace(3,8)+")*)|.*)\\)|)",lb=new RegExp("^"+gb+"+|((?:^|[^\\\\])(?:\\\\.)*)"+gb+"+$","g"),mb=new RegExp("^"+gb+"*,"+gb+"*"),nb=new RegExp("^"+gb+"*([>+~]|"+gb+")"+gb+"*"),ob=new RegExp(gb+"*[+~]"),pb=new RegExp("="+gb+"*([^\\]'\"]*)"+gb+"*\\]","g"),qb=new RegExp(kb),rb=new RegExp("^"+ib+"$"),sb={ID:new RegExp("^#("+hb+")"),CLASS:new RegExp("^\\.("+hb+")"),TAG:new RegExp("^("+hb.replace("w","w*")+")"),ATTR:new RegExp("^"+jb),PSEUDO:new RegExp("^"+kb),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+gb+"*(even|odd|(([+-]|)(\\d*)n|)"+gb+"*(?:([+-]|)"+gb+"*(\\d+)|))"+gb+"*\\)|)","i"),"boolean":new RegExp("^(?:"+eb+")$","i"),needsContext:new RegExp("^"+gb+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+gb+"*((?:-\\d)?\\d*)"+gb+"*\\)|)(?=[^-]|$)","i")},tb=/^[^{]+\{\s*\[native \w/,ub=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,vb=/^(?:input|select|textarea|button)$/i,wb=/^h\d$/i,xb=/'|\\/g,yb=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,zb=function(a,b){var c="0x"+b-65536;return c!==c?b:c<0?String.fromCharCode(c+65536):String.fromCharCode(c>>10|55296,c&1023|56320)};try{bb.apply($=cb.call(P.childNodes),P.childNodes);$[P.childNodes.length].nodeType}catch(Ab){bb={apply:$.length?function(a,b){ab.apply(a,cb.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}C=g.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?b.nodeName!=="HTML":!1};G=g.setDocument=function(a){var d=a?a.ownerDocument||a:P;if(d===H||d.nodeType!==9||!d.documentElement)return H;H=d;I=d.documentElement;J=!C(d);Q.getElementsByTagName=f(function(a){a.appendChild(d.createComment(""));return!a.getElementsByTagName("*").length});Q.attributes=f(function(a){a.className="i";return!a.getAttribute("className")});Q.getElementsByClassName=f(function(a){a.innerHTML="<div class='a'></div><div class='a i'></div>";a.firstChild.className="i";return a.getElementsByClassName("i").length===2});Q.sortDetached=f(function(a){return a.compareDocumentPosition(H.createElement("div"))&1});Q.getById=f(function(a){I.appendChild(a).id=O;return!d.getElementsByName||!d.getElementsByName(O).length});if(Q.getById){A.find.ID=function(a,b){if(typeof b.getElementById!==Y&&J){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}};A.filter.ID=function(a){var b=a.replace(yb,zb);return function(a){return a.getAttribute("id")===b}}}else{A.find.ID=function(a,c){if(typeof c.getElementById!==Y&&J){var d=c.getElementById(a);return d?d.id===a||typeof d.getAttributeNode!==Y&&d.getAttributeNode("id").value===a?[d]:b:[]}};A.filter.ID=function(a){var b=a.replace(yb,zb);return function(a){var c=typeof a.getAttributeNode!==Y&&a.getAttributeNode("id");return c&&c.value===b}}}A.find.TAG=Q.getElementsByTagName?function(a,b){if(typeof b.getElementsByTagName!==Y)return b.getElementsByTagName(a)}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if(a==="*"){while(c=f[e++])c.nodeType===1&&d.push(c);return d}return f};A.find.CLASS=Q.getElementsByClassName&&function(a,b){if(typeof b.getElementsByClassName!==Y&&J)return b.getElementsByClassName(a)};L=[];K=[];if(Q.qsa=c(d.querySelectorAll)){f(function(a){a.innerHTML="<select><option selected=''></option></select>";a.querySelectorAll("[selected]").length||K.push("\\["+gb+"*(?:value|"+eb+")");a.querySelectorAll(":checked").length||K.push(":checked")});f(function(a){var b=H.createElement("input");b.setAttribute("type","hidden");a.appendChild(b).setAttribute("t","");a.querySelectorAll("[t^='']").length&&K.push("[*^$]="+gb+"*(?:''|\"\")");a.querySelectorAll(":enabled").length||K.push(":enabled",":disabled");a.querySelectorAll("*,:x");K.push(",.*:")})}(Q.matchesSelector=c(M=I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&f(function(a){Q.disconnectedMatch=M.call(a,"div");M.call(a,"[s!='']:x");L.push("!=",kb)});K=K.length&&new RegExp(K.join("|"));L=L.length&&new RegExp(L.join("|"));N=c(I.contains)||I.compareDocumentPosition?function(a,b){var c=a.nodeType===9?a.documentElement:a,d=b&&b.parentNode;return a===d||!!d&&d.nodeType===1&&!!(c.contains?c.contains(d):a.compareDocumentPosition&&a.compareDocumentPosition(d)&16)}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1};X=I.compareDocumentPosition?function(a,b){if(a===b){W=!0;return 0}var c=b.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(b);if(c)return c&1||!Q.sortDetached&&b.compareDocumentPosition(a)===c?a===d||N(P,a)?-1:b===d||N(P,b)?1:F?db.call(F,a)-db.call(F,b):0:c&4?-1:1;return a.compareDocumentPosition?-1:1}:function(a,b){var c,e=0,f=a.parentNode,g=b.parentNode,i=[a],j=[b];if(a===b){W=!0;return 0}if(!f||!g)return a===d?-1:b===d?1:f?-1:g?1:F?db.call(F,a)-db.call(F,b):0;if(f===g)return h(a,b);c=a;while(c=c.parentNode)i.unshift(c);c=b;while(c=c.parentNode)j.unshift(c);while(i[e]===j[e])e++;return e?h(i[e],j[e]):i[e]===P?-1:j[e]===P?1:0};return H};g.matches=function(a,b){return g(a,null,null,b)};g.matchesSelector=function(a,b){(a.ownerDocument||a)!==H&&G(a);b=b.replace(pb,"='$1']");if(Q.matchesSelector&&J&&(!L||!L.test(b))&&(!K||!K.test(b)))try{var c=M.call(a,b);if(c||Q.disconnectedMatch||a.document&&a.document.nodeType!==11)return c}catch(d){}return g(b,H,null,[a]).length>0};g.contains=function(a,b){(a.ownerDocument||a)!==H&&G(a);return N(a,b)};g.attr=function(a,c){(a.ownerDocument||a)!==H&&G(a);var d=A.attrHandle[c.toLowerCase()],e=d&&d(a,c,!J);return e===b?Q.attributes||!J?a.getAttribute(c):(e=a.getAttributeNode(c))&&e.specified?e.value:null:e};g.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)};g.uniqueSort=function(a){var b,c=[],d=0,e=0;W=!Q.detectDuplicates;F=!Q.sortStable&&a.slice(0);a.sort(X);if(W){while(b=a[e++])b===a[e]&&(d=c.push(e));while(d--)a.splice(c[d],1)}return a};B=g.getText=function(a){var b,c="",d=0,e=a.nodeType;if(!e)for(;b=a[d];d++)c+=B(b);else if(e===1||e===9||e===11){if(typeof a.textContent=="string")return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=B(a)}else if(e===3||e===4)return a.nodeValue;return c};A=g.selectors={cacheLength:50,createPseudo:e,match:sb,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){a[1]=a[1].replace(yb,zb);a[3]=(a[4]||a[5]||"").replace(yb,zb);a[2]==="~="&&(a[3]=" "+a[3]+" ");return a.slice(0,4)},CHILD:function(a){a[1]=a[1].toLowerCase();if(a[1].slice(0,3)==="nth"){a[3]||g.error(a[0]);a[4]=+(a[4]?a[5]+(a[6]||1):2*(a[3]==="even"||a[3]==="odd"));a[5]=+(a[7]+a[8]||a[3]==="odd")}else a[3]&&g.error(a[0]);return a},PSEUDO:function(a){var b,c=!a[5]&&a[2];if(sb.CHILD.test(a[0]))return null;if(a[4])a[2]=a[4];else if(c&&qb.test(c)&&(b=n(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)){a[0]=a[0].slice(0,b);a[2]=c.slice(0,b)}return a.slice(0,3)}},filter:{TAG:function(a){var b=a.replace(yb,zb).toLowerCase();return a==="*"?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=T[a+" "];return b||(b=new RegExp("(^|"+gb+")"+a+"("+gb+"|$)"))&&T(a,function(a){return b.test(typeof a.className=="string"&&a.className||typeof a.getAttribute!==Y&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=g.attr(d,a);if(e==null)return b==="!=";if(!b)return!0;e+="";return b==="="?e===c:b==="!="?e!==c:b==="^="?c&&e.indexOf(c)===0:b==="*="?c&&e.indexOf(c)>-1:b==="$="?c&&e.slice(-c.length)===c:b==="~="?(" "+e+" ").indexOf(c)>-1:b==="|="?e===c||e.slice(0,c.length+1)===c+"-":!1}},CHILD:function(a,b,c,d,e){var f=a.slice(0,3)!=="nth",g=a.slice(-4)!=="last",h=b==="of-type";return d===1&&e===0?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:l.nodeType===1)return!1;o=p=a==="only"&&!o&&"nextSibling"}return!0}o=[g?q.firstChild:q.lastChild];if(g&&s){k=q[O]||(q[O]={});j=k[a]||[];n=j[0]===R&&j[1];m=j[0]===R&&j[2];l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(l.nodeType===1&&++m&&l===b){k[a]=[R,n,m];break}}else if(s&&(j=(b[O]||(b[O]={}))[a])&&j[0]===R)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:l.nodeType===1)&&++m){s&&((l[O]||(l[O]={}))[a]=[R,m]);if(l===b)break}m-=e;return m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,d=A.pseudos[a]||A.setFilters[a.toLowerCase()]||g.error("unsupported pseudo: "+a);if(d[O])return d(b);if(d.length>1){c=[a,a,"",b];return A.setFilters.hasOwnProperty(a.toLowerCase())?e(function(a,c){var e,f=d(a,b),g=f.length;while(g--){e=db.call(a,f[g]);a[e]=!(c[e]=f[g])}}):function(a){return d(a,0,c)}}return d}},pseudos:{not:e(function(a){var b=[],c=[],d=D(a.replace(lb,"$1"));return d[O]?e(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)if(f=g[h])a[h]=!(b[h]=f)}):function(a,e,f){b[0]=a;d(b,null,f,c);return!c.pop()}}),has:e(function(a){return function(b){return g(a,b).length>0}}),contains:e(function(a){return function(b){return(b.textContent||b.innerText||B(b)).indexOf(a)>-1}}),lang:e(function(a){rb.test(a||"")||g.error("unsupported lang: "+a);a=a.replace(yb,zb).toLowerCase();return function(b){var c;do if(c=J?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang")){c=c.toLowerCase();return c===a||c.indexOf(a+"-")===0}while((b=b.parentNode)&&b.nodeType===1);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===I},focus:function(a){return a===H.activeElement&&(!H.hasFocus||H.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&!!a.checked||b==="option"&&!!a.selected},selected:function(a){a.parentNode&&a.parentNode.selectedIndex;return a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeName>"@"||a.nodeType===3||a.nodeType===4)return!1;return!0},parent:function(a){return!A.pseudos.empty(a)},header:function(a){return wb.test(a.nodeName)
},input:function(a){return vb.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return b==="input"&&a.type==="button"||b==="button"},text:function(a){var b;return a.nodeName.toLowerCase()==="input"&&a.type==="text"&&((b=a.getAttribute("type"))==null||b.toLowerCase()===a.type)},first:m(function(){return[0]}),last:m(function(a,b){return[b-1]}),eq:m(function(a,b,c){return[c<0?c+b:c]}),even:m(function(a,b){var c=0;for(;c<b;c+=2)a.push(c);return a}),odd:m(function(a,b){var c=1;for(;c<b;c+=2)a.push(c);return a}),lt:m(function(a,b,c){var d=c<0?c+b:c;for(;--d>=0;)a.push(d);return a}),gt:m(function(a,b,c){var d=c<0?c+b:c;for(;++d<b;)a.push(d);return a})}};for(y in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})A.pseudos[y]=k(y);for(y in{submit:!0,reset:!0})A.pseudos[y]=l(y);D=g.compile=function(a,b){var c,d=[],e=[],f=V[a+" "];if(!f){b||(b=n(a));c=b.length;while(c--){f=t(b[c]);f[O]?d.push(f):e.push(f)}f=V(a,u(e,d))}return f};A.pseudos.nth=A.pseudos.eq;x.prototype=A.filters=A.pseudos;A.setFilters=new x;Q.sortStable=O.split("").sort(X).join("")===O;G();[0,0].sort(X);Q.detectDuplicates=W;f(function(a){a.innerHTML="<a href='#'></a>";if(a.firstChild.getAttribute("href")!=="#"){var b="type|href|height|width".split("|"),c=b.length;while(c--)A.attrHandle[b[c]]=j}});f(function(a){if(a.getAttribute("disabled")!=null){var b=eb.split("|"),c=b.length;while(c--)A.attrHandle[b[c]]=i}});fb.find=g;fb.expr=g.selectors;fb.expr[":"]=fb.expr.pseudos;fb.unique=g.uniqueSort;fb.text=g.getText;fb.isXMLDoc=g.isXML;fb.contains=g.contains}(a);var ob={};fb.Callbacks=function(a){a=typeof a=="string"?ob[a]||d(a):fb.extend({},a);var c,e,f,g,h,i,j=[],k=!a.once&&[],l=function(b){c=a.memory&&b;e=!0;i=g||0;g=0;h=j.length;f=!0;for(;j&&i<h;i++)if(j[i].apply(b[0],b[1])===!1&&a.stopOnFalse){c=!1;break}f=!1;j&&(k?k.length&&l(k.shift()):c?j=[]:m.disable())},m={add:function(){if(j){var b=j.length;!function d(b){fb.each(b,function(b,c){var e=fb.type(c);e==="function"?(!a.unique||!m.has(c))&&j.push(c):c&&c.length&&e!=="string"&&d(c)})}(arguments);if(f)h=j.length;else if(c){g=b;l(c)}}return this},remove:function(){j&&fb.each(arguments,function(a,b){var c;while((c=fb.inArray(b,j,c))>-1){j.splice(c,1);if(f){c<=h&&h--;c<=i&&i--}}});return this},has:function(a){return a?fb.inArray(a,j)>-1:!!j&&!!j.length},empty:function(){j=[];h=0;return this},disable:function(){j=k=c=b;return this},disabled:function(){return!j},lock:function(){k=b;c||m.disable();return this},locked:function(){return!k},fireWith:function(a,b){b=b||[];b=[a,b.slice?b.slice():b];j&&(!e||k)&&(f?k.push(b):l(b));return this},fire:function(){m.fireWith(this,arguments);return this},fired:function(){return!!e}};return m};fb.extend({Deferred:function(a){var b=[["resolve","done",fb.Callbacks("once memory"),"resolved"],["reject","fail",fb.Callbacks("once memory"),"rejected"],["notify","progress",fb.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){e.done(arguments).fail(arguments);return this},then:function(){var a=arguments;return fb.Deferred(function(c){fb.each(b,function(b,f){var g=f[0],h=fb.isFunction(a[b])&&a[b];e[f[1]](function(){var a=h&&h.apply(this,arguments);a&&fb.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[g+"With"](this===d?c.promise():this,h?[a]:arguments)})});a=null}).promise()},promise:function(a){return a!=null?fb.extend(a,d):d}},e={};d.pipe=d.then;fb.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add;h&&g.add(function(){c=h},b[a^1][2].disable,b[2][2].lock);e[f[0]]=function(){e[f[0]+"With"](this===e?d:this,arguments);return this};e[f[0]+"With"]=g.fireWith});d.promise(e);a&&a.call(e,e);return e},when:function(a){var b=0,c=ab.call(arguments),d=c.length,e=d!==1||a&&fb.isFunction(a.promise)?d:0,f=e===1?a:fb.Deferred(),g=function(a,b,c){return function(d){b[a]=this;c[a]=arguments.length>1?ab.call(arguments):d;c===h?f.notifyWith(b,c):--e||f.resolveWith(b,c)}},h,i,j;if(d>1){h=new Array(d);i=new Array(d);j=new Array(d);for(;b<d;b++)c[b]&&fb.isFunction(c[b].promise)?c[b].promise().done(g(b,j,c)).fail(f.reject).progress(g(b,i,h)):--e}e||f.resolveWith(j,c);return f.promise()}});fb.support=function(b){var c=T.createElement("input"),d=T.createDocumentFragment(),e=T.createElement("div"),f=T.createElement("select"),g=f.appendChild(T.createElement("option"));if(!c.type)return b;c.type="checkbox";b.checkOn=c.value!=="";b.optSelected=g.selected;b.reliableMarginRight=!0;b.boxSizingReliable=!0;b.pixelPosition=!1;c.checked=!0;b.noCloneChecked=c.cloneNode(!0).checked;f.disabled=!0;b.optDisabled=!g.disabled;c=T.createElement("input");c.value="t";c.type="radio";b.radioValue=c.value==="t";c.setAttribute("checked","t");c.setAttribute("name","t");d.appendChild(c);b.checkClone=d.cloneNode(!0).cloneNode(!0).lastChild.checked;b.focusinBubbles="onfocusin"in a;e.style.backgroundClip="content-box";e.cloneNode(!0).style.backgroundClip="";b.clearCloneStyle=e.style.backgroundClip==="content-box";fb(function(){var c,d,f="padding:0;margin:0;border:0;display:block;-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box",g=T.getElementsByTagName("body")[0];if(!g)return;c=T.createElement("div");c.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px";g.appendChild(c).appendChild(e);e.innerHTML="";e.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%";fb.swap(g,g.style.zoom!=null?{zoom:1}:{},function(){b.boxSizing=e.offsetWidth===4});if(a.getComputedStyle){b.pixelPosition=(a.getComputedStyle(e,null)||{}).top!=="1%";b.boxSizingReliable=(a.getComputedStyle(e,null)||{width:"4px"}).width==="4px";d=e.appendChild(T.createElement("div"));d.style.cssText=e.style.cssText=f;d.style.marginRight=d.style.width="0";e.style.width="1px";b.reliableMarginRight=!parseFloat((a.getComputedStyle(d,null)||{}).marginRight)}g.removeChild(c)});return b}({});var pb,qb,rb=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,sb=/([A-Z])/g;e.uid=1;e.accepts=function(a){return a.nodeType?a.nodeType===1||a.nodeType===9:!0};e.prototype={key:function(a){if(!e.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=e.uid++;try{b[this.expando]={value:c};Object.defineProperties(a,b)}catch(d){b[this.expando]=c;fb.extend(a,b)}}this.cache[c]||(this.cache[c]={});return c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if(typeof b=="string")f[b]=c;else if(fb.isEmptyObject(f))this.cache[e]=b;else for(d in b)f[d]=b[d]},get:function(a,c){var d=this.cache[this.key(a)];return c===b?d:d[c]},access:function(a,c,d){if(c===b||c&&typeof c=="string"&&d===b)return this.get(a,c);this.set(a,c,d);return d!==b?d:c},remove:function(a,c){var d,e,f=this.key(a),g=this.cache[f];if(c===b)this.cache[f]={};else{if(fb.isArray(c))e=c.concat(c.map(fb.camelCase));else if(c in g)e=[c];else{e=fb.camelCase(c);e=e in g?[e]:e.match(hb)||[]}d=e.length;while(d--)delete g[e[d]]}},hasData:function(a){return!fb.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){delete this.cache[this.key(a)]}};pb=new e;qb=new e;fb.extend({acceptData:e.accepts,hasData:function(a){return pb.hasData(a)||qb.hasData(a)},data:function(a,b,c){return pb.access(a,b,c)},removeData:function(a,b){pb.remove(a,b)},_data:function(a,b,c){return qb.access(a,b,c)},_removeData:function(a,b){qb.remove(a,b)}});fb.fn.extend({data:function(a,c){var d,e,g=this[0],h=0,i=null;if(a===b){if(this.length){i=pb.get(g);if(g.nodeType===1&&!qb.get(g,"hasDataAttrs")){d=g.attributes;for(;h<d.length;h++){e=d[h].name;if(e.indexOf("data-")===0){e=fb.camelCase(e.substring(5));f(g,e,i[e])}}qb.set(g,"hasDataAttrs",!0)}}return i}return typeof a=="object"?this.each(function(){pb.set(this,a)}):fb.access(this,function(c){var d,e=fb.camelCase(a);if(g&&c===b){d=pb.get(g,a);if(d!==b)return d;d=pb.get(g,e);if(d!==b)return d;d=f(g,e,b);if(d!==b)return d;return}this.each(function(){var d=pb.get(this,e);pb.set(this,e,c);a.indexOf("-")!==-1&&d!==b&&pb.set(this,a,c)})},null,c,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){pb.remove(this,a)})}});fb.extend({queue:function(a,b,c){var d;if(a){b=(b||"fx")+"queue";d=qb.get(a,b);c&&(!d||fb.isArray(c)?d=qb.access(a,b,fb.makeArray(c)):d.push(c));return d||[]}},dequeue:function(a,b){b=b||"fx";var c=fb.queue(a,b),d=c.length,e=c.shift(),f=fb._queueHooks(a,b),g=function(){fb.dequeue(a,b)};if(e==="inprogress"){e=c.shift();d--}f.cur=e;if(e){b==="fx"&&c.unshift("inprogress");delete f.stop;e.call(a,g,f)}!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return qb.get(a,c)||qb.access(a,c,{empty:fb.Callbacks("once memory").add(function(){qb.remove(a,[b+"queue",c])})})}});fb.fn.extend({queue:function(a,c){var d=2;if(typeof a!="string"){c=a;a="fx";d--}return arguments.length<d?fb.queue(this[0],a):c===b?this:this.each(function(){var b=fb.queue(this,a,c);fb._queueHooks(this,a);a==="fx"&&b[0]!=="inprogress"&&fb.dequeue(this,a)})},dequeue:function(a){return this.each(function(){fb.dequeue(this,a)})},delay:function(a,b){a=fb.fx?fb.fx.speeds[a]||a:a;b=b||"fx";return this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,c){var d,e=1,f=fb.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};if(typeof a!="string"){c=a;a=b}a=a||"fx";while(h--){d=qb.get(g[h],a+"queueHooks");if(d&&d.empty){e++;d.empty.add(i)}}i();return f.promise(c)}});var tb,ub,vb=/[\t\r\n]/g,wb=/\r/g,xb=/^(?:input|select|textarea|button)$/i;fb.fn.extend({attr:function(a,b){return fb.access(this,fb.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){fb.removeAttr(this,a)})},prop:function(a,b){return fb.access(this,fb.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[fb.propFix[a]||a]})},addClass:function(a){var b,c,d,e,f,g=0,h=this.length,i=typeof a=="string"&&a;if(fb.isFunction(a))return this.each(function(b){fb(this).addClass(a.call(this,b,this.className))});if(i){b=(a||"").match(hb)||[];for(;g<h;g++){c=this[g];d=c.nodeType===1&&(c.className?(" "+c.className+" ").replace(vb," "):" ");if(d){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");c.className=fb.trim(d)}}}return this},removeClass:function(a){var b,c,d,e,f,g=0,h=this.length,i=arguments.length===0||typeof a=="string"&&a;if(fb.isFunction(a))return this.each(function(b){fb(this).removeClass(a.call(this,b,this.className))});if(i){b=(a||"").match(hb)||[];for(;g<h;g++){c=this[g];d=c.nodeType===1&&(c.className?(" "+c.className+" ").replace(vb," "):"");if(d){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");c.className=a?fb.trim(d):""}}}return this},toggleClass:function(a,b){var c=typeof a,d=typeof b=="boolean";return fb.isFunction(a)?this.each(function(c){fb(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if(c==="string"){var e,f=0,g=fb(this),h=b,i=a.match(hb)||[];while(e=i[f++]){h=d?h:!g.hasClass(e);g[h?"addClass":"removeClass"](e)}}else if(c===R||c==="boolean"){this.className&&qb.set(this,"__className__",this.className);this.className=this.className||a===!1?"":qb.get(this,"__className__")||""}})},hasClass:function(a){var b=" "+a+" ",c=0,d=this.length;for(;c<d;c++)if(this[c].nodeType===1&&(" "+this[c].className+" ").replace(vb," ").indexOf(b)>=0)return!0;return!1},val:function(a){var c,d,e,f=this[0];if(!arguments.length){if(f){c=fb.valHooks[f.type]||fb.valHooks[f.nodeName.toLowerCase()];if(c&&"get"in c&&(d=c.get(f,"value"))!==b)return d;d=f.value;return typeof d=="string"?d.replace(wb,""):d==null?"":d}return}e=fb.isFunction(a);return this.each(function(d){var f,g=fb(this);if(this.nodeType!==1)return;e?f=a.call(this,d,g.val()):f=a;f==null?f="":typeof f=="number"?f+="":fb.isArray(f)&&(f=fb.map(f,function(a){return a==null?"":a+""}));c=fb.valHooks[this.type]||fb.valHooks[this.nodeName.toLowerCase()];if(!c||!("set"in c)||c.set(this,f,"value")===b)this.value=f})}});fb.extend({valHooks:{option:{get:function(a){var b=a.attributes.value;return!b||b.specified?a.value:a.text}},select:{get:function(a){var b,c,d=a.options,e=a.selectedIndex,f=a.type==="select-one"||e<0,g=f?null:[],h=f?e+1:d.length,i=e<0?h:f?e:0;for(;i<h;i++){c=d[i];if((c.selected||i===e)&&(fb.support.optDisabled?!c.disabled:c.getAttribute("disabled")===null)&&(!c.parentNode.disabled||!fb.nodeName(c.parentNode,"optgroup"))){b=fb(c).val();if(f)return b;g.push(b)}}return g},set:function(a,b){var c,d,e=a.options,f=fb.makeArray(b),g=e.length;while(g--){d=e[g];if(d.selected=fb.inArray(fb(d).val(),f)>=0)c=!0}c||(a.selectedIndex=-1);return f}}},attr:function(a,c,d){var e,f,g=a.nodeType;if(!a||g===3||g===8||g===2)return;if(typeof a.getAttribute===R)return fb.prop(a,c,d);if(g!==1||!fb.isXMLDoc(a)){c=c.toLowerCase();e=fb.attrHooks[c]||(fb.expr.match.boolean.test(c)?ub:tb)}if(d===b){if(e&&"get"in e&&(f=e.get(a,c))!==null)return f;f=fb.find.attr(a,c);return f==null?b:f}if(d!==null){if(e&&"set"in e&&(f=e.set(a,d,c))!==b)return f;a.setAttribute(c,d+"");return d}fb.removeAttr(a,c)},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(hb);if(f&&a.nodeType===1)while(c=f[e++]){d=fb.propFix[c]||c;fb.expr.match.boolean.test(c)&&(a[d]=!1);a.removeAttribute(c)}},attrHooks:{type:{set:function(a,b){if(!fb.support.radioValue&&b==="radio"&&fb.nodeName(a,"input")){var c=a.value;a.setAttribute("type",b);c&&(a.value=c);return b}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(a,c,d){var e,f,g,h=a.nodeType;if(!a||h===3||h===8||h===2)return;g=h!==1||!fb.isXMLDoc(a);if(g){c=fb.propFix[c]||c;f=fb.propHooks[c]}return d!==b?f&&"set"in f&&(e=f.set(a,d,c))!==b?e:a[c]=d:f&&"get"in f&&(e=f.get(a,c))!==null?e:a[c]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||xb.test(a.nodeName)||a.href?a.tabIndex:-1}}}});ub={set:function(a,b,c){b===!1?fb.removeAttr(a,c):a.setAttribute(c,c);return c}};fb.each(fb.expr.match.boolean.source.match(/\w+/g),function(a,c){var d=fb.expr.attrHandle[c]||fb.find.attr;fb.expr.attrHandle[c]=function(a,c,e){var f=fb.expr.attrHandle[c],g=e?b:(fb.expr.attrHandle[c]=b)!=d(a,c,e)?c.toLowerCase():null;fb.expr.attrHandle[c]=f;return g}});fb.support.optSelected||(fb.propHooks.selected={get:function(a){var b=a.parentNode;b&&b.parentNode&&b.parentNode.selectedIndex;return null}});fb.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){fb.propFix[this.toLowerCase()]=this});fb.each(["radio","checkbox"],function(){fb.valHooks[this]={set:function(a,b){if(fb.isArray(b))return a.checked=fb.inArray(fb(a).val(),b)>=0}};fb.support.checkOn||(fb.valHooks[this].get=function(a){return a.getAttribute("value")===null?"on":a.value})});var yb=/^key/,zb=/^(?:mouse|contextmenu)|click/,Ab=/^(?:focusinfocus|focusoutblur)$/,Bb=/^([^.]*)(?:\.(.+)|)$/;fb.event={global:{},add:function(a,c,d,e,f){var g,h,i,j,k,l,m,n,o,p,q,r=qb.get(a);if(!r)return;if(d.handler){g=d;d=g.handler;f=g.selector}d.guid||(d.guid=fb.guid++);(j=r.events)||(j=r.events={});if(!(h=r.handle)){h=r.handle=function(a){return typeof fb===R||!!a&&fb.event.triggered===a.type?b:fb.event.dispatch.apply(h.elem,arguments)};h.elem=a}c=(c||"").match(hb)||[""];k=c.length;while(k--){i=Bb.exec(c[k])||[];o=q=i[1];p=(i[2]||"").split(".").sort();if(!o)continue;m=fb.event.special[o]||{};o=(f?m.delegateType:m.bindType)||o;m=fb.event.special[o]||{};l=fb.extend({type:o,origType:q,data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&fb.expr.match.needsContext.test(f),namespace:p.join(".")},g);if(!(n=j[o])){n=j[o]=[];n.delegateCount=0;(!m.setup||m.setup.call(a,e,p,h)===!1)&&a.addEventListener&&a.addEventListener(o,h,!1)}if(m.add){m.add.call(a,l);l.handler.guid||(l.handler.guid=d.guid)}f?n.splice(n.delegateCount++,0,l):n.push(l);fb.event.global[o]=!0}a=null},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=qb.hasData(a)&&qb.get(a);if(!q||!(i=q.events))return;b=(b||"").match(hb)||[""];j=b.length;while(j--){h=Bb.exec(b[j])||[];n=p=h[1];o=(h[2]||"").split(".").sort();if(!n){for(n in i)fb.event.remove(a,n+b[j],c,d,!0);continue}l=fb.event.special[n]||{};n=(d?l.delegateType:l.bindType)||n;m=i[n]||[];h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)");g=f=m.length;while(f--){k=m[f];if((e||p===k.origType)&&(!c||c.guid===k.guid)&&(!h||h.test(k.namespace))&&(!d||d===k.selector||d==="**"&&k.selector)){m.splice(f,1);k.selector&&m.delegateCount--;l.remove&&l.remove.call(a,k)}}if(g&&!m.length){(!l.teardown||l.teardown.call(a,o,q.handle)===!1)&&fb.removeEvent(a,n,q.handle);delete i[n]}}if(fb.isEmptyObject(i)){delete q.handle;qb.remove(a,"events")}},trigger:function(c,d,e,f){var g,h,i,j,k,l,m,n=[e||T],o=db.call(c,"type")?c.type:c,p=db.call(c,"namespace")?c.namespace.split("."):[];h=i=e=e||T;if(e.nodeType===3||e.nodeType===8)return;if(Ab.test(o+fb.event.triggered))return;if(o.indexOf(".")>=0){p=o.split(".");o=p.shift();p.sort()}k=o.indexOf(":")<0&&"on"+o;c=c[fb.expando]?c:new fb.Event(o,typeof c=="object"&&c);c.isTrigger=f?2:3;c.namespace=p.join(".");c.namespace_re=c.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null;c.result=b;c.target||(c.target=e);d=d==null?[c]:fb.makeArray(d,[c]);m=fb.event.special[o]||{};if(!f&&m.trigger&&m.trigger.apply(e,d)===!1)return;if(!f&&!m.noBubble&&!fb.isWindow(e)){j=m.delegateType||o;Ab.test(j+o)||(h=h.parentNode);for(;h;h=h.parentNode){n.push(h);i=h}i===(e.ownerDocument||T)&&n.push(i.defaultView||i.parentWindow||a)}g=0;while((h=n[g++])&&!c.isPropagationStopped()){c.type=g>1?j:m.bindType||o;l=(qb.get(h,"events")||{})[c.type]&&qb.get(h,"handle");l&&l.apply(h,d);l=k&&h[k];l&&fb.acceptData(h)&&l.apply&&l.apply(h,d)===!1&&c.preventDefault()}c.type=o;if(!f&&!c.isDefaultPrevented()&&(!m._default||m._default.apply(n.pop(),d)===!1)&&fb.acceptData(e)&&k&&fb.isFunction(e[o])&&!fb.isWindow(e)){i=e[k];i&&(e[k]=null);fb.event.triggered=o;e[o]();fb.event.triggered=b;i&&(e[k]=i)}return c.result},dispatch:function(a){a=fb.event.fix(a);var c,d,e,f,g,h=[],i=ab.call(arguments),j=(qb.get(this,"events")||{})[a.type]||[],k=fb.event.special[a.type]||{};i[0]=a;a.delegateTarget=this;if(k.preDispatch&&k.preDispatch.call(this,a)===!1)return;h=fb.event.handlers.call(this,a,j);c=0;while((f=h[c++])&&!a.isPropagationStopped()){a.currentTarget=f.elem;d=0;while((g=f.handlers[d++])&&!a.isImmediatePropagationStopped())if(!a.namespace_re||a.namespace_re.test(g.namespace)){a.handleObj=g;a.data=g.data;e=((fb.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i);if(e!==b&&(a.result=e)===!1){a.preventDefault();a.stopPropagation()}}}k.postDispatch&&k.postDispatch.call(this,a);return a.result},handlers:function(a,c){var d,e,f,g,h=[],i=c.delegateCount,j=a.target;if(i&&j.nodeType&&(!a.button||a.type!=="click"))for(;j!==this;j=j.parentNode||this)if(j.disabled!==!0||a.type!=="click"){e=[];for(d=0;d<i;d++){g=c[d];f=g.selector+" ";e[f]===b&&(e[f]=g.needsContext?fb(f,this).index(j)>=0:fb.find(f,this,null,[j]).length);e[f]&&e.push(g)}e.length&&h.push({elem:j,handlers:e})}i<c.length&&h.push({elem:this,handlers:c.slice(i)});return h},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){a.which==null&&(a.which=b.charCode!=null?b.charCode:b.keyCode);return a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,c){var d,e,f,g=c.button;if(a.pageX==null&&c.clientX!=null){d=a.target.ownerDocument||T;e=d.documentElement;f=d.body;a.pageX=c.clientX+(e&&e.scrollLeft||f&&f.scrollLeft||0)-(e&&e.clientLeft||f&&f.clientLeft||0);a.pageY=c.clientY+(e&&e.scrollTop||f&&f.scrollTop||0)-(e&&e.clientTop||f&&f.clientTop||0)}!a.which&&g!==b&&(a.which=g&1?1:g&2?3:g&4?2:0);return a}},fix:function(a){if(a[fb.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=zb.test(e)?this.mouseHooks:yb.test(e)?this.keyHooks:{});d=g.props?this.props.concat(g.props):this.props;a=new fb.Event(f);b=d.length;while(b--){c=d[b];a[c]=f[c]}a.target.nodeType===3&&(a.target=a.target.parentNode);return g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==i()&&this.focus){this.focus();return!1}},delegateType:"focusin"},blur:{trigger:function(){if(this===i()&&this.blur){this.blur();return!1}},delegateType:"focusout"},click:{trigger:function(){if(this.type==="checkbox"&&this.click&&fb.nodeName(this,"input")){this.click();return!1}},_default:function(a){return fb.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){a.result!==b&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=fb.extend(new fb.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?fb.event.trigger(e,null,b):fb.event.dispatch.call(b,e);e.isDefaultPrevented()&&c.preventDefault()}};fb.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)};fb.Event=function(a,b){if(!(this instanceof fb.Event))return new fb.Event(a,b);if(a&&a.type){this.originalEvent=a;this.type=a.type;this.isDefaultPrevented=a.defaultPrevented||a.getPreventDefault&&a.getPreventDefault()?g:h}else this.type=a;b&&fb.extend(this,b);this.timeStamp=a&&a.timeStamp||fb.now();this[fb.expando]=!0};fb.Event.prototype={isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=g;a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=g;a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=g;this.stopPropagation()}};fb.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){fb.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;if(!e||e!==d&&!fb.contains(d,e)){a.type=f.origType;c=f.handler.apply(this,arguments);a.type=b}return c}}});fb.support.focusinBubbles||fb.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){fb.event.simulate(b,a.target,fb.event.fix(a),!0)};fb.event.special[b]={setup:function(){c++===0&&T.addEventListener(a,d,!0)},teardown:function(){--c===0&&T.removeEventListener(a,d,!0)}}});fb.fn.extend({on:function(a,c,d,e,f){var g,i;if(typeof a=="object"){if(typeof c!="string"){d=d||c;c=b}for(i in a)this.on(i,c,d,a[i],f);return this}if(d==null&&e==null){e=c;d=c=b}else if(e==null)if(typeof c=="string"){e=d;d=b}else{e=d;d=c;c=b}if(e===!1)e=h;else if(!e)return this;if(f===1){g=e;e=function(a){fb().off(a);return g.apply(this,arguments)};e.guid=g.guid||(g.guid=fb.guid++)}return this.each(function(){fb.event.add(this,a,e,d,c)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,c,d){var e,f;if(a&&a.preventDefault&&a.handleObj){e=a.handleObj;fb(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler);return this}if(typeof a=="object"){for(f in a)this.off(f,c,a[f]);return this}if(c===!1||typeof c=="function"){d=c;c=b}d===!1&&(d=h);return this.each(function(){fb.event.remove(this,a,d,c)})},trigger:function(a,b){return this.each(function(){fb.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];if(c)return fb.event.trigger(a,b,c,!0)}});var Cb=/^.[^:#\[\.,]*$/,Db=fb.expr.match.needsContext,Eb={children:!0,contents:!0,next:!0,prev:!0};fb.fn.extend({find:function(a){var b,c,d,e=this.length;if(typeof a!="string"){b=this;return this.pushStack(fb(a).filter(function(){for(d=0;d<e;d++)if(fb.contains(b[d],this))return!0}))}c=[];for(d=0;d<e;d++)fb.find(a,this[d],c);c=this.pushStack(e>1?fb.unique(c):c);c.selector=(this.selector?this.selector+" ":"")+a;return c},has:function(a){var b=fb(a,this),c=b.length;return this.filter(function(){var a=0;for(;a<c;a++)if(fb.contains(this,b[a]))return!0})},not:function(a){return this.pushStack(k(this,a||[],!0))},filter:function(a){return this.pushStack(k(this,a||[],!1))},is:function(a){return!!a&&(typeof a=="string"?Db.test(a)?fb(a,this.context).index(this[0])>=0:fb.filter(a,this).length>0:this.filter(a).length>0)},closest:function(a,b){var c,d=0,e=this.length,f=[],g=Db.test(a)||typeof a!="string"?fb(a,b||this.context):0;for(;d<e;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:c.nodeType===1&&fb.find.matchesSelector(c,a))){c=f.push(c);break}return this.pushStack(f.length>1?fb.unique(f):f)},index:function(a){return a?typeof a=="string"?bb.call(fb(a),this[0]):bb.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){var c=typeof a=="string"?fb(a,b):fb.makeArray(a&&a.nodeType?[a]:a),d=fb.merge(this.get(),c);return this.pushStack(fb.unique(d))},addBack:function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}});fb.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return fb.dir(a,"parentNode")},parentsUntil:function(a,b,c){return fb.dir(a,"parentNode",c)},next:function(a){return j(a,"nextSibling")},prev:function(a){return j(a,"previousSibling")},nextAll:function(a){return fb.dir(a,"nextSibling")},prevAll:function(a){return fb.dir(a,"previousSibling")},nextUntil:function(a,b,c){return fb.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return fb.dir(a,"previousSibling",c)},siblings:function(a){return fb.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return fb.sibling(a.firstChild)},contents:function(a){return fb.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:fb.merge([],a.childNodes)}},function(a,b){fb.fn[a]=function(c,d){var e=fb.map(this,b,c);a.slice(-5)!=="Until"&&(d=c);d&&typeof d=="string"&&(e=fb.filter(d,e));if(this.length>1){Eb[a]||fb.unique(e);a[0]==="p"&&e.reverse()}return this.pushStack(e)}});fb.extend({filter:function(a,b,c){var d=b[0];c&&(a=":not("+a+")");return b.length===1&&d.nodeType===1?fb.find.matchesSelector(d,a)?[d]:[]:fb.find.matches(a,fb.grep(b,function(a){return a.nodeType===1}))},dir:function(a,c,d){var e=[],f=d!==b;while((a=a[c])&&a.nodeType!==9)if(a.nodeType===1){if(f&&fb(a).is(d))break;e.push(a)}return e},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling)a.nodeType===1&&a!==b&&c.push(a);return c}});var Fb=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Gb=/<([\w:]+)/,Hb=/<|&#?\w+;/,Ib=/<(?:script|style|link)/i,Jb=/^(?:checkbox|radio)$/i,Kb=/checked\s*(?:[^=]|=\s*.checked.)/i,Lb=/^$|\/(?:java|ecma)script/i,Mb=/^true\/(.*)/,Nb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ob={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ob.optgroup=Ob.option;Ob.tbody=Ob.tfoot=Ob.colgroup=Ob.caption=Ob.col=Ob.thead;Ob.th=Ob.td;fb.fn.extend({text:function(a){return fb.access(this,function(a){return a===b?fb.text(this):this.empty().append((this[0]&&this[0].ownerDocument||T).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var b=l(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var b=l(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){var c,d=a?fb.filter(a,this):this,e=0;for(;(c=d[e])!=null;e++){!b&&c.nodeType===1&&fb.cleanData(q(c));if(c.parentNode){b&&fb.contains(c.ownerDocument,c)&&o(q(c,"script"));c.parentNode.removeChild(c)}}return this},empty:function(){var a,b=0;for(;(a=this[b])!=null;b++)if(a.nodeType===1){fb.cleanData(q(a,!1));a.textContent=""}return this},clone:function(a,b){a=a==null?!1:a;b=b==null?a:b;return this.map(function(){return fb.clone(this,a,b)})},html:function(a){return fb.access(this,function(a){var c=this[0]||{},d=0,e=this.length;if(a===b&&c.nodeType===1)return c.innerHTML;if(typeof a=="string"&&!Ib.test(a)&&!Ob[(Gb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Fb,"<$1></$2>");try{for(;d<e;d++){c=this[d]||{};if(c.nodeType===1){fb.cleanData(q(c,!1));c.innerHTML=a}}c=0}catch(f){}}c&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=fb.map(this,function(a){return[a.nextSibling,a.parentNode]}),b=0;this.domManip(arguments,function(c){var d=a[b++],e=a[b++];if(e){fb(this).remove();e.insertBefore(c,d)}},!0);return b?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b,c){a=$.apply([],a);var d,e,f,g,h,i,j=0,k=this.length,l=this,o=k-1,p=a[0],r=fb.isFunction(p);if(r||!(k<=1||typeof p!="string"||fb.support.checkClone||!Kb.test(p)))return this.each(function(d){var e=l.eq(d);r&&(a[0]=p.call(this,d,e.html()));e.domManip(a,b,c)});if(k){d=fb.buildFragment(a,this[0].ownerDocument,!1,!c&&this);e=d.firstChild;d.childNodes.length===1&&(d=e);if(e){f=fb.map(q(d,"script"),m);g=f.length;for(;j<k;j++){h=d;if(j!==o){h=fb.clone(h,!0,!0);g&&fb.merge(f,q(h,"script"))}b.call(this[j],h,j)}if(g){i=f[f.length-1].ownerDocument;fb.map(f,n);for(j=0;j<g;j++){h=f[j];Lb.test(h.type||"")&&!qb.access(h,"globalEval")&&fb.contains(i,h)&&(h.src?fb._evalUrl(h.src):fb.globalEval(h.textContent.replace(Nb,"")))}}}}return this}});fb.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){fb.fn[a]=function(a){var c,d=[],e=fb(a),f=e.length-1,g=0;for(;g<=f;g++){c=g===f?this:this.clone(!0);fb(e[g])[b](c);_.apply(d,c.get())}return this.pushStack(d)}});fb.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=fb.contains(a.ownerDocument,a);if(!fb.support.noCloneChecked&&(a.nodeType===1||a.nodeType===11)&&!fb.isXMLDoc(a)){g=q(h);f=q(a);for(d=0,e=f.length;d<e;d++)r(f[d],g[d])}if(b)if(c){f=f||q(a);g=g||q(h);for(d=0,e=f.length;d<e;d++)p(f[d],g[d])}else p(a,h);g=q(h,"script");g.length>0&&o(g,!i&&q(a,"script"));return h},buildFragment:function(a,b,c,d){var e,f,g,h,i,j,k=0,l=a.length,m=b.createDocumentFragment(),n=[];for(;k<l;k++){e=a[k];if(e||e===0)if(fb.type(e)==="object")fb.merge(n,e.nodeType?[e]:e);else if(!Hb.test(e))n.push(b.createTextNode(e));else{f=f||m.appendChild(b.createElement("div"));g=(Gb.exec(e)||["",""])[1].toLowerCase();h=Ob[g]||Ob._default;f.innerHTML=h[1]+e.replace(Fb,"<$1></$2>")+h[2];j=h[0];while(j--)f=f.firstChild;fb.merge(n,f.childNodes);f=m.firstChild;f.textContent=""}}m.textContent="";k=0;while(e=n[k++]){if(d&&fb.inArray(e,d)!==-1)continue;i=fb.contains(e.ownerDocument,e);f=q(m.appendChild(e),"script");i&&o(f);if(c){j=0;while(e=f[j++])Lb.test(e.type||"")&&c.push(e)}}return m},cleanData:function(a){var b,c,d,e=a.length,f=0,g=fb.event.special;for(;f<e;f++){c=a[f];if(fb.acceptData(c)){b=qb.access(c);if(b)for(d in b.events)g[d]?fb.event.remove(c,d):fb.removeEvent(c,d,b.handle)}pb.discard(c);qb.discard(c)}},_evalUrl:function(a){return fb.ajax({url:a,type:"GET",dataType:"text",async:!1,global:!1,success:fb.globalEval})}});fb.fn.extend({wrapAll:function(a){var b;if(fb.isFunction(a))return this.each(function(b){fb(this).wrapAll(a.call(this,b))});if(this[0]){b=fb(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]);b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)}return this},wrapInner:function(a){return fb.isFunction(a)?this.each(function(b){fb(this).wrapInner(a.call(this,b))}):this.each(function(){var b=fb(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=fb.isFunction(a);return this.each(function(c){fb(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){fb.nodeName(this,"body")||fb(this).replaceWith(this.childNodes)
}).end()}});var Pb,Qb,Rb=/^(none|table(?!-c[ea]).+)/,Sb=/^margin/,Tb=new RegExp("^("+gb+")(.*)$","i"),Ub=new RegExp("^("+gb+")(?!px)[a-z%]+$","i"),Vb=new RegExp("^([+-])=("+gb+")","i"),Wb={BODY:"block"},Xb={position:"absolute",visibility:"hidden",display:"block"},Yb={letterSpacing:0,fontWeight:400},Zb=["Top","Right","Bottom","Left"],$b=["Webkit","O","Moz","ms"];fb.fn.extend({css:function(a,c){return fb.access(this,function(a,c,d){var e,f,g={},h=0;if(fb.isArray(c)){e=u(a);f=c.length;for(;h<f;h++)g[c[h]]=fb.css(a,c[h],!1,e);return g}return d!==b?fb.style(a,c,d):fb.css(a,c)},a,c,arguments.length>1)},show:function(){return v(this,!0)},hide:function(){return v(this)},toggle:function(a){var b=typeof a=="boolean";return this.each(function(){(b?a:t(this))?fb(this).show():fb(this).hide()})}});fb.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Pb(a,"opacity");return c===""?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,c,d,e){if(!a||a.nodeType===3||a.nodeType===8||!a.style)return;var f,g,h,i=fb.camelCase(c),j=a.style;c=fb.cssProps[i]||(fb.cssProps[i]=s(j,i));h=fb.cssHooks[c]||fb.cssHooks[i];if(d===b)return h&&"get"in h&&(f=h.get(a,!1,e))!==b?f:j[c];g=typeof d;if(g==="string"&&(f=Vb.exec(d))){d=(f[1]+1)*f[2]+parseFloat(fb.css(a,c));g="number"}if(d==null||g==="number"&&isNaN(d))return;g==="number"&&!fb.cssNumber[i]&&(d+="px");!fb.support.clearCloneStyle&&d===""&&c.indexOf("background")===0&&(j[c]="inherit");if(!h||!("set"in h)||(d=h.set(a,d,e))!==b)j[c]=d},css:function(a,c,d,e){var f,g,h,i=fb.camelCase(c);c=fb.cssProps[i]||(fb.cssProps[i]=s(a.style,i));h=fb.cssHooks[c]||fb.cssHooks[i];h&&"get"in h&&(f=h.get(a,!0,d));f===b&&(f=Pb(a,c,e));f==="normal"&&c in Yb&&(f=Yb[c]);if(d===""||d){g=parseFloat(f);return d===!0||fb.isNumeric(g)?g||0:f}return f}});Pb=function(a,c,d){var e,f,g,h=d||u(a),i=h?h.getPropertyValue(c)||h[c]:b,j=a.style;if(h){i===""&&!fb.contains(a.ownerDocument,a)&&(i=fb.style(a,c));if(Ub.test(i)&&Sb.test(c)){e=j.width;f=j.minWidth;g=j.maxWidth;j.minWidth=j.maxWidth=j.width=i;i=h.width;j.width=e;j.minWidth=f;j.maxWidth=g}}return i};fb.each(["height","width"],function(a,b){fb.cssHooks[b]={get:function(a,c,d){if(c)return a.offsetWidth===0&&Rb.test(fb.css(a,"display"))?fb.swap(a,Xb,function(){return y(a,b,d)}):y(a,b,d)},set:function(a,c,d){var e=d&&u(a);return w(a,c,d?x(a,b,d,fb.support.boxSizing&&fb.css(a,"boxSizing",!1,e)==="border-box",e):0)}}});fb(function(){fb.support.reliableMarginRight||(fb.cssHooks.marginRight={get:function(a,b){if(b)return fb.swap(a,{display:"inline-block"},Pb,[a,"marginRight"])}});!fb.support.pixelPosition&&fb.fn.position&&fb.each(["top","left"],function(a,b){fb.cssHooks[b]={get:function(a,c){if(c){c=Pb(a,b);return Ub.test(c)?fb(a).position()[b]+"px":c}}}})});if(fb.expr&&fb.expr.filters){fb.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0};fb.expr.filters.visible=function(a){return!fb.expr.filters.hidden(a)}}fb.each({margin:"",padding:"",border:"Width"},function(a,b){fb.cssHooks[a+b]={expand:function(c){var d=0,e={},f=typeof c=="string"?c.split(" "):[c];for(;d<4;d++)e[a+Zb[d]+b]=f[d]||f[d-2]||f[0];return e}};Sb.test(a)||(fb.cssHooks[a+b].set=w)});var _b=/%20/g,ac=/\[\]$/,bc=/\r?\n/g,cc=/^(?:submit|button|image|reset|file)$/i,dc=/^(?:input|select|textarea|keygen)/i;fb.fn.extend({serialize:function(){return fb.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=fb.prop(this,"elements");return a?fb.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!fb(this).is(":disabled")&&dc.test(this.nodeName)&&!cc.test(a)&&(this.checked||!Jb.test(a))}).map(function(a,b){var c=fb(this).val();return c==null?null:fb.isArray(c)?fb.map(c,function(a){return{name:b.name,value:a.replace(bc,"\r\n")}}):{name:b.name,value:c.replace(bc,"\r\n")}}).get()}});fb.param=function(a,c){var d,e=[],f=function(a,b){b=fb.isFunction(b)?b():b==null?"":b;e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};c===b&&(c=fb.ajaxSettings&&fb.ajaxSettings.traditional);if(fb.isArray(a)||a.jquery&&!fb.isPlainObject(a))fb.each(a,function(){f(this.name,this.value)});else for(d in a)B(d,a[d],c,f);return e.join("&").replace(_b,"+")};fb.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){fb.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}});fb.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return arguments.length===1?this.off(a,"**"):this.off(b,a||"**",c)}});var ec,fc,gc=fb.now(),hc=/\?/,ic=/#.*$/,jc=/([?&])_=[^&]*/,kc=/^(.*?):[ \t]*([^\r\n]*)$/gm,lc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,mc=/^(?:GET|HEAD)$/,nc=/^\/\//,oc=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,pc=fb.fn.load,qc={},rc={},sc="*/".concat("*");try{fc=S.href}catch(tc){fc=T.createElement("a");fc.href="";fc=fc.href}ec=oc.exec(fc.toLowerCase())||[];fb.fn.load=function(a,c,d){if(typeof a!="string"&&pc)return pc.apply(this,arguments);var e,f,g,h=this,i=a.indexOf(" ");if(i>=0){e=a.slice(i);a=a.slice(0,i)}if(fb.isFunction(c)){d=c;c=b}else c&&typeof c=="object"&&(f="POST");h.length>0&&fb.ajax({url:a,type:f,dataType:"html",data:c}).done(function(a){g=arguments;h.html(e?fb("<div>").append(fb.parseHTML(a)).find(e):a)}).complete(d&&function(a,b){h.each(d,g||[a.responseText,b,a])});return this};fb.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){fb.fn[b]=function(a){return this.on(b,a)}});fb.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:fc,type:"GET",isLocal:lc.test(ec[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":sc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":fb.parseJSON,"text xml":fb.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?E(E(a,fb.ajaxSettings),b):E(fb.ajaxSettings,a)},ajaxPrefilter:C(qc),ajaxTransport:C(rc),ajax:function(a,c){function d(a,c,d,h){var j,l,s,t,v,x=c;if(u===2)return;u=2;i&&clearTimeout(i);e=b;g=h||"";w.readyState=a>0?4:0;j=a>=200&&a<300||a===304;d&&(t=F(m,w,d));t=G(m,t,w,j);if(j){if(m.ifModified){v=w.getResponseHeader("Last-Modified");v&&(fb.lastModified[f]=v);v=w.getResponseHeader("etag");v&&(fb.etag[f]=v)}if(a===204)x="nocontent";else if(a===304)x="notmodified";else{x=t.state;l=t.data;s=t.error;j=!s}}else{s=x;if(a||!x){x="error";a<0&&(a=0)}}w.status=a;w.statusText=(c||x)+"";j?p.resolveWith(n,[l,x,w]):p.rejectWith(n,[w,x,s]);w.statusCode(r);r=b;k&&o.trigger(j?"ajaxSuccess":"ajaxError",[w,m,j?l:s]);q.fireWith(n,[w,x]);if(k){o.trigger("ajaxComplete",[w,m]);--fb.active||fb.event.trigger("ajaxStop")}}if(typeof a=="object"){c=a;a=b}c=c||{};var e,f,g,h,i,j,k,l,m=fb.ajaxSetup({},c),n=m.context||m,o=m.context&&(n.nodeType||n.jquery)?fb(n):fb.event,p=fb.Deferred(),q=fb.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(u===2){if(!h){h={};while(b=kc.exec(g))h[b[1].toLowerCase()]=b[2]}b=h[a.toLowerCase()]}return b==null?null:b},getAllResponseHeaders:function(){return u===2?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();if(!u){a=t[c]=t[c]||a;s[a]=b}return this},overrideMimeType:function(a){u||(m.mimeType=a);return this},statusCode:function(a){var b;if(a)if(u<2)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){var b=a||v;e&&e.abort(b);d(0,b);return this}};p.promise(w).complete=q.add;w.success=w.done;w.error=w.fail;m.url=((a||m.url||fc)+"").replace(ic,"").replace(nc,ec[1]+"//");m.type=c.method||c.type||m.method||m.type;m.dataTypes=fb.trim(m.dataType||"*").toLowerCase().match(hb)||[""];if(m.crossDomain==null){j=oc.exec(m.url.toLowerCase());m.crossDomain=!(!j||j[1]===ec[1]&&j[2]===ec[2]&&(j[3]||(j[1]==="http:"?"80":"443"))===(ec[3]||(ec[1]==="http:"?"80":"443")))}m.data&&m.processData&&typeof m.data!="string"&&(m.data=fb.param(m.data,m.traditional));D(qc,m,c,w);if(u===2)return w;k=m.global;k&&fb.active++===0&&fb.event.trigger("ajaxStart");m.type=m.type.toUpperCase();m.hasContent=!mc.test(m.type);f=m.url;if(!m.hasContent){if(m.data){f=m.url+=(hc.test(f)?"&":"?")+m.data;delete m.data}m.cache===!1&&(m.url=jc.test(f)?f.replace(jc,"$1_="+gc++):f+(hc.test(f)?"&":"?")+"_="+gc++)}if(m.ifModified){fb.lastModified[f]&&w.setRequestHeader("If-Modified-Since",fb.lastModified[f]);fb.etag[f]&&w.setRequestHeader("If-None-Match",fb.etag[f])}(m.data&&m.hasContent&&m.contentType!==!1||c.contentType)&&w.setRequestHeader("Content-Type",m.contentType);w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+(m.dataTypes[0]!=="*"?", "+sc+"; q=0.01":""):m.accepts["*"]);for(l in m.headers)w.setRequestHeader(l,m.headers[l]);if(!m.beforeSend||m.beforeSend.call(n,w,m)!==!1&&u!==2){v="abort";for(l in{success:1,error:1,complete:1})w[l](m[l]);e=D(rc,m,c,w);if(!e)d(-1,"No Transport");else{w.readyState=1;k&&o.trigger("ajaxSend",[w,m]);m.async&&m.timeout>0&&(i=setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1;e.send(s,d)}catch(x){if(!(u<2))throw x;d(-1,x)}}return w}return w.abort()},getJSON:function(a,b,c){return fb.get(a,b,c,"json")},getScript:function(a,c){return fb.get(a,b,c,"script")}});fb.each(["get","post"],function(a,c){fb[c]=function(a,d,e,f){if(fb.isFunction(d)){f=f||e;e=d;d=b}return fb.ajax({url:a,type:c,dataType:f,data:d,success:e})}});fb.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){fb.globalEval(a);return a}}});fb.ajaxPrefilter("script",function(a){a.cache===b&&(a.cache=!1);a.crossDomain&&(a.type="GET")});fb.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=fb("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove();c=null;a&&e(a.type==="error"?404:200,a.type)});T.head.appendChild(b[0])},abort:function(){c&&c()}}}});var uc=[],vc=/(=)\?(?=&|$)|\?\?/;fb.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=uc.pop()||fb.expando+"_"+gc++;this[a]=!0;return a}});fb.ajaxPrefilter("json jsonp",function(c,d,e){var f,g,h,i=c.jsonp!==!1&&(vc.test(c.url)?"url":typeof c.data=="string"&&!(c.contentType||"").indexOf("application/x-www-form-urlencoded")&&vc.test(c.data)&&"data");if(i||c.dataTypes[0]==="jsonp"){f=c.jsonpCallback=fb.isFunction(c.jsonpCallback)?c.jsonpCallback():c.jsonpCallback;i?c[i]=c[i].replace(vc,"$1"+f):c.jsonp!==!1&&(c.url+=(hc.test(c.url)?"&":"?")+c.jsonp+"="+f);c.converters["script json"]=function(){h||fb.error(f+" was not called");return h[0]};c.dataTypes[0]="json";g=a[f];a[f]=function(){h=arguments};e.always(function(){a[f]=g;if(c[f]){c.jsonpCallback=d.jsonpCallback;uc.push(f)}h&&fb.isFunction(g)&&g(h[0]);h=g=b});return"script"}});fb.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var wc=fb.ajaxSettings.xhr(),xc={0:200,1223:204},yc=0,zc={};a.ActiveXObject&&fb(a).on("unload",function(){for(var a in zc)zc[a]();zc=b});fb.support.cors=!!wc&&"withCredentials"in wc;fb.support.ajax=wc=!!wc;fb.ajaxTransport(function(a){var c;if(fb.support.cors||wc&&!a.crossDomain)return{send:function(d,e){var f,g,h=a.xhr();h.open(a.type,a.url,a.async,a.username,a.password);if(a.xhrFields)for(f in a.xhrFields)h[f]=a.xhrFields[f];a.mimeType&&h.overrideMimeType&&h.overrideMimeType(a.mimeType);!a.crossDomain&&!d["X-Requested-With"]&&(d["X-Requested-With"]="XMLHttpRequest");for(f in d)h.setRequestHeader(f,d[f]);c=function(a){return function(){if(c){delete zc[g];c=h.onload=h.onerror=null;a==="abort"?h.abort():a==="error"?e(h.status||404,h.statusText):e(xc[h.status]||h.status,h.statusText,typeof h.responseText=="string"?{text:h.responseText}:b,h.getAllResponseHeaders())}}};h.onload=c();h.onerror=c("error");c=zc[g=yc++]=c("abort");h.send(a.hasContent&&a.data||null)},abort:function(){c&&c()}}});var Ac,Bc,Cc=/^(?:toggle|show|hide)$/,Dc=new RegExp("^(?:([+-])=|)("+gb+")([a-z%]*)$","i"),Ec=/queueHooks$/,Fc=[L],Gc={"*":[function(a,b){var c,d,e=this.createTween(a,b),f=Dc.exec(b),g=e.cur(),h=+g||0,i=1,j=20;if(f){c=+f[2];d=f[3]||(fb.cssNumber[a]?"":"px");if(d!=="px"&&h){h=fb.css(e.elem,a,!0)||c||1;do{i=i||".5";h/=i;fb.style(e.elem,a,h+d)}while(i!==(i=e.cur()/g)&&i!==1&&--j)}e.unit=d;e.start=h;e.end=f[1]?h+(f[1]+1)*c:c}return e}]};fb.Animation=fb.extend(J,{tweener:function(a,b){if(fb.isFunction(a)){b=a;a=["*"]}else a=a.split(" ");var c,d=0,e=a.length;for(;d<e;d++){c=a[d];Gc[c]=Gc[c]||[];Gc[c].unshift(b)}},prefilter:function(a,b){b?Fc.unshift(a):Fc.push(a)}});fb.Tween=M;M.prototype={constructor:M,init:function(a,b,c,d,e,f){this.elem=a;this.prop=c;this.easing=e||"swing";this.options=b;this.start=this.now=this.cur();this.end=d;this.unit=f||(fb.cssNumber[c]?"":"px")},cur:function(){var a=M.propHooks[this.prop];return a&&a.get?a.get(this):M.propHooks._default.get(this)},run:function(a){var b,c=M.propHooks[this.prop];this.options.duration?this.pos=b=fb.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a;this.now=(this.end-this.start)*b+this.start;this.options.step&&this.options.step.call(this.elem,this.now,this);c&&c.set?c.set(this):M.propHooks._default.set(this);return this}};M.prototype.init.prototype=M.prototype;M.propHooks={_default:{get:function(a){var b;if(a.elem[a.prop]==null||!!a.elem.style&&a.elem.style[a.prop]!=null){b=fb.css(a.elem,a.prop,"");return!b||b==="auto"?0:b}return a.elem[a.prop]},set:function(a){fb.fx.step[a.prop]?fb.fx.step[a.prop](a):a.elem.style&&(a.elem.style[fb.cssProps[a.prop]]!=null||fb.cssHooks[a.prop])?fb.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}};M.propHooks.scrollTop=M.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}};fb.each(["toggle","show","hide"],function(a,b){var c=fb.fn[b];fb.fn[b]=function(a,d,e){return a==null||typeof a=="boolean"?c.apply(this,arguments):this.animate(N(b,!0),a,d,e)}});fb.fn.extend({fadeTo:function(a,b,c,d){return this.filter(t).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=fb.isEmptyObject(a),f=fb.speed(b,c,d),g=function(){var b=J(this,fb.extend({},a),f);g.finish=function(){b.stop(!0)};(e||qb.get(this,"finish"))&&b.stop(!0)};g.finish=g;return e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,c,d){var e=function(a){var b=a.stop;delete a.stop;b(d)};if(typeof a!="string"){d=c;c=a;a=b}c&&a!==!1&&this.queue(a||"fx",[]);return this.each(function(){var b=!0,c=a!=null&&a+"queueHooks",f=fb.timers,g=qb.get(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&Ec.test(c)&&e(g[c]);for(c=f.length;c--;)if(f[c].elem===this&&(a==null||f[c].queue===a)){f[c].anim.stop(d);b=!1;f.splice(c,1)}(b||!d)&&fb.dequeue(this,a)})},finish:function(a){a!==!1&&(a=a||"fx");return this.each(function(){var b,c=qb.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=fb.timers,g=d?d.length:0;c.finish=!0;fb.queue(this,a,[]);e&&e.cur&&e.cur.finish&&e.cur.finish.call(this);for(b=f.length;b--;)if(f[b].elem===this&&f[b].queue===a){f[b].anim.stop(!0);f.splice(b,1)}for(b=0;b<g;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}});fb.each({slideDown:N("show"),slideUp:N("hide"),slideToggle:N("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){fb.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}});fb.speed=function(a,b,c){var d=a&&typeof a=="object"?fb.extend({},a):{complete:c||!c&&b||fb.isFunction(a)&&a,duration:a,easing:c&&b||b&&!fb.isFunction(b)&&b};d.duration=fb.fx.off?0:typeof d.duration=="number"?d.duration:d.duration in fb.fx.speeds?fb.fx.speeds[d.duration]:fb.fx.speeds._default;if(d.queue==null||d.queue===!0)d.queue="fx";d.old=d.complete;d.complete=function(){fb.isFunction(d.old)&&d.old.call(this);d.queue&&fb.dequeue(this,d.queue)};return d};fb.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}};fb.timers=[];fb.fx=M.prototype.init;fb.fx.tick=function(){var a,c=fb.timers,d=0;Ac=fb.now();for(;d<c.length;d++){a=c[d];!a()&&c[d]===a&&c.splice(d--,1)}c.length||fb.fx.stop();Ac=b};fb.fx.timer=function(a){a()&&fb.timers.push(a)&&fb.fx.start()};fb.fx.interval=13;fb.fx.start=function(){Bc||(Bc=setInterval(fb.fx.tick,fb.fx.interval))};fb.fx.stop=function(){clearInterval(Bc);Bc=null};fb.fx.speeds={slow:600,fast:200,_default:400};fb.fx.step={};fb.expr&&fb.expr.filters&&(fb.expr.filters.animated=function(a){return fb.grep(fb.timers,function(b){return a===b.elem}).length});fb.fn.offset=function(a){if(arguments.length)return a===b?this:this.each(function(b){fb.offset.setOffset(this,a,b)});var c,d,e=this[0],f={top:0,left:0},g=e&&e.ownerDocument;if(!g)return;c=g.documentElement;if(!fb.contains(c,e))return f;typeof e.getBoundingClientRect!==R&&(f=e.getBoundingClientRect());d=O(g);return{top:f.top+d.pageYOffset-c.clientTop,left:f.left+d.pageXOffset-c.clientLeft}};fb.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=fb.css(a,"position"),l=fb(a),m={};k==="static"&&(a.style.position="relative");h=l.offset();f=fb.css(a,"top");i=fb.css(a,"left");j=(k==="absolute"||k==="fixed")&&(f+i).indexOf("auto")>-1;if(j){d=l.position();g=d.top;e=d.left}else{g=parseFloat(f)||0;e=parseFloat(i)||0}fb.isFunction(b)&&(b=b.call(a,c,h));b.top!=null&&(m.top=b.top-h.top+g);b.left!=null&&(m.left=b.left-h.left+e);"using"in b?b.using.call(a,m):l.css(m)}};fb.fn.extend({position:function(){if(!this[0])return;var a,b,c=this[0],d={top:0,left:0};if(fb.css(c,"position")==="fixed")b=c.getBoundingClientRect();else{a=this.offsetParent();b=this.offset();fb.nodeName(a[0],"html")||(d=a.offset());d.top+=fb.css(a[0],"borderTopWidth",!0);d.left+=fb.css(a[0],"borderLeftWidth",!0)}return{top:b.top-d.top-fb.css(c,"marginTop",!0),left:b.left-d.left-fb.css(c,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||U;while(a&&!fb.nodeName(a,"html")&&fb.css(a,"position")==="static")a=a.offsetParent;return a||U})}});fb.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(c,d){var e="pageYOffset"===d;fb.fn[c]=function(f){return fb.access(this,function(c,f,g){var h=O(c);if(g===b)return h?h[d]:c[f];h?h.scrollTo(e?a.pageXOffset:g,e?g:a.pageYOffset):c[f]=g},c,f,arguments.length,null)}});fb.each({Height:"height",Width:"width"},function(a,c){fb.each({padding:"inner"+a,content:c,"":"outer"+a},function(d,e){fb.fn[e]=function(e,f){var g=arguments.length&&(d||typeof e!="boolean"),h=d||(e===!0||f===!0?"margin":"border");return fb.access(this,function(c,d,e){var f;if(fb.isWindow(c))return c.document.documentElement["client"+a];if(c.nodeType===9){f=c.documentElement;return Math.max(c.body["scroll"+a],f["scroll"+a],c.body["offset"+a],f["offset"+a],f["client"+a])}return e===b?fb.css(c,d,h):fb.style(c,d,e,h)},c,g?e:b,g,null)}})});fb.fn.size=function(){return this.length};fb.fn.andSelf=fb.fn.addBack;typeof module=="object"&&typeof module.exports=="object"?module.exports=fb:typeof define=="function"&&define.amd&&define("jquery",[],function(){return fb});typeof a=="object"&&typeof a.document=="object"&&(a.jQuery=a.$=fb)}(window);!function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{a(jQuery)}}(function(a){var b=/\+/g;function c(a){return a}function d(a){return decodeURIComponent(a.replace(b," "))}function e(a){if(a.indexOf('"')===0){a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\")}try{return f.json?JSON.parse(a):a}catch(b){}}var f=a.cookie=function(b,g,h){if(g!==undefined){h=a.extend({},f.defaults,h);if(typeof h.expires==="number"){var i=h.expires,j=h.expires=new Date;j.setDate(j.getDate()+i)}g=f.json?JSON.stringify(g):String(g);return document.cookie=[f.raw?b:encodeURIComponent(b),"=",f.raw?g:encodeURIComponent(g),h.expires?"; expires="+h.expires.toUTCString():"",h.path?"; path="+h.path:"",h.domain?"; domain="+h.domain:"",h.secure?"; secure":""].join("")}var k=f.raw?c:d;var l=document.cookie.split("; ");var m=b?undefined:{};for(var n=0,o=l.length;n<o;n++){var p=l[n].split("=");var q=k(p.shift());var r=k(p.join("="));if(b&&b===q){m=e(r);break}if(!b){m[q]=e(r)}}return m};f.defaults={};a.removeCookie=function(b,c){if(a.cookie(b)!==undefined){a.cookie(b,"",a.extend({},c,{expires:-1}));return true}return false}});if(window.console===undefined){var noop=function(){};window.console={log:noop,warn:noop,error:noop}}if(!window.getComputedStyle){window.getComputedStyle=function(a,b){this.el=a;this.getPropertyValue=function(b){var c=/(\-([a-z]){1})/g;if(b=="float")b="styleFloat";if(c.test(b)){b=b.replace(c,function(){return arguments[2].toUpperCase()})}return a.currentStyle[b]?a.currentStyle[b]:null};return this}}if(typeof window.getMatchedCSSRules!=="function"){var ELEMENT_RE=/[\w-]+/g,ID_RE=/#[\w-]+/g,CLASS_RE=/\.[\w-]+/g,ATTR_RE=/\[[^\]]+\]/g,PSEUDO_CLASSES_RE=/\:(?!not)[\w-]+(\(.*\))?/g,PSEUDO_ELEMENTS_RE=/\:\:?(after|before|first-letter|first-line|selection)/g;function toArray(a){return[].slice.call(a)}function getSheetRules(a){var b=a.media&&a.media.mediaText;if(a.disabled)return[];if(b&&b.length&&!window.matchMedia(b).matches)return[];return toArray(a.cssRules)}function _find(a,b){var c=a.match(b);return b?b.length:0}function calculateScore(a){var b=[0,0,0],c=a.split(" "),d,e;while(d=c.shift(),typeof d=="string"){e=_find(d,PSEUDO_ELEMENTS_RE);b[2]=e;e&&(d=d.replace(PSEUDO_ELEMENTS_RE,""));e=_find(d,PSEUDO_CLASSES_RE);b[1]=e;e&&(d=d.replace(PSEUDO_CLASSES_RE,""));e=_find(d,ATTR_RE);b[1]+=e;e&&(d=d.replace(ATTR_RE,""));e=_find(d,ID_RE);b[0]=e;e&&(d=d.replace(ID_RE,""));e=_find(d,CLASS_RE);b[1]+=e;e&&(d=d.replace(CLASS_RE,""));b[2]+=_find(d,ELEMENT_RE)}return parseInt(b.join(""),10)}function getSpecificityScore(a,b){var c=b.split(","),d,e,f=0;while(d=c.shift()){if(a.mozMatchesSelector(d)){e=calculateScore(d);f=e>f?e:f}}return f}function sortBySpecificity(a,b){function c(b,c){return getSpecificityScore(a,c.selectorText)-getSpecificityScore(a,b.selectorText)}return b.sort(c)}window.getMatchedCSSRules=function(a){var b,c,d,e,f,g=[];b=toArray(window.document.styleSheets);while(c=b.shift()){e=getSheetRules(c);while(f=e.shift()){if(f.styleSheet){e=getSheetRules(f.styleSheet).concat(e);continue}else if(f.media){e=getSheetRules(f).concat(e);continue}if(a.mozMatchesSelector(f.selectorText)){g.push(f)}}}return sortBySpecificity(a,g)}}window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(function(){a((new Date).getTime())},1e3/60)}}();!function(){function a(a,b,c){c[a]=b[a];if(typeof b[a]==="function"){c[a].__name__=a}}var b=function(){this.events=$({})};b.prototype._extend=function(c,d){if(typeof c==="undefined"){return null}if(c===this._extend){return c}if(typeof d==="undefined"){d=c;c=b.PUBLIC}var e,f,g=this;switch(c){case b.PUBLIC:e=d._public&&d._public.construct?d._public.construct:function(){};break;case b.ABSTRACT:e=function(){if(!b.prototype.__extending__()){}if(d._public.construct){d._public.construct.apply(this,arguments)}};break;case b.SINGLETON:e=function(){if(!b.prototype.__singletonInstantiation__||!b.prototype.__singletonInstantiation__()){throw new Error("Illegal attempt to directly instantiate singleton class. Use getInstance() instead.")}if(d._public&&d._public.construct){d._public.construct.call(this)}};e.getInstance=function(){if(e.__instance__){return e.__instance__}else{b.prototype.__singletonInstantiation__=function(){return true};e.__instance__=new e;b.prototype.__singletonInstantiation__=function(){return false};return e.__instance__}};break}e.__constructor__=function(){return true};b.prototype.__extending__=function(){return true};try{e.prototype=new this}catch(h){console.log("Error providing inheritance. Class constructor has thrown an error:\n"+h.stack+"\nPlease make sure constructors can always run fine with no parameters specified.")}b.prototype.__extending__=function(){return false};e._extend=e.prototype._extend;e.prototype._super=function(){var a=arguments.callee.caller;if(a.__constructor__&&a.__constructor__()){b.prototype.__extending__=function(){return true};g.apply(this,arguments);b.prototype.__extending__=function(){return false}}else if(typeof g.prototype[a.__name__]==="function"){return g.prototype[a.__name__].apply(this,arguments)}else{throw new Error("No super method for "+a.__name__)}};e.prototype.events=$({});for(f in d._public){if(f!=="construct"){a(f,d._public,e.prototype)}}for(f in d._protected){a(f,d._protected,e.prototype)}for(f in d._private){a(f,d._private,e.prototype)}for(f in d._static){a(f,d._static,e)}return e};b._extend=b.prototype._extend;b.PUBLIC=1;b.ABSTRACT=2;b.SINGLETON=3;window.Class=b}();!function(){if(!Array.prototype.indexOf){Array.prototype.indexOf=function(a){"use strict";if(this==null){throw new TypeError}var b=Object(this);var c=b.length>>>0;if(c===0){return-1}var d=0;if(arguments.length>0){d=Number(arguments[1]);if(d!=d){d=0}else if(d!=0&&d!=Infinity&&d!=-Infinity){d=(d>0||-1)*Math.floor(Math.abs(d))}}if(d>=c){return-1}var e=d>=0?d:Math.max(c-Math.abs(d),0);for(;e<c;e++){if(e in b&&b[e]===a){return e}}return-1}}if(!Array.prototype.lastIndexOf){Array.prototype.lastIndexOf=function(a){"use strict";if(this==null){throw new TypeError}var b=Object(this);var c=b.length>>>0;if(c===0){return-1}var d=c;if(arguments.length>1){d=Number(arguments[1]);if(d!=d){d=0}else if(d!=0&&d!=1/0&&d!=-(1/0)){d=(d>0||-1)*Math.floor(Math.abs(d))}}var e=d>=0?Math.min(d,c-1):c-Math.abs(d);for(;e>=0;e--){if(e in b&&b[e]===a){return e}}return-1}}var a=this,b=a.jQuery||a.Zepto,c={},d={},e,f=0,g=[];if(typeof module!=="undefined"&&module.exports){module.exports=c}else{if(b){b.i18n=b.i18n||c}a.i18n=a.i18n||c}var h={lng:undefined,load:"all",preload:[],lowerCaseLng:false,returnObjectTrees:false,fallbackLng:"dev",fallbackNS:[],detectLngQS:"setLng",ns:"translation",fallbackOnNull:true,fallbackToDefaultNS:false,nsseparator:":",keyseparator:".",selectorAttr:"data-i18n",debug:false,resGetPath:"locales/__lng__/__ns__.json",resPostPath:"locales/add/__lng__/__ns__",getAsync:true,postAsync:true,resStore:undefined,useLocalStorage:false,localStorageExpirationTime:7*24*60*60*1e3,dynamicLoad:false,sendMissing:false,sendMissingTo:"fallback",sendType:"POST",interpolationPrefix:"__",interpolationSuffix:"__",reusePrefix:"$t(",reuseSuffix:")",pluralSuffix:"_plural",pluralNotFound:["plural_not_found",Math.random()].join(""),contextNotFound:["context_not_found",Math.random()].join(""),escapeInterpolation:false,setJqueryExt:true,defaultValueFromContent:true,useDataAttrOptions:false,cookieExpirationTime:undefined,useCookie:true,cookieName:"i18next",postProcess:undefined,parseMissingKey:undefined};function i(a,b){if(!b||typeof b==="function"){return a}for(var c in b){a[c]=b[c]}return a}function j(a,b,c){var d,e=0,f=a.length,g=f===undefined||typeof a==="function";if(c){if(g){for(d in a){if(b.apply(a[d],c)===false){break}}}else{for(;e<f;){if(b.apply(a[e++],c)===false){break}}}}else{if(g){for(d in a){if(b.call(a[d],d,a[d])===false){break}}}else{for(;e<f;){if(b.call(a[e],e,a[e++])===false){break}}}}return a}var k={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function l(a){if(typeof a==="string"){return a.replace(/[&<>"'\/]/g,function(a){return k[a]})}else{return a}}function m(a){var b=function(a){if(window.XMLHttpRequest){return a(null,new XMLHttpRequest)}else if(window.ActiveXObject){try{return a(null,new ActiveXObject("Msxml2.XMLHTTP"))}catch(b){return a(null,new ActiveXObject("Microsoft.XMLHTTP"))}}return a(new Error)};var c=function(a){if(typeof a==="string"){return a}var b=[];for(var c in a){if(a.hasOwnProperty(c)){b.push(encodeURIComponent(c)+"="+encodeURIComponent(a[c]))}}return b.join("&")};var d=function(a){a=a.replace(/\r\n/g,"\n");var b="";for(var c=0;c<a.length;c++){var d=a.charCodeAt(c);if(d<128){b+=String.fromCharCode(d)}else if(d>127&&d<2048){b+=String.fromCharCode(d>>6|192);b+=String.fromCharCode(d&63|128)}else{b+=String.fromCharCode(d>>12|224);b+=String.fromCharCode(d>>6&63|128);b+=String.fromCharCode(d&63|128)}}return b};var e=function(a){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a=d(a);var c="",e,f,g,h,i,j,k,l=0;do{e=a.charCodeAt(l++);f=a.charCodeAt(l++);g=a.charCodeAt(l++);h=e>>2;i=(e&3)<<4|f>>4;j=(f&15)<<2|g>>6;k=g&63;if(isNaN(f)){j=k=64}else if(isNaN(g)){k=64}c+=b.charAt(h)+b.charAt(i)+b.charAt(j)+b.charAt(k);e=f=g="";h=i=j=k=""}while(l<a.length);return c};var f=function(){var a=arguments[0];for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c){if(c.hasOwnProperty(d)){a[d]=c[d]}}}return a};var g=function(a,d,e,h){if(typeof e==="function"){h=e;e={}}e.cache=e.cache||false;e.data=e.data||{};e.headers=e.headers||{};e.jsonp=e.jsonp||false;e.async=e.async===undefined?true:e.async;var i=f({accept:"*/*","content-type":"application/x-www-form-urlencoded;charset=UTF-8"},g.headers,e.headers);var j;if(i["content-type"]==="application/json"){j=JSON.stringify(e.data)}else{j=c(e.data)}if(a==="GET"){var k=[];if(j){k.push(j);j=null}if(!e.cache){k.push("_="+(new Date).getTime())}if(e.jsonp){k.push("callback="+e.jsonp);k.push("jsonp="+e.jsonp)}k=k.join("&");if(k.length>1){if(d.indexOf("?")>-1){d+="&"+k}else{d+="?"+k}}if(e.jsonp){var l=document.getElementsByTagName("head")[0];var m=document.createElement("script");m.type="text/javascript";m.src=d;l.appendChild(m);return}}b(function(b,c){if(b)return h(b);c.open(a,d,e.async);for(var f in i){if(i.hasOwnProperty(f)){c.setRequestHeader(f,i[f])}}c.onreadystatechange=function(){if(c.readyState===4){var a=c.responseText||"";if(!h){return}h(c.status,{text:function(){return a},json:function(){return JSON.parse(a)}})}};c.send(j)})};var h={authBasic:function(a,b){g.headers["Authorization"]="Basic "+e(a+":"+b)},connect:function(a,b,c){return g("CONNECT",a,b,c)},del:function(a,b,c){return g("DELETE",a,b,c)},get:function(a,b,c){return g("GET",a,b,c)},head:function(a,b,c){return g("HEAD",a,b,c)},headers:function(a){g.headers=a||{}},isAllowed:function(a,b,c){this.options(a,function(a,d){c(d.text().indexOf(b)!==-1)})},options:function(a,b,c){return g("OPTIONS",a,b,c)},patch:function(a,b,c){return g("PATCH",a,b,c)},post:function(a,b,c){return g("POST",a,b,c)},put:function(a,b,c){return g("PUT",a,b,c)},trace:function(a,b,c){return g("TRACE",a,b,c)}};var i=a.type?a.type.toLowerCase():"get";h[i](a.url,a,function(b,c){if(b===200){a.success(c.json(),b,null)}else{a.error(c.text(),b,null)}})}var n={create:function(a,b,c){var d;if(c){var e=new Date;e.setTime(e.getTime()+c*60*1e3);d="; expires="+e.toGMTString()}else d="";document.cookie=a+"="+b+d+"; path=/"},read:function(a){var b=a+"=";var c=document.cookie.split(";");for(var d=0;d<c.length;d++){var e=c[d];while(e.charAt(0)==" ")e=e.substring(1,e.length);if(e.indexOf(b)===0)return e.substring(b.length,e.length)}return null},remove:function(a){this.create(a,"",-1)}};var o={create:function(a,b,c){},read:function(a){return null},remove:function(a){}};var p={extend:b?b.extend:i,each:b?b.each:j,ajax:b?b.ajax:m,cookie:typeof document!=="undefined"?n:o,detectLanguage:I,escape:l,log:function(a){if(h.debug&&typeof console!=="undefined")console.log(a)},toLanguages:function(a){var b=[];if(typeof a==="string"&&a.indexOf("-")>-1){var c=a.split("-");a=h.lowerCaseLng?c[0].toLowerCase()+"-"+c[1].toLowerCase():c[0].toLowerCase()+"-"+c[1].toUpperCase();
if(h.load!=="unspecific")b.push(a);if(h.load!=="current")b.push(c[0])}else{b.push(a)}if(b.indexOf(h.fallbackLng)===-1&&h.fallbackLng)b.push(h.fallbackLng);return b},regexEscape:function(a){return a.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}};function q(a,f){if(typeof a==="function"){f=a;a={}}a=a||{};p.extend(h,a);if(typeof h.ns=="string"){h.ns={namespaces:[h.ns],defaultNs:h.ns}}if(typeof h.fallbackNS=="string"){h.fallbackNS=[h.fallbackNS]}h.interpolationPrefixEscaped=p.regexEscape(h.interpolationPrefix);h.interpolationSuffixEscaped=p.regexEscape(h.interpolationSuffix);if(!h.lng)h.lng=p.detectLanguage();if(h.lng){if(h.useCookie)p.cookie.create(h.cookieName,h.lng,h.cookieExpirationTime)}else{h.lng=h.fallbackLng;if(h.useCookie)p.cookie.remove(h.cookieName)}g=p.toLanguages(h.lng);e=g[0];p.log("currentLng set to: "+e);K.setCurrentLng(e);if(b&&h.setJqueryExt)y();var i;if(b&&b.Deferred){i=b.Deferred()}if(h.resStore){d=h.resStore;if(f)f(E);if(i)i.resolve();if(i)return i.promise();return}var j=p.toLanguages(h.lng);if(typeof h.preload==="string")h.preload=[h.preload];for(var k=0,l=h.preload.length;k<l;k++){var m=p.toLanguages(h.preload[k]);for(var n=0,o=m.length;n<o;n++){if(j.indexOf(m[n])<0){j.push(m[n])}}}c.sync.load(j,h,function(a,b){d=b;if(f)f(E);if(i)i.resolve()});if(i)return i.promise()}function r(a,b){if(typeof a==="string")a=[a];for(var c=0,d=a.length;c<d;c++){if(h.preload.indexOf(a[c])<0){h.preload.push(a[c])}}return q(b)}function s(a,b,c){if(typeof b!=="string"){c=b;b=h.ns.defaultNs}else if(h.ns.namespaces.indexOf(b)<0){h.ns.namespaces.push(b)}d[a]=d[a]||{};d[a][b]=d[a][b]||{};p.extend(d[a][b],c)}function t(a){h.ns.defaultNs=a}function u(a,b){v([a],b)}function v(a,b){var e={dynamicLoad:h.dynamicLoad,resGetPath:h.resGetPath,getAsync:h.getAsync,customLoad:h.customLoad,ns:{namespaces:a,defaultNs:""}};var f=p.toLanguages(h.lng);if(typeof h.preload==="string")h.preload=[h.preload];for(var g=0,i=h.preload.length;g<i;g++){var j=p.toLanguages(h.preload[g]);for(var k=0,l=j.length;k<l;k++){if(f.indexOf(j[k])<0){f.push(j[k])}}}var m=[];for(var n=0,o=f.length;n<o;n++){var q=false;var r=d[f[n]];if(r){for(var s=0,t=a.length;s<t;s++){if(!r[a[s]])q=true}}else{q=true}if(q)m.push(f[n])}if(m.length){c.sync._fetch(m,e,function(e,f){var g=a.length*m.length;p.each(a,function(a,e){if(h.ns.namespaces.indexOf(e)<0){h.ns.namespaces.push(e)}p.each(m,function(a,i){d[i]=d[i]||{};d[i][e]=f[i][e];g--;if(g===0&&b){if(h.useLocalStorage)c.sync._storeLocal(d);b()}})})})}else{if(b)b()}}function w(a,b){return q({lng:a},b)}function x(){return e}function y(){b.t=b.t||E;function a(a,c,d){if(c.length===0)return;var e="text";if(c.indexOf("[")===0){var f=c.split("]");c=f[1];e=f[0].substr(1,f[0].length-1)}if(c.indexOf(";")===c.length-1){c=c.substr(0,c.length-2)}var g;if(e==="html"){g=h.defaultValueFromContent?b.extend({defaultValue:a.html()},d):d;a.html(b.t(c,g))}else if(e==="text"){g=h.defaultValueFromContent?b.extend({defaultValue:a.text()},d):d;a.text(b.t(c,g))}else{g=h.defaultValueFromContent?b.extend({defaultValue:a.attr(e)},d):d;a.attr(e,b.t(c,g))}}function c(c,d){var e=c.attr(h.selectorAttr);if(!e)return;var f=c,g=c.data("i18n-target");if(g){f=c.find(g)||c}if(!d&&h.useDataAttrOptions===true){d=c.data("i18n-options")}d=d||{};if(e.indexOf(";")>=0){var i=e.split(";");b.each(i,function(b,c){if(c!=="")a(f,c,d)})}else{a(f,e,d)}if(h.useDataAttrOptions===true)c.data("i18n-options",d)}b.fn.i18n=function(a){return this.each(function(){c(b(this),a);var d=b(this).find("["+h.selectorAttr+"]");d.each(function(){c(b(this),a)})})}}function z(a,b,c,d){if(!a)return a;d=d||b;if(a.indexOf(d.interpolationPrefix||h.interpolationPrefix)<0)return a;var e=d.interpolationPrefix?p.regexEscape(d.interpolationPrefix):h.interpolationPrefixEscaped,f=d.interpolationSuffix?p.regexEscape(d.interpolationSuffix):h.interpolationSuffixEscaped,g="HTML"+f;p.each(b,function(b,i){var j=c?c+h.keyseparator+b:b;if(typeof i==="object"&&i!==null){a=z(a,i,j,d)}else{if(d.escapeInterpolation||h.escapeInterpolation){a=a.replace(new RegExp([e,j,g].join(""),"g"),i);a=a.replace(new RegExp([e,j,f].join(""),"g"),p.escape(i))}else{a=a.replace(new RegExp([e,j,f].join(""),"g"),i)}}});return a}p.applyReplacement=z;function A(a,b){var c=",";var d="{";var e="}";var g=p.extend({},b);delete g.postProcess;while(a.indexOf(h.reusePrefix)!=-1){f++;if(f>h.maxRecursion){break}var i=a.lastIndexOf(h.reusePrefix);var j=a.indexOf(h.reuseSuffix,i)+h.reuseSuffix.length;var k=a.substring(i,j);var l=k.replace(h.reusePrefix,"").replace(h.reuseSuffix,"");if(l.indexOf(c)!=-1){var m=l.indexOf(c);if(l.indexOf(d,m)!=-1&&l.indexOf(e,m)!=-1){var n=l.indexOf(d,m);var o=l.indexOf(e,n)+e.length;try{g=p.extend(g,JSON.parse(l.substring(n,o)));l=l.substring(0,m)}catch(q){}}}var r=G(l,g);a=a.replace(k,r)}return a}function B(a){return a.context&&typeof a.context=="string"}function C(a){return a.count!==undefined&&typeof a.count!="string"&&a.count!==1}function D(a,b){b=b||{};var c=b.defaultValue||a,d=H(a,b);return d!==undefined||d===c}function E(a,b){f=0;return G.apply(null,arguments)}function F(){var a=[];for(var b=1;b<arguments.length;b++){a.push(arguments[b])}return{postProcess:"sprintf",sprintf:a}}function G(a,b){if(typeof b=="string"){b=F.apply(null,arguments)}else{b=b||{}}var c=b.defaultValue||a,d=H(a,b),e=b.lng?p.toLanguages(b.lng):g,f=b.ns||h.ns.defaultNs,i;if(a.indexOf(h.nsseparator)>-1){i=a.split(h.nsseparator);f=i[0];a=i[1]}if(d===undefined&&h.sendMissing){if(b.lng){J.postMissing(e[0],f,a,c,e)}else{J.postMissing(h.lng,f,a,c,e)}}var j=b.postProcess||h.postProcess;if(d!==undefined&&j){if(L[j]){d=L[j](d,a,b)}}var k=c;if(c.indexOf(h.nsseparator)>-1){i=c.split(h.nsseparator);k=i[1]}if(k===a&&h.parseMissingKey){c=h.parseMissingKey(c)}if(d===undefined){c=z(c,b);c=A(c,b);if(j&&L[j]){var l=b.defaultValue||a;d=L[j](l,a,b)}}return d!==undefined?d:c}function H(a,b){b=b||{};var e,f,i=b.defaultValue||a,j=g;if(!d){return i}if(b.lng){j=p.toLanguages(b.lng);if(!d[j[0]]){var k=h.getAsync;h.getAsync=false;c.sync.load(j,h,function(a,b){p.extend(d,b);h.getAsync=k})}}var l=b.ns||h.ns.defaultNs;if(a.indexOf(h.nsseparator)>-1){var m=a.split(h.nsseparator);l=m[0];a=m[1]}if(B(b)){e=p.extend({},b);delete e.context;e.defaultValue=h.contextNotFound;var n=l+h.nsseparator+a+"_"+b.context;f=E(n,e);if(f!=h.contextNotFound){return z(f,{context:b.context})}}if(C(b)){e=p.extend({},b);delete e.count;e.defaultValue=h.pluralNotFound;var o=l+h.nsseparator+a+h.pluralSuffix;var q=K.get(j[0],b.count);if(q>=0){o=o+"_"+q}else if(q===1){o=l+h.nsseparator+a}f=E(o,e);if(f!=h.pluralNotFound){return z(f,{count:b.count,interpolationPrefix:b.interpolationPrefix,interpolationSuffix:b.interpolationSuffix})}}var r;var s=a.split(h.keyseparator);for(var t=0,u=j.length;t<u;t++){if(r!==undefined)break;var v=j[t];var w=0;var x=d[v]&&d[v][l];while(s[w]){x=x&&x[s[w]];w++}if(x!==undefined){if(typeof x==="string"){x=z(x,b);x=A(x,b)}else if(Object.prototype.toString.apply(x)==="[object Array]"&&!h.returnObjectTrees&&!b.returnObjectTrees){x=x.join("\n");x=z(x,b);x=A(x,b)}else if(x===null&&h.fallbackOnNull===true){x=undefined}else if(x!==null){if(!h.returnObjectTrees&&!b.returnObjectTrees){x="key '"+l+":"+a+" ("+v+")' "+"returned a object instead of string.";p.log(x)}else{var y={};for(var D in x){y[D]=G(l+h.nsseparator+a+h.keyseparator+D,b)}x=y}}r=x}}if(r===undefined&&!b.isFallbackLookup&&(h.fallbackToDefaultNS===true||h.fallbackNS&&h.fallbackNS.length>0)){b.isFallbackLookup=true;if(h.fallbackNS.length){for(var F=0,I=h.fallbackNS.length;F<I;F++){r=H(h.fallbackNS[F]+h.nsseparator+a,b);if(r){var J=r.indexOf(h.nsseparator)>-1?r.split(h.nsseparator)[1]:r,L=i.indexOf(h.nsseparator)>-1?i.split(h.nsseparator)[1]:i;if(J!==L)break}}}else{r=H(a,b)}}return r}function I(){var a;var b=[];if(typeof window!=="undefined"){!function(){var a=window.location.search.substring(1);var c=a.split("&");for(var d=0;d<c.length;d++){var e=c[d].indexOf("=");if(e>0){var f=c[d].substring(0,e);var g=c[d].substring(e+1);b[f]=g}}}();if(b[h.detectLngQS]){a=b[h.detectLngQS]}}if(!a&&typeof document!=="undefined"&&h.useCookie){var c=p.cookie.read(h.cookieName);if(c)a=c}if(!a&&typeof navigator!=="undefined"){a=navigator.language?navigator.language:navigator.userLanguage}return a}var J={load:function(a,b,c){if(b.useLocalStorage){J._loadLocal(a,b,function(d,e){var f=[];for(var g=0,h=a.length;g<h;g++){if(!e[a[g]])f.push(a[g])}if(f.length>0){J._fetch(f,b,function(a,b){p.extend(e,b);J._storeLocal(b);c(null,e)})}else{c(null,e)}})}else{J._fetch(a,b,function(a,b){c(null,b)})}},_loadLocal:function(a,b,c){var d={},e=(new Date).getTime();if(window.localStorage){var f=a.length;p.each(a,function(a,g){var h=window.localStorage.getItem("res_"+g);if(h){h=JSON.parse(h);if(h.i18nStamp&&h.i18nStamp+b.localStorageExpirationTime>e){d[g]=h}}f--;if(f===0)c(null,d)})}},_storeLocal:function(a){if(window.localStorage){for(var b in a){a[b].i18nStamp=(new Date).getTime();window.localStorage.setItem("res_"+b,JSON.stringify(a[b]))}}return},_fetch:function(a,b,c){var d=b.ns,e={};if(!b.dynamicLoad){var f=d.namespaces.length*a.length,g;p.each(d.namespaces,function(d,h){p.each(a,function(a,d){var i=function(a,b){if(a){g=g||[];g.push(a)}e[d]=e[d]||{};e[d][h]=b;f--;if(f===0)c(g,e)};if(typeof b.customLoad=="function"){b.customLoad(d,h,b,i)}else{J._fetchOne(d,h,b,i)}})})}else{var h=function(a,b){c(null,b)};if(typeof b.customLoad=="function"){b.customLoad(a,d.namespaces,b,h)}else{var i=z(b.resGetPath,{lng:a.join("+"),ns:d.namespaces.join("+")});p.ajax({url:i,success:function(a,b,c){p.log("loaded: "+i);h(null,a)},error:function(a,b,c){p.log("failed loading: "+i);h("failed loading resource.json error: "+c)},dataType:"json",async:b.getAsync})}}},_fetchOne:function(a,b,c,d){var e=z(c.resGetPath,{lng:a,ns:b});p.ajax({url:e,success:function(a,b,c){p.log("loaded: "+e);d(null,a)},error:function(a,b,c){p.log("failed loading: "+e);d(c,{})},dataType:"json",async:c.getAsync})},postMissing:function(a,b,c,e,f){var g={};g[c]=e;var i=[];if(h.sendMissingTo==="fallback"&&h.fallbackLng!==false){i.push({lng:h.fallbackLng,url:z(h.resPostPath,{lng:h.fallbackLng,ns:b})})}else if(h.sendMissingTo==="current"||h.sendMissingTo==="fallback"&&h.fallbackLng===false){i.push({lng:a,url:z(h.resPostPath,{lng:a,ns:b})})}else if(h.sendMissingTo==="all"){for(var j=0,k=f.length;j<k;j++){i.push({lng:f[j],url:z(h.resPostPath,{lng:f[j],ns:b})})}}for(var l=0,m=i.length;l<m;l++){var n=i[l];p.ajax({url:n.url,type:h.sendType,data:g,success:function(a,f,g){p.log("posted missing key '"+c+"' to: "+n.url);var h=c.split(".");var i=0;var j=d[n.lng][b];while(h[i]){if(i===h.length-1){j=j[h[i]]=e}else{j=j[h[i]]=j[h[i]]||{}}i++}},error:function(a,b,d){p.log("failed posting missing key '"+c+"' to: "+n.url)},dataType:"json",async:h.postAsync})}}};var K={rules:{ach:{name:"Acholi",numbers:[1,2],plurals:function(a){return Number(a>1)}},af:{name:"Afrikaans",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ak:{name:"Akan",numbers:[1,2],plurals:function(a){return Number(a>1)}},am:{name:"Amharic",numbers:[1,2],plurals:function(a){return Number(a>1)}},an:{name:"Aragonese",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ar:{name:"Arabic",numbers:[0,1,2,3,11,100],plurals:function(a){return Number(a===0?0:a==1?1:a==2?2:a%100>=3&&a%100<=10?3:a%100>=11?4:5)}},arn:{name:"Mapudungun",numbers:[1,2],plurals:function(a){return Number(a>1)}},ast:{name:"Asturian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ay:{name:"Aymará",numbers:[1],plurals:function(a){return 0}},az:{name:"Azerbaijani",numbers:[1,2],plurals:function(a){return Number(a!=1)}},be:{name:"Belarusian",numbers:[1,2,5],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2)}},bg:{name:"Bulgarian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},bn:{name:"Bengali",numbers:[1,2],plurals:function(a){return Number(a!=1)}},bo:{name:"Tibetan",numbers:[1],plurals:function(a){return 0}},br:{name:"Breton",numbers:[1,2],plurals:function(a){return Number(a>1)}},bs:{name:"Bosnian",numbers:[1,2,5],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2)}},ca:{name:"Catalan",numbers:[1,2],plurals:function(a){return Number(a!=1)}},cgg:{name:"Chiga",numbers:[1],plurals:function(a){return 0}},cs:{name:"Czech",numbers:[1,2,5],plurals:function(a){return Number(a==1?0:a>=2&&a<=4?1:2)}},csb:{name:"Kashubian",numbers:[1,2,5],plurals:function(a){return Number(a==1?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2)}},cy:{name:"Welsh",numbers:[1,2,3,8],plurals:function(a){return Number(a==1?0:a==2?1:a!=8&&a!=11?2:3)}},da:{name:"Danish",numbers:[1,2],plurals:function(a){return Number(a!=1)}},de:{name:"German",numbers:[1,2],plurals:function(a){return Number(a!=1)}},dz:{name:"Dzongkha",numbers:[1],plurals:function(a){return 0}},el:{name:"Greek",numbers:[1,2],plurals:function(a){return Number(a!=1)}},en:{name:"English",numbers:[1,2],plurals:function(a){return Number(a!=1)}},eo:{name:"Esperanto",numbers:[1,2],plurals:function(a){return Number(a!=1)}},es:{name:"Spanish",numbers:[1,2],plurals:function(a){return Number(a!=1)}},es_ar:{name:"Argentinean Spanish",numbers:[1,2],plurals:function(a){return Number(a!=1)}},et:{name:"Estonian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},eu:{name:"Basque",numbers:[1,2],plurals:function(a){return Number(a!=1)}},fa:{name:"Persian",numbers:[1],plurals:function(a){return 0}},fi:{name:"Finnish",numbers:[1,2],plurals:function(a){return Number(a!=1)}},fil:{name:"Filipino",numbers:[1,2],plurals:function(a){return Number(a>1)}},fo:{name:"Faroese",numbers:[1,2],plurals:function(a){return Number(a!=1)}},fr:{name:"French",numbers:[1,2],plurals:function(a){return Number(a>1)}},fur:{name:"Friulian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},fy:{name:"Frisian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ga:{name:"Irish",numbers:[1,2,3,7,11],plurals:function(a){return Number(a==1?0:a==2?1:a<7?2:a<11?3:4)}},gd:{name:"Scottish Gaelic",numbers:[1,2,3,20],plurals:function(a){return Number(a==1||a==11?0:a==2||a==12?1:a>2&&a<20?2:3)}},gl:{name:"Galician",numbers:[1,2],plurals:function(a){return Number(a!=1)}},gu:{name:"Gujarati",numbers:[1,2],plurals:function(a){return Number(a!=1)}},gun:{name:"Gun",numbers:[1,2],plurals:function(a){return Number(a>1)}},ha:{name:"Hausa",numbers:[1,2],plurals:function(a){return Number(a!=1)}},he:{name:"Hebrew",numbers:[1,2],plurals:function(a){return Number(a!=1)}},hi:{name:"Hindi",numbers:[1,2],plurals:function(a){return Number(a!=1)}},hr:{name:"Croatian",numbers:[1,2,5],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2)}},hu:{name:"Hungarian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},hy:{name:"Armenian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ia:{name:"Interlingua",numbers:[1,2],plurals:function(a){return Number(a!=1)}},id:{name:"Indonesian",numbers:[1],plurals:function(a){return 0}},is:{name:"Icelandic",numbers:[1,2],plurals:function(a){return Number(a%10!=1||a%100==11)}},it:{name:"Italian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ja:{name:"Japanese",numbers:[1],plurals:function(a){return 0}},jbo:{name:"Lojban",numbers:[1],plurals:function(a){return 0}},jv:{name:"Javanese",numbers:[0,1],plurals:function(a){return Number(a!==0)}},ka:{name:"Georgian",numbers:[1],plurals:function(a){return 0}},kk:{name:"Kazakh",numbers:[1],plurals:function(a){return 0}},km:{name:"Khmer",numbers:[1],plurals:function(a){return 0}},kn:{name:"Kannada",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ko:{name:"Korean",numbers:[1],plurals:function(a){return 0}},ku:{name:"Kurdish",numbers:[1,2],plurals:function(a){return Number(a!=1)}},kw:{name:"Cornish",numbers:[1,2,3,4],plurals:function(a){return Number(a==1?0:a==2?1:a==3?2:3)}},ky:{name:"Kyrgyz",numbers:[1],plurals:function(a){return 0}},lb:{name:"Letzeburgesch",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ln:{name:"Lingala",numbers:[1,2],plurals:function(a){return Number(a>1)}},lo:{name:"Lao",numbers:[1],plurals:function(a){return 0}},lt:{name:"Lithuanian",numbers:[1,2,10],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&(a%100<10||a%100>=20)?1:2)}},lv:{name:"Latvian",numbers:[0,1,2],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a!==0?1:2)}},mai:{name:"Maithili",numbers:[1,2],plurals:function(a){return Number(a!=1)}},mfe:{name:"Mauritian Creole",numbers:[1,2],plurals:function(a){return Number(a>1)}},mg:{name:"Malagasy",numbers:[1,2],plurals:function(a){return Number(a>1)}},mi:{name:"Maori",numbers:[1,2],plurals:function(a){return Number(a>1)}},mk:{name:"Macedonian",numbers:[1,2],plurals:function(a){return Number(a==1||a%10==1?0:1)}},ml:{name:"Malayalam",numbers:[1,2],plurals:function(a){return Number(a!=1)}},mn:{name:"Mongolian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},mnk:{name:"Mandinka",numbers:[0,1,2],plurals:function(a){return Number(0?0:a==1?1:2)}},mr:{name:"Marathi",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ms:{name:"Malay",numbers:[1],plurals:function(a){return 0}},mt:{name:"Maltese",numbers:[1,2,11,20],plurals:function(a){return Number(a==1?0:a===0||a%100>1&&a%100<11?1:a%100>10&&a%100<20?2:3)}},nah:{name:"Nahuatl",numbers:[1,2],plurals:function(a){return Number(a!=1)}},nap:{name:"Neapolitan",numbers:[1,2],plurals:function(a){return Number(a!=1)}},nb:{name:"Norwegian Bokmal",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ne:{name:"Nepali",numbers:[1,2],plurals:function(a){return Number(a!=1)}},nl:{name:"Dutch",numbers:[1,2],plurals:function(a){return Number(a!=1)}},nn:{name:"Norwegian Nynorsk",numbers:[1,2],plurals:function(a){return Number(a!=1)}},no:{name:"Norwegian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},nso:{name:"Northern Sotho",numbers:[1,2],plurals:function(a){return Number(a!=1)}},oc:{name:"Occitan",numbers:[1,2],plurals:function(a){return Number(a>1)}},or:{name:"Oriya",numbers:[2,1],plurals:function(a){return Number(a!=1)}},pa:{name:"Punjabi",numbers:[1,2],plurals:function(a){return Number(a!=1)}},pap:{name:"Papiamento",numbers:[1,2],plurals:function(a){return Number(a!=1)}},pl:{name:"Polish",numbers:[1,2,5],plurals:function(a){return Number(a==1?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2)}},pms:{name:"Piemontese",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ps:{name:"Pashto",numbers:[1,2],plurals:function(a){return Number(a!=1)}},pt:{name:"Portuguese",numbers:[1,2],plurals:function(a){return Number(a!=1)}},pt_br:{name:"Brazilian Portuguese",numbers:[1,2],plurals:function(a){return Number(a!=1)}},rm:{name:"Romansh",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ro:{name:"Romanian",numbers:[1,2,20],plurals:function(a){return Number(a==1?0:a===0||a%100>0&&a%100<20?1:2)}},ru:{name:"Russian",numbers:[1,2,5],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2)}},sah:{name:"Yakut",numbers:[1],plurals:function(a){return 0}},sco:{name:"Scots",numbers:[1,2],plurals:function(a){return Number(a!=1)}},se:{name:"Northern Sami",numbers:[1,2],plurals:function(a){return Number(a!=1)}},si:{name:"Sinhala",numbers:[1,2],plurals:function(a){return Number(a!=1)}},sk:{name:"Slovak",numbers:[1,2,5],plurals:function(a){return Number(a==1?0:a>=2&&a<=4?1:2)}},sl:{name:"Slovenian",numbers:[5,1,2,3],plurals:function(a){return Number(a%100==1?1:a%100==2?2:a%100==3||a%100==4?3:0)}},so:{name:"Somali",numbers:[1,2],plurals:function(a){return Number(a!=1)}},son:{name:"Songhay",numbers:[1,2],plurals:function(a){return Number(a!=1)}},sq:{name:"Albanian",numbers:[1,2],plurals:function(a){return Number(a!=1)}},sr:{name:"Serbian",numbers:[1,2,5],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2)}},su:{name:"Sundanese",numbers:[1],plurals:function(a){return 0}},sv:{name:"Swedish",numbers:[1,2],plurals:function(a){return Number(a!=1)}},sw:{name:"Swahili",numbers:[1,2],plurals:function(a){return Number(a!=1)}},ta:{name:"Tamil",numbers:[1,2],plurals:function(a){return Number(a!=1)}},te:{name:"Telugu",numbers:[1,2],plurals:function(a){return Number(a!=1)}},tg:{name:"Tajik",numbers:[1,2],plurals:function(a){return Number(a>1)}},th:{name:"Thai",numbers:[1],plurals:function(a){return 0}},ti:{name:"Tigrinya",numbers:[1,2],plurals:function(a){return Number(a>1)}},tk:{name:"Turkmen",numbers:[1,2],plurals:function(a){return Number(a!=1)}},tr:{name:"Turkish",numbers:[1,2],plurals:function(a){return Number(a>1)}},tt:{name:"Tatar",numbers:[1],plurals:function(a){return 0}},ug:{name:"Uyghur",numbers:[1],plurals:function(a){return 0}},uk:{name:"Ukrainian",numbers:[1,2,5],plurals:function(a){return Number(a%10==1&&a%100!=11?0:a%10>=2&&a%10<=4&&(a%100<10||a%100>=20)?1:2)}},ur:{name:"Urdu",numbers:[1,2],plurals:function(a){return Number(a!=1)}},uz:{name:"Uzbek",numbers:[1,2],plurals:function(a){return Number(a>1)}},vi:{name:"Vietnamese",numbers:[1],plurals:function(a){return 0}},wa:{name:"Walloon",numbers:[1,2],plurals:function(a){return Number(a>1)}},wo:{name:"Wolof",numbers:[1],plurals:function(a){return 0}},yo:{name:"Yoruba",numbers:[1,2],plurals:function(a){return Number(a!=1)}},zh:{name:"Chinese",numbers:[1],plurals:function(a){return 0}}},addRule:function(a,b){K.rules[a]=b},setCurrentLng:function(a){if(!K.currentRule||K.currentRule.lng!==a){var b=a.split("-");K.currentRule={lng:a,rule:K.rules[b[0]]}}},get:function(a,b){var c=a.split("-");function d(b,c){var d;if(K.currentRule&&K.currentRule.lng===a){d=K.currentRule.rule}else{d=K.rules[b]}if(d){var e=d.plurals(c);var f=d.numbers[e];if(d.numbers.length===2&&d.numbers[0]===1){if(f===2){f=-1}else if(f===1){f=1}}return f}else{return c===1?"1":"-1"}}return d(c[0],b)}};var L={};var M=function(a,b){L[a]=b};var N=function(){function a(a){return Object.prototype.toString.call(a).slice(8,-1).toLowerCase()}function b(a,b){for(var c=[];b>0;c[--b]=a){}return c.join("")}var c=function(){if(!c.cache.hasOwnProperty(arguments[0])){c.cache[arguments[0]]=c.parse(arguments[0])}return c.format.call(null,c.cache[arguments[0]],arguments)};c.format=function(c,d){var e=1,f=c.length,g="",h,i=[],j,k,l,m,n,o;for(j=0;j<f;j++){g=a(c[j]);if(g==="string"){i.push(c[j])}else if(g==="array"){l=c[j];if(l[2]){h=d[e];for(k=0;k<l[2].length;k++){if(!h.hasOwnProperty(l[2][k])){throw N('[sprintf] property "%s" does not exist',l[2][k])}h=h[l[2][k]]}}else if(l[1]){h=d[l[1]]}else{h=d[e++]}if(/[^s]/.test(l[8])&&a(h)!="number"){throw N("[sprintf] expecting number but found %s",a(h))}switch(l[8]){case"b":h=h.toString(2);break;case"c":h=String.fromCharCode(h);break;case"d":h=parseInt(h,10);break;case"e":h=l[7]?h.toExponential(l[7]):h.toExponential();break;case"f":h=l[7]?parseFloat(h).toFixed(l[7]):parseFloat(h);break;case"o":h=h.toString(8);break;case"s":h=(h=String(h))&&l[7]?h.substring(0,l[7]):h;break;case"u":h=Math.abs(h);break;case"x":h=h.toString(16);break;case"X":h=h.toString(16).toUpperCase();break}h=/[def]/.test(l[8])&&l[3]&&h>=0?"+"+h:h;n=l[4]?l[4]=="0"?"0":l[4].charAt(1):" ";o=l[6]-String(h).length;m=l[6]?b(n,o):"";i.push(l[5]?h+m:m+h)}}return i.join("")};c.cache={};c.parse=function(a){var b=a,c=[],d=[],e=0;while(b){if((c=/^[^\x25]+/.exec(b))!==null){d.push(c[0])}else if((c=/^\x25{2}/.exec(b))!==null){d.push("%")}else if((c=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(b))!==null){if(c[2]){e|=1;var f=[],g=c[2],h=[];if((h=/^([a-z_][a-z_\d]*)/i.exec(g))!==null){f.push(h[1]);while((g=g.substring(h[0].length))!==""){if((h=/^\.([a-z_][a-z_\d]*)/i.exec(g))!==null){f.push(h[1])}else if((h=/^\[(\d+)\]/.exec(g))!==null){f.push(h[1])}else{throw"[sprintf] huh?"}}}else{throw"[sprintf] huh?"}c[2]=f}else{e|=2}if(e===3){throw"[sprintf] mixing positional and named placeholders is not (yet) supported"}d.push(c)}else{throw"[sprintf] huh?"}b=b.substring(c[0].length)}return d};return c}();var O=function(a,b){b.unshift(a);return N.apply(null,b)};M("sprintf",function(a,b,c){if(!c.sprintf)return a;if(Object.prototype.toString.apply(c.sprintf)==="[object Array]"){return O(a,c.sprintf)}else if(typeof c.sprintf==="object"){return N(a,c.sprintf)}return a});c.init=q;c.setLng=w;c.preload=r;c.addResourceBundle=s;c.loadNamespace=u;c.loadNamespaces=v;c.setDefaultNamespace=t;c.t=E;c.translate=E;c.exists=D;c.detectLanguage=p.detectLanguage;c.pluralExtensions=K;c.sync=J;c.functions=p;c.lng=x;c.addPostProcessor=M;c.options=h}();var Handlebars={};!function(a,b){a.VERSION="1.0.0";a.COMPILER_REVISION=4;a.REVISION_CHANGES={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:">= 1.0.0"};a.helpers={};a.partials={};var c=Object.prototype.toString,d="[object Function]",e="[object Object]";a.registerHelper=function(b,d,f){if(c.call(b)===e){if(f||d){throw new a.Exception("Arg not supported with multiple helpers")}a.Utils.extend(this.helpers,b)}else{if(f){d.not=f}this.helpers[b]=d}};a.registerPartial=function(b,d){if(c.call(b)===e){a.Utils.extend(this.partials,b)}else{this.partials[b]=d}};a.registerHelper("helperMissing",function(a){if(arguments.length===2){return b}else{throw new Error("Missing helper: '"+a+"'")}});a.registerHelper("blockHelperMissing",function(b,e){var f=e.inverse||function(){},g=e.fn;var h=c.call(b);if(h===d){b=b.call(this)}if(b===true){return g(this)}else if(b===false||b==null){return f(this)}else if(h==="[object Array]"){if(b.length>0){return a.helpers.each(b,e)}else{return f(this)}}else{return g(b)}});a.K=function(){};a.createFrame=Object.create||function(b){a.K.prototype=b;var c=new a.K;a.K.prototype=null;return c};a.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,methodMap:{0:"debug",1:"info",2:"warn",3:"error"},log:function(b,c){if(a.logger.level<=b){var d=a.logger.methodMap[b];if(typeof console!=="undefined"&&console[d]){console[d].call(console,c)}}}};a.log=function(b,c){a.logger.log(b,c)};a.registerHelper("each",function(b,e){var f=e.fn,g=e.inverse;var h=0,i="",j;var k=c.call(b);if(k===d){b=b.call(this)}if(e.data){j=a.createFrame(e.data)}if(b&&typeof b==="object"){if(b instanceof Array){for(var l=b.length;h<l;h++){if(j){j.index=h}i=i+f(b[h],{data:j})}}else{for(var m in b){if(b.hasOwnProperty(m)){if(j){j.key=m}i=i+f(b[m],{data:j});h++}}}}if(h===0){i=g(this)}return i});a.registerHelper("if",function(b,e){var f=c.call(b);if(f===d){b=b.call(this)}if(!b||a.Utils.isEmpty(b)){return e.inverse(this)}else{return e.fn(this)}});a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn})});a.registerHelper("with",function(b,e){var f=c.call(b);if(f===d){b=b.call(this)}if(!a.Utils.isEmpty(b))return e.fn(b)});a.registerHelper("log",function(b,c){var d=c.data&&c.data.level!=null?parseInt(c.data.level,10):1;a.log(d,b)});var f=["description","fileName","lineNumber","message","name","number","stack"];a.Exception=function(a){var b=Error.prototype.constructor.apply(this,arguments);for(var c=0;c<f.length;c++){this[f[c]]=b[f[c]]}};a.Exception.prototype=new Error;a.SafeString=function(a){this.string=a};a.SafeString.prototype.toString=function(){return this.string.toString()};var g={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var h=/[&<>"'`]/g;var i=/[&<>"'`]/;var j=function(a){return g[a]||"&amp;"};a.Utils={extend:function(a,b){for(var c in b){if(b.hasOwnProperty(c)){a[c]=b[c]}}},escapeExpression:function(b){if(b instanceof a.SafeString){return b.toString()}else if(b==null||b===false){return""}b=b.toString();if(!i.test(b)){return b}return b.replace(h,j)},isEmpty:function(a){if(!a&&a!==0){return true}else if(c.call(a)==="[object Array]"&&a.length===0){return true}else{return false}}};a.VM={template:function(b){var c={escapeExpression:a.Utils.escapeExpression,invokePartial:a.VM.invokePartial,programs:[],program:function(b,c,d){var e=this.programs[b];if(d){e=a.VM.program(b,c,d)}else if(!e){e=this.programs[b]=a.VM.program(b,c)}return e},merge:function(b,c){var d=b||c;if(b&&c){d={};a.Utils.extend(d,c);a.Utils.extend(d,b)}return d},programWithDepth:a.VM.programWithDepth,noop:a.VM.noop,compilerInfo:null};return function(d,e){e=e||{};var f=b.call(c,a,d,e.helpers,e.partials,e.data);var g=c.compilerInfo||[],h=g[0]||1,i=a.COMPILER_REVISION;if(h!==i){if(h<i){var j=a.REVISION_CHANGES[i],k=a.REVISION_CHANGES[h];throw"Template was precompiled with an older version of Handlebars than the current runtime. "+"Please update your precompiler to a newer version ("+j+") or downgrade your runtime to an older version ("+k+")."}else{throw"Template was precompiled with a newer version of Handlebars than the current runtime. "+"Please update your runtime to a newer version ("+g[1]+")."}}return f}},programWithDepth:function(a,b,c){var d=Array.prototype.slice.call(arguments,3);var e=function(a,e){e=e||{};return b.apply(this,[a,e.data||c].concat(d))};e.program=a;e.depth=d.length;return e},program:function(a,b,c){var d=function(a,d){d=d||{};return b(a,d.data||c)};d.program=a;d.depth=0;return d},noop:function(){return""},invokePartial:function(c,d,e,f,g,h){var i={helpers:f,partials:g,data:h};if(c===b){throw new a.Exception("The partial "+d+" could not be found")}else if(c instanceof Function){return c(e,i)}else if(!a.compile){throw new a.Exception("The partial "+d+" could not be compiled when running in runtime-only mode")}else{g[d]=a.compile(c,{data:h!==b});return g[d](e,i)}}};a.template=a.VM.template}(Handlebars);!function(a){"use strict";var b=a.GreenSockGlobals||a,c=function(a){var c=a.split("."),d=b,e;for(e=0;e<c.length;e++){d[c[e]]=d=d[c[e]]||{}}return d},d=c("com.greensock"),e=[].slice,f=function(){},g,h,i,j,k,l={},m=function(d,e,f,g){this.sc=l[d]?l[d].sc:[];l[d]=this;this.gsClass=null;this.func=f;var h=[];this.check=function(i){var j=e.length,k=j,n,o,p,q;while(--j>-1){if((n=l[e[j]]||new m(e[j],[])).gsClass){h[j]=n.gsClass;k--}else if(i){n.sc.push(this)}}if(k===0&&f){o=("com.greensock."+d).split(".");p=o.pop();q=c(o.join("."))[p]=this.gsClass=f.apply(f,h);if(g){b[p]=q;if(typeof define==="function"&&define.amd){define((a.GreenSockAMDPath?a.GreenSockAMDPath+"/":"")+d.split(".").join("/"),[],function(){return q})}else if(typeof module!=="undefined"&&module.exports){module.exports=q}}for(j=0;j<this.sc.length;j++){this.sc[j].check()}}};this.check(true)},n=a._gsDefine=function(a,b,c,d){return new m(a,b,c,d)},o=d._class=function(a,b,c){b=b||function(){};n(a,[],function(){return b},c);return b};n.globals=b;var p=[0,0,1,1],q=[],r=o("easing.Ease",function(a,b,c,d){this._func=a;this._type=c||0;this._power=d||0;this._params=b?p.concat(b):p},true),s=r.map={},t=r.register=function(a,b,c,e){var f=b.split(","),g=f.length,h=(c||"easeIn,easeOut,easeInOut").split(","),i,j,k,l;while(--g>-1){j=f[g];i=e?o("easing."+j,null,true):d.easing[j]||{};k=h.length;while(--k>-1){l=h[k];s[j+"."+l]=s[l+j]=i[l]=a.getRatio?a:a[l]||new a}}};i=r.prototype;i._calcEnd=false;i.getRatio=function(a){if(this._func){this._params[0]=a;return this._func.apply(null,this._params)}var b=this._type,c=this._power,d=b===1?1-a:b===2?a:a<.5?a*2:(1-a)*2;if(c===1){d*=d}else if(c===2){d*=d*d}else if(c===3){d*=d*d*d}else if(c===4){d*=d*d*d*d}return b===1?1-d:b===2?d:a<.5?d/2:1-d/2};g=["Linear","Quad","Cubic","Quart","Quint,Strong"];h=g.length;while(--h>-1){i=g[h]+",Power"+h;t(new r(null,null,1,h),i,"easeOut",true);t(new r(null,null,2,h),i,"easeIn"+(h===0?",easeNone":""));t(new r(null,null,3,h),i,"easeInOut")}s.linear=d.easing.Linear.easeIn;s.swing=d.easing.Quad.easeInOut;var u=o("events.EventDispatcher",function(a){this._listeners={};this._eventTarget=a||this});i=u.prototype;i.addEventListener=function(a,b,c,d,e){e=e||0;var f=this._listeners[a],g=0,h,i;if(f==null){this._listeners[a]=f=[]}i=f.length;while(--i>-1){h=f[i];if(h.c===b&&h.s===c){f.splice(i,1)}else if(g===0&&h.pr<e){g=i+1}}f.splice(g,0,{c:b,s:c,up:d,pr:e});if(this===j&&!k){j.wake()}};i.removeEventListener=function(a,b){var c=this._listeners[a],d;if(c){d=c.length;while(--d>-1){if(c[d].c===b){c.splice(d,1);return}}}};i.dispatchEvent=function(a){var b=this._listeners[a],c,d,e;if(b){c=b.length;d=this._eventTarget;
while(--c>-1){e=b[c];if(e.up){e.c.call(e.s||d,{type:a,target:d})}else{e.c.call(e.s||d)}}}};var v=a.requestAnimationFrame,w=a.cancelAnimationFrame,x=Date.now||function(){return(new Date).getTime()};g=["ms","moz","webkit","o"];h=g.length;while(--h>-1&&!v){v=a[g[h]+"RequestAnimationFrame"];w=a[g[h]+"CancelAnimationFrame"]||a[g[h]+"CancelRequestAnimationFrame"]}o("Ticker",function(a,b){var c=this,d=x(),e=b!==false&&v,g,h,i,l,m,n=function(a){c.time=(x()-d)/1e3;var b=i,e=c.time-m;if(!g||e>0||a===true){c.frame++;m+=e+(e>=l?.004:l-e);c.dispatchEvent("tick")}if(a!==true&&b===i){i=h(n)}};u.call(c);this.time=this.frame=0;this.tick=function(){n(true)};this.sleep=function(){if(i==null){return}if(!e||!w){clearTimeout(i)}else{w(i)}h=f;i=null;if(c===j){k=false}};this.wake=function(){if(i!==null){c.sleep()}h=g===0?f:!e||!v?function(a){return setTimeout(a,(m-c.time)*1e3+1|0)}:v;if(c===j){k=true}n(2)};this.fps=function(a){if(!arguments.length){return g}g=a;l=1/(g||60);m=this.time+l;c.wake()};this.useRAF=function(a){if(!arguments.length){return e}c.sleep();e=a;c.fps(g)};c.fps(a);setTimeout(function(){if(e&&(!i||c.frame<5)){c.useRAF(false)}},1500)});i=d.Ticker.prototype=new d.events.EventDispatcher;i.constructor=d.Ticker;var y=o("core.Animation",function(a,b){this.vars=b||{};this._duration=this._totalDuration=a||0;this._delay=Number(this.vars.delay)||0;this._timeScale=1;this._active=this.vars.immediateRender===true;this.data=this.vars.data;this._reversed=this.vars.reversed===true;if(!K){return}if(!k){j.wake()}var c=this.vars.useFrames?J:K;c.add(this,c._time);if(this.vars.paused){this.paused(true)}});j=y.ticker=new d.Ticker;i=y.prototype;i._dirty=i._gc=i._initted=i._paused=false;i._totalTime=i._time=0;i._rawPrevTime=-1;i._next=i._last=i._onUpdate=i._timeline=i.timeline=null;i._paused=false;i.play=function(a,b){if(arguments.length){this.seek(a,b)}return this.reversed(false).paused(false)};i.pause=function(a,b){if(arguments.length){this.seek(a,b)}return this.paused(true)};i.resume=function(a,b){if(arguments.length){this.seek(a,b)}return this.paused(false)};i.seek=function(a,b){return this.totalTime(Number(a),b!==false)};i.restart=function(a,b){return this.reversed(false).paused(false).totalTime(a?-this._delay:0,b!==false,true)};i.reverse=function(a,b){if(arguments.length){this.seek(a||this.totalDuration(),b)}return this.reversed(true).paused(false)};i.render=function(){};i.invalidate=function(){return this};i._enabled=function(a,b){if(!k){j.wake()}this._gc=!a;this._active=a&&!this._paused&&this._totalTime>0&&this._totalTime<this._totalDuration;if(b!==true){if(a&&!this.timeline){this._timeline.add(this,this._startTime-this._delay)}else if(!a&&this.timeline){this._timeline._remove(this,true)}}return false};i._kill=function(a,b){return this._enabled(false,false)};i.kill=function(a,b){this._kill(a,b);return this};i._uncache=function(a){var b=a?this:this.timeline;while(b){b._dirty=true;b=b.timeline}return this};i.eventCallback=function(a,b,c,d){if(a==null){return null}else if(a.substr(0,2)==="on"){var e=this.vars,f;if(arguments.length===1){return e[a]}if(b==null){delete e[a]}else{e[a]=b;e[a+"Params"]=c;e[a+"Scope"]=d;if(c){f=c.length;while(--f>-1){if(c[f]==="{self}"){c=e[a+"Params"]=c.concat();c[f]=this}}}}if(a==="onUpdate"){this._onUpdate=b}}return this};i.delay=function(a){if(!arguments.length){return this._delay}if(this._timeline.smoothChildTiming){this.startTime(this._startTime+a-this._delay)}this._delay=a;return this};i.duration=function(a){if(!arguments.length){this._dirty=false;return this._duration}this._duration=this._totalDuration=a;this._uncache(true);if(this._timeline.smoothChildTiming)if(this._time>0)if(this._time<this._duration)if(a!==0){this.totalTime(this._totalTime*(a/this._duration),true)}return this};i.totalDuration=function(a){this._dirty=false;return!arguments.length?this._totalDuration:this.duration(a)};i.time=function(a,b){if(!arguments.length){return this._time}if(this._dirty){this.totalDuration()}return this.totalTime(a>this._duration?this._duration:a,b)};i.totalTime=function(a,b,c){if(!k){j.wake()}if(!arguments.length){return this._totalTime}if(this._timeline){if(a<0&&!c){a+=this.totalDuration()}if(this._timeline.smoothChildTiming){if(this._dirty){this.totalDuration()}var d=this._totalDuration,e=this._timeline;if(a>d&&!c){a=d}this._startTime=(this._paused?this._pauseTime:e._time)-(!this._reversed?a:d-a)/this._timeScale;if(!e._dirty){this._uncache(false)}if(!e._active){while(e._timeline){e.totalTime(e._totalTime,true);e=e._timeline}}}if(this._gc){this._enabled(true,false)}if(this._totalTime!==a){this.render(a,b,false)}}return this};i.startTime=function(a){if(!arguments.length){return this._startTime}if(a!==this._startTime){this._startTime=a;if(this.timeline)if(this.timeline._sortChildren){this.timeline.add(this,a-this._delay)}}return this};i.timeScale=function(a){if(!arguments.length){return this._timeScale}a=a||1e-6;if(this._timeline&&this._timeline.smoothChildTiming){var b=this._pauseTime,c=b||b===0?b:this._timeline.totalTime();this._startTime=c-(c-this._startTime)*this._timeScale/a}this._timeScale=a;return this._uncache(false)};i.reversed=function(a){if(!arguments.length){return this._reversed}if(a!=this._reversed){this._reversed=a;this.totalTime(this._totalTime,true)}return this};i.paused=function(a){if(!arguments.length){return this._paused}if(a!=this._paused)if(this._timeline){if(!k&&!a){j.wake()}var b=this._timeline.rawTime(),c=b-this._pauseTime;if(!a&&this._timeline.smoothChildTiming){this._startTime+=c;this._uncache(false)}this._pauseTime=a?b:null;this._paused=a;this._active=!a&&this._totalTime>0&&this._totalTime<this._totalDuration;if(!a&&c!==0&&this._duration!==0){this.render(this._totalTime,true,true)}}if(this._gc&&!a){this._enabled(true,false)}return this};var z=o("core.SimpleTimeline",function(a){y.call(this,0,a);this.autoRemoveChildren=this.smoothChildTiming=true});i=z.prototype=new y;i.constructor=z;i.kill()._gc=false;i._first=i._last=null;i._sortChildren=false;i.add=i.insert=function(a,b,c,d){var e,f;a._startTime=Number(b||0)+a._delay;if(a._paused)if(this!==a._timeline){a._pauseTime=a._startTime+(this.rawTime()-a._startTime)/a._timeScale}if(a.timeline){a.timeline._remove(a,true)}a.timeline=a._timeline=this;if(a._gc){a._enabled(true,true)}e=this._last;if(this._sortChildren){f=a._startTime;while(e&&e._startTime>f){e=e._prev}}if(e){a._next=e._next;e._next=a}else{a._next=this._first;this._first=a}if(a._next){a._next._prev=a}else{this._last=a}a._prev=e;if(this._timeline){this._uncache(true)}return this};i._remove=function(a,b){if(a.timeline===this){if(!b){a._enabled(false,true)}a.timeline=null;if(a._prev){a._prev._next=a._next}else if(this._first===a){this._first=a._next}if(a._next){a._next._prev=a._prev}else if(this._last===a){this._last=a._prev}if(this._timeline){this._uncache(true)}}return this};i.render=function(a,b,c){var d=this._first,e;this._totalTime=this._time=this._rawPrevTime=a;while(d){e=d._next;if(d._active||a>=d._startTime&&!d._paused){if(!d._reversed){d.render((a-d._startTime)*d._timeScale,b,c)}else{d.render((!d._dirty?d._totalDuration:d.totalDuration())-(a-d._startTime)*d._timeScale,b,c)}}d=e}};i.rawTime=function(){if(!k){j.wake()}return this._totalTime};var A=o("TweenLite",function(a,b,c){y.call(this,b,c);if(a==null){throw"Cannot tween a null target."}this.target=a=typeof a!=="string"?a:A.selector(a)||a;var d=a.jquery||a.length&&a[0]&&a[0].nodeType&&a[0].style,f=this.vars.overwrite,g,h,i;this._overwrite=f=f==null?I[A.defaultOverwrite]:typeof f==="number"?f>>0:I[f];if((d||a instanceof Array)&&typeof a[0]!=="number"){this._targets=i=e.call(a,0);this._propLookup=[];this._siblings=[];for(g=0;g<i.length;g++){h=i[g];if(!h){i.splice(g--,1);continue}else if(typeof h==="string"){h=i[g--]=A.selector(h);if(typeof h==="string"){i.splice(g+1,1)}continue}else if(h.length&&h[0]&&h[0].nodeType&&h[0].style){i.splice(g--,1);this._targets=i=i.concat(e.call(h,0));continue}this._siblings[g]=L(h,this,false);if(f===1)if(this._siblings[g].length>1){M(h,this,null,1,this._siblings[g])}}}else{this._propLookup={};this._siblings=L(a,this,false);if(f===1)if(this._siblings.length>1){M(a,this,null,1,this._siblings)}}if(this.vars.immediateRender||b===0&&this._delay===0&&this.vars.immediateRender!==false){this.render(-this._delay,false,true)}},true),B=function(a){return a.length&&a[0]&&a[0].nodeType&&a[0].style},C=function(a,b){var c={},d;for(d in a){if(!H[d]&&(!(d in b)||d==="x"||d==="y"||d==="width"||d==="height"||d==="className")&&(!E[d]||E[d]&&E[d]._autoCSS)){c[d]=a[d];delete a[d]}}a.css=c};i=A.prototype=new y;i.constructor=A;i.kill()._gc=false;i.ratio=0;i._firstPT=i._targets=i._overwrittenProps=i._startAt=null;i._notifyPluginsOfEnabled=false;A.version="1.9.7";A.defaultEase=i._ease=new r(null,null,1,1);A.defaultOverwrite="auto";A.ticker=j;A.autoSleep=true;A.selector=a.$||a.jQuery||function(b){if(a.$){A.selector=a.$;return a.$(b)}return a.document?a.document.getElementById(b.charAt(0)==="#"?b.substr(1):b):b};var D=A._internals={},E=A._plugins={},F=A._tweenLookup={},G=0,H=D.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1},I={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,"true":1,"false":0},J=y._rootFramesTimeline=new z,K=y._rootTimeline=new z;K._startTime=j.time;J._startTime=j.frame;K._active=J._active=true;y._updateRoot=function(){K.render((j.time-K._startTime)*K._timeScale,false,false);J.render((j.frame-J._startTime)*J._timeScale,false,false);if(!(j.frame%120)){var a,b,c;for(c in F){b=F[c].tweens;a=b.length;while(--a>-1){if(b[a]._gc){b.splice(a,1)}}if(b.length===0){delete F[c]}}c=K._first;if(!c||c._paused)if(A.autoSleep&&!J._first&&j._listeners.tick.length===1){while(c&&c._paused){c=c._next}if(!c){j.sleep()}}}};j.addEventListener("tick",y._updateRoot);var L=function(a,b,c){var d=a._gsTweenID,e,f;if(!F[d||(a._gsTweenID=d="t"+G++)]){F[d]={target:a,tweens:[]}}if(b){e=F[d].tweens;e[f=e.length]=b;if(c){while(--f>-1){if(e[f]===b){e.splice(f,1)}}}}return F[d].tweens},M=function(a,b,c,d,e){var f,g,h,i;if(d===1||d>=4){i=e.length;for(f=0;f<i;f++){if((h=e[f])!==b){if(!h._gc)if(h._enabled(false,false)){g=true}}else if(d===5){break}}return g}var j=b._startTime+1e-10,k=[],l=0,m=b._duration===0,n;f=e.length;while(--f>-1){if((h=e[f])===b||h._gc||h._paused){}else if(h._timeline!==b._timeline){n=n||N(b,0,m);if(N(h,n,m)===0){k[l++]=h}}else if(h._startTime<=j)if(h._startTime+h.totalDuration()/h._timeScale+1e-10>j)if(!((m||!h._initted)&&j-h._startTime<=2e-10)){k[l++]=h}}f=l;while(--f>-1){h=k[f];if(d===2)if(h._kill(c,a)){g=true}if(d!==2||!h._firstPT&&h._initted){if(h._enabled(false,false)){g=true}}}return g},N=function(a,b,c){var d=a._timeline,e=d._timeScale,f=a._startTime,g=1e-10;while(d._timeline){f+=d._startTime;e*=d._timeScale;if(d._paused){return-100}d=d._timeline}f/=e;return f>b?f-b:c&&f===b||!a._initted&&f-b<2*g?g:(f+=a.totalDuration()/a._timeScale/e)>b+g?0:f-b-g};i._init=function(){var a=this.vars,b=this._overwrittenProps,c=this._duration,d=a.ease,e,f,g,h;if(a.startAt){a.startAt.overwrite=0;a.startAt.immediateRender=true;this._startAt=A.to(this.target,0,a.startAt);if(a.immediateRender){this._startAt=null;if(this._time===0&&c!==0){return}}}else if(a.runBackwards&&a.immediateRender&&c!==0){if(this._startAt){this._startAt.render(-1,true);this._startAt=null}else if(this._time===0){g={};for(h in a){if(!H[h]||h==="autoCSS"){g[h]=a[h]}}g.overwrite=0;this._startAt=A.to(this.target,0,g);return}}if(!d){this._ease=A.defaultEase}else if(d instanceof r){this._ease=a.easeParams instanceof Array?d.config.apply(d,a.easeParams):d}else{this._ease=typeof d==="function"?new r(d,a.easeParams):s[d]||A.defaultEase}this._easeType=this._ease._type;this._easePower=this._ease._power;this._firstPT=null;if(this._targets){e=this._targets.length;while(--e>-1){if(this._initProps(this._targets[e],this._propLookup[e]={},this._siblings[e],b?b[e]:null)){f=true}}}else{f=this._initProps(this.target,this._propLookup,this._siblings,b)}if(f){A._onPluginEvent("_onInitAllProps",this)}if(b)if(!this._firstPT)if(typeof this.target!=="function"){this._enabled(false,false)}if(a.runBackwards){g=this._firstPT;while(g){g.s+=g.c;g.c=-g.c;g=g._next}}this._onUpdate=a.onUpdate;this._initted=true};i._initProps=function(a,b,c,d){var e,f,g,h,i,j,k;if(a==null){return false}if(!this.vars.css)if(a.style)if(a.nodeType)if(E.css)if(this.vars.autoCSS!==false){C(this.vars,a)}for(e in this.vars){if(H[e]){if(e==="onStartParams"||e==="onUpdateParams"||e==="onCompleteParams"||e==="onReverseCompleteParams"||e==="onRepeatParams")if(i=this.vars[e]){f=i.length;while(--f>-1){if(i[f]==="{self}"){i=this.vars[e]=i.concat();i[f]=this}}}}else if(E[e]&&(h=new E[e])._onInitTween(a,this.vars[e],this)){this._firstPT=j={_next:this._firstPT,t:h,p:"setRatio",s:0,c:1,f:true,n:e,pg:true,pr:h._priority};f=h._overwriteProps.length;while(--f>-1){b[h._overwriteProps[f]]=this._firstPT}if(h._priority||h._onInitAllProps){g=true}if(h._onDisable||h._onEnable){this._notifyPluginsOfEnabled=true}}else{this._firstPT=b[e]=j={_next:this._firstPT,t:a,p:e,f:typeof a[e]==="function",n:e,pg:false,pr:0};j.s=!j.f?parseFloat(a[e]):a[e.indexOf("set")||typeof a["get"+e.substr(3)]!=="function"?e:"get"+e.substr(3)]();k=this.vars[e];j.c=typeof k==="string"&&k.charAt(1)==="="?parseInt(k.charAt(0)+"1",10)*Number(k.substr(2)):Number(k)-j.s||0}if(j)if(j._next){j._next._prev=j}}if(d)if(this._kill(d,a)){return this._initProps(a,b,c,d)}if(this._overwrite>1)if(this._firstPT)if(c.length>1)if(M(a,this,b,this._overwrite,c)){this._kill(b,a);return this._initProps(a,b,c,d)}return g};i.render=function(a,b,c){var d=this._time,e,f,g;if(a>=this._duration){this._totalTime=this._time=this._duration;this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1;if(!this._reversed){e=true;f="onComplete"}if(this._duration===0){if(a===0||this._rawPrevTime<0)if(this._rawPrevTime!==a){c=true;if(this._rawPrevTime>0){f="onReverseComplete";if(b){a=-1}}}this._rawPrevTime=a}}else if(a<1e-7){this._totalTime=this._time=0;this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0;if(d!==0||this._duration===0&&this._rawPrevTime>0){f="onReverseComplete";e=this._reversed}if(a<0){this._active=false;if(this._duration===0){if(this._rawPrevTime>=0){c=true}this._rawPrevTime=a}}else if(!this._initted){c=true}}else{this._totalTime=this._time=a;if(this._easeType){var h=a/this._duration,i=this._easeType,j=this._easePower;if(i===1||i===3&&h>=.5){h=1-h}if(i===3){h*=2}if(j===1){h*=h}else if(j===2){h*=h*h}else if(j===3){h*=h*h*h}else if(j===4){h*=h*h*h*h}if(i===1){this.ratio=1-h}else if(i===2){this.ratio=h}else if(a/this._duration<.5){this.ratio=h/2}else{this.ratio=1-h/2}}else{this.ratio=this._ease.getRatio(a/this._duration)}}if(this._time===d&&!c){return}else if(!this._initted){this._init();if(!this._initted){return}if(this._time&&!e){this.ratio=this._ease.getRatio(this._time/this._duration)}else if(e&&this._ease._calcEnd){this.ratio=this._ease.getRatio(this._time===0?0:1)}}if(!this._active)if(!this._paused){this._active=true}if(d===0){if(this._startAt){if(a>=0){this._startAt.render(a,b,c)}else if(!f){f="_dummyGS"}}if(this.vars.onStart)if(this._time!==0||this._duration===0)if(!b){this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||q)}}g=this._firstPT;while(g){if(g.f){g.t[g.p](g.c*this.ratio+g.s)}else{g.t[g.p]=g.c*this.ratio+g.s}g=g._next}if(this._onUpdate){if(a<0)if(this._startAt){this._startAt.render(a,b,c)}if(!b){this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||q)}}if(f)if(!this._gc){if(a<0&&this._startAt&&!this._onUpdate){this._startAt.render(a,b,c)}if(e){if(this._timeline.autoRemoveChildren){this._enabled(false,false)}this._active=false}if(!b&&this.vars[f]){this.vars[f].apply(this.vars[f+"Scope"]||this,this.vars[f+"Params"]||q)}}};i._kill=function(a,b){if(a==="all"){a=null}if(a==null)if(b==null||b===this.target){return this._enabled(false,false)}b=typeof b!=="string"?b||this._targets||this.target:A.selector(b)||b;var c,d,e,f,g,h,i,j;if((b instanceof Array||B(b))&&typeof b[0]!=="number"){c=b.length;while(--c>-1){if(this._kill(a,b[c])){h=true}}}else{if(this._targets){c=this._targets.length;while(--c>-1){if(b===this._targets[c]){g=this._propLookup[c]||{};this._overwrittenProps=this._overwrittenProps||[];d=this._overwrittenProps[c]=a?this._overwrittenProps[c]||{}:"all";break}}}else if(b!==this.target){return false}else{g=this._propLookup;d=this._overwrittenProps=a?this._overwrittenProps||{}:"all"}if(g){i=a||g;j=a!==d&&d!=="all"&&a!==g&&(a==null||a._tempKill!==true);for(e in i){if(f=g[e]){if(f.pg&&f.t._kill(i)){h=true}if(!f.pg||f.t._overwriteProps.length===0){if(f._prev){f._prev._next=f._next}else if(f===this._firstPT){this._firstPT=f._next}if(f._next){f._next._prev=f._prev}f._next=f._prev=null}delete g[e]}if(j){d[e]=1}}if(!this._firstPT&&this._initted){this._enabled(false,false)}}}return h};i.invalidate=function(){if(this._notifyPluginsOfEnabled){A._onPluginEvent("_onDisable",this)}this._firstPT=null;this._overwrittenProps=null;this._onUpdate=null;this._startAt=null;this._initted=this._active=this._notifyPluginsOfEnabled=false;this._propLookup=this._targets?{}:[];return this};i._enabled=function(a,b){if(!k){j.wake()}if(a&&this._gc){var c=this._targets,d;if(c){d=c.length;while(--d>-1){this._siblings[d]=L(c[d],this,true)}}else{this._siblings=L(this.target,this,true)}}y.prototype._enabled.call(this,a,b);if(this._notifyPluginsOfEnabled)if(this._firstPT){return A._onPluginEvent(a?"_onEnable":"_onDisable",this)}return false};A.to=function(a,b,c){return new A(a,b,c)};A.from=function(a,b,c){c.runBackwards=true;c.immediateRender=c.immediateRender!=false;return new A(a,b,c)};A.fromTo=function(a,b,c,d){d.startAt=c;d.immediateRender=d.immediateRender!=false&&c.immediateRender!=false;return new A(a,b,d)};A.delayedCall=function(a,b,c,d,e){return new A(b,0,{delay:a,onComplete:b,onCompleteParams:c,onCompleteScope:d,onReverseComplete:b,onReverseCompleteParams:c,onReverseCompleteScope:d,immediateRender:false,useFrames:e,overwrite:0})};A.set=function(a,b){return new A(a,0,b)};A.killTweensOf=A.killDelayedCallsTo=function(a,b){var c=A.getTweensOf(a),d=c.length;while(--d>-1){c[d]._kill(b,a)}};A.getTweensOf=function(a){if(a==null){return[]}a=typeof a!=="string"?a:A.selector(a)||a;var b,c,d,e;if((a instanceof Array||B(a))&&typeof a[0]!=="number"){b=a.length;c=[];while(--b>-1){c=c.concat(A.getTweensOf(a[b]))}b=c.length;while(--b>-1){e=c[b];d=b;while(--d>-1){if(e===c[d]){c.splice(b,1)}}}}else{c=L(a).concat();b=c.length;while(--b>-1){if(c[b]._gc){c.splice(b,1)}}}return c};var O=o("plugins.TweenPlugin",function(a,b){this._overwriteProps=(a||"").split(",");this._propName=this._overwriteProps[0];this._priority=b||0;this._super=O.prototype},true);i=O.prototype;O.version="1.9.1";O.API=2;i._firstPT=null;i._addTween=function(a,b,c,d,e,f){var g,h;if(d!=null&&(g=typeof d==="number"||d.charAt(1)!=="="?Number(d)-c:parseInt(d.charAt(0)+"1",10)*Number(d.substr(2)))){this._firstPT=h={_next:this._firstPT,t:a,p:b,s:c,c:g,f:typeof a[b]==="function",n:e||b,r:f};if(h._next){h._next._prev=h}}};i.setRatio=function(a){var b=this._firstPT,c=1e-6,d;while(b){d=b.c*a+b.s;if(b.r){d=d+(d>0?.5:-.5)>>0}else if(d<c)if(d>-c){d=0}if(b.f){b.t[b.p](d)}else{b.t[b.p]=d}b=b._next}};i._kill=function(a){var b=this._overwriteProps,c=this._firstPT,d;if(a[this._propName]!=null){this._overwriteProps=[]}else{d=b.length;while(--d>-1){if(a[b[d]]!=null){b.splice(d,1)}}}while(c){if(a[c.n]!=null){if(c._next){c._next._prev=c._prev}if(c._prev){c._prev._next=c._next;c._prev=null}else if(this._firstPT===c){this._firstPT=c._next}}c=c._next}return false};i._roundProps=function(a,b){var c=this._firstPT;while(c){if(a[this._propName]||c.n!=null&&a[c.n.split(this._propName+"_").join("")]){c.r=b}c=c._next}};A._onPluginEvent=function(a,b){var c=b._firstPT,d,e,f,g,h;if(a==="_onInitAllProps"){while(c){h=c._next;e=f;while(e&&e.pr>c.pr){e=e._next}if(c._prev=e?e._prev:g){c._prev._next=c}else{f=c}if(c._next=e){e._prev=c}else{g=c}c=h}c=b._firstPT=f}while(c){if(c.pg)if(typeof c.t[a]==="function")if(c.t[a]()){d=true}c=c._next}return d};O.activate=function(a){var b=a.length;while(--b>-1){if(a[b].API===O.API){E[(new a[b])._propName]=a[b]}}return true};n.plugin=function(a){if(!a||!a.propName||!a.init||!a.API){throw"illegal plugin definition."}var b=a.propName,c=a.priority||0,d=a.overwriteProps,e={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_roundProps",initAll:"_onInitAllProps"},f=o("plugins."+b.charAt(0).toUpperCase()+b.substr(1)+"Plugin",function(){O.call(this,b,c);this._overwriteProps=d||[]},a.global===true),g=f.prototype=new O(b),h;g.constructor=f;f.API=a.API;for(h in e){if(typeof a[h]==="function"){g[e[h]]=a[h]}}f.version=a.version;O.activate([f]);return f};g=a._gsQueue;if(g){for(h=0;h<g.length;h++){g[h]()}for(i in l){if(!l[i].func){a.console.log("GSAP encountered missing dependency: com.greensock."+i)}}}k=false}(window);(window._gsQueue||(window._gsQueue=[])).push(function(){"use strict";window._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],function(a,b,c){var d=function(a){b.call(this,a),this._labels={},this.autoRemoveChildren=this.vars.autoRemoveChildren===!0,this.smoothChildTiming=this.vars.smoothChildTiming===!0,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;for(var c,d,f=this.vars,g=e.length;--g>-1;)if(d=f[e[g]])for(c=d.length;--c>-1;)"{self}"===d[c]&&(d=f[e[g]]=d.concat(),d[c]=this);f.tweens instanceof Array&&this.add(f.tweens,0,f.align,f.stagger)},e=["onStartParams","onUpdateParams","onCompleteParams","onReverseCompleteParams","onRepeatParams"],f=[],g=function(a){var b,c={};for(b in a)c[b]=a[b];return c},h=f.slice,i=d.prototype=new b;return d.version="1.9.7",i.constructor=d,i.kill()._gc=!1,i.to=function(a,b,d,e){return b?this.add(new c(a,b,d),e):this.set(a,d,e)},i.from=function(a,b,d,e){return this.add(c.from(a,b,d),e)},i.fromTo=function(a,b,d,e,f){return b?this.add(c.fromTo(a,b,d,e),f):this.set(a,e,f)},i.staggerTo=function(a,b,e,f,i,j,k,l){var m,n=new d({onComplete:j,onCompleteParams:k,onCompleteScope:l});for("string"==typeof a&&(a=c.selector(a)||a),!(a instanceof Array)&&a.length&&a[0]&&a[0].nodeType&&a[0].style&&(a=h.call(a,0)),f=f||0,m=0;a.length>m;m++)e.startAt&&(e.startAt=g(e.startAt)),n.to(a[m],b,g(e),m*f);return this.add(n,i)},i.staggerFrom=function(a,b,c,d,e,f,g,h){return c.immediateRender=0!=c.immediateRender,c.runBackwards=!0,this.staggerTo(a,b,c,d,e,f,g,h)},i.staggerFromTo=function(a,b,c,d,e,f,g,h,i){return d.startAt=c,d.immediateRender=0!=d.immediateRender&&0!=c.immediateRender,this.staggerTo(a,b,d,e,f,g,h,i)},i.call=function(a,b,d,e){return this.add(c.delayedCall(0,a,b,d),e)},i.set=function(a,b,d){return d=this._parseTimeOrLabel(d,0,!0),null==b.immediateRender&&(b.immediateRender=d===this._time&&!this._paused),this.add(new c(a,0,b),d)},d.exportRoot=function(a,b){a=a||{},null==a.smoothChildTiming&&(a.smoothChildTiming=!0);var e,f,g=new d(a),h=g._timeline;for(null==b&&(b=!0),h._remove(g,!0),g._startTime=0,g._rawPrevTime=g._time=g._totalTime=h._time,e=h._first;e;)f=e._next,b&&e instanceof c&&e.target===e.vars.onComplete||g.add(e,e._startTime-e._delay),e=f;return h.add(g,0),g},i.add=function(e,f,g,h){var i,j,k,l,m;if("number"!=typeof f&&(f=this._parseTimeOrLabel(f,0,!0,e)),!(e instanceof a)){if(e instanceof Array){for(g=g||"normal",h=h||0,i=f,j=e.length,k=0;j>k;k++)(l=e[k])instanceof Array&&(l=new d({tweens:l})),this.add(l,i),"string"!=typeof l&&"function"!=typeof l&&("sequence"===g?i=l._startTime+l.totalDuration()/l._timeScale:"start"===g&&(l._startTime-=l.delay())),i+=h;return this._uncache(!0)}if("string"==typeof e)return this.addLabel(e,f);if("function"!=typeof e)throw"Cannot add "+e+" into the timeline; it is neither a tween, timeline, function, nor a string.";e=c.delayedCall(0,e)}if(b.prototype.add.call(this,e,f),this._gc&&!this._paused&&this._time===this._duration&&this._time<this.duration())for(m=this;m._gc&&m._timeline;)m._timeline.smoothChildTiming?m.totalTime(m._totalTime,!0):m._enabled(!0,!1),m=m._timeline;return this},i.remove=function(b){if(b instanceof a)return this._remove(b,!1);if(b instanceof Array){for(var c=b.length;--c>-1;)this.remove(b[c]);return this}return"string"==typeof b?this.removeLabel(b):this.kill(null,b)},i.append=function(a,b){return this.add(a,this._parseTimeOrLabel(null,b,!0,a))},i.insert=i.insertMultiple=function(a,b,c,d){return this.add(a,b||0,c,d)},i.appendMultiple=function(a,b,c,d){return this.add(a,this._parseTimeOrLabel(null,b,!0,a),c,d)},i.addLabel=function(a,b){return this._labels[a]=this._parseTimeOrLabel(b),this},i.removeLabel=function(a){return delete this._labels[a],this},i.getLabelTime=function(a){return null!=this._labels[a]?this._labels[a]:-1},i._parseTimeOrLabel=function(b,c,d,e){var f;if(e instanceof a&&e.timeline===this)this.remove(e);else if(e instanceof Array)for(f=e.length;--f>-1;)e[f]instanceof a&&e[f].timeline===this&&this.remove(e[f]);if("string"==typeof c)return this._parseTimeOrLabel(c,d&&"number"==typeof b&&null==this._labels[c]?b-this.duration():0,d);if(c=c||0,"string"!=typeof b||!isNaN(b)&&null==this._labels[b])null==b&&(b=this.duration());else{if(f=b.indexOf("="),-1===f)return null==this._labels[b]?d?this._labels[b]=this.duration()+c:c:this._labels[b]+c;c=parseInt(b.charAt(f-1)+"1",10)*Number(b.substr(f+1)),b=f>1?this._parseTimeOrLabel(b.substr(0,f-1),0,d):this.duration()}return Number(b)+c},i.seek=function(a,b){return this.totalTime("number"==typeof a?a:this._parseTimeOrLabel(a),b!==!1)},i.stop=function(){return this.paused(!0)},i.gotoAndPlay=function(a,b){return this.play(a,b)},i.gotoAndStop=function(a,b){return this.pause(a,b)},i.render=function(a,b,c){this._gc&&this._enabled(!0,!1),this._active=!this._paused;var d,e,g,h,i,j=this._dirty?this.totalDuration():this._totalDuration,k=this._time,l=this._startTime,m=this._timeScale,n=this._paused;if(a>=j?(this._totalTime=this._time=j,this._reversed||this._hasPausedChild()||(e=!0,h="onComplete",0===this._duration&&(0===a||0>this._rawPrevTime)&&this._rawPrevTime!==a&&this._first&&(i=!0,this._rawPrevTime>0&&(h="onReverseComplete"))),this._rawPrevTime=a,a=j+1e-6):1e-7>a?(this._totalTime=this._time=0,(0!==k||0===this._duration&&this._rawPrevTime>0)&&(h="onReverseComplete",e=this._reversed),0>a?(this._active=!1,0===this._duration&&this._rawPrevTime>=0&&this._first&&(i=!0)):this._initted||(i=!0),this._rawPrevTime=a,a=0):this._totalTime=this._time=this._rawPrevTime=a,this._time!==k&&this._first||c||i){if(this._initted||(this._initted=!0),0===k&&this.vars.onStart&&0!==this._time&&(b||this.vars.onStart.apply(this.vars.onStartScope||this,this.vars.onStartParams||f)),this._time>=k)for(d=this._first;d&&(g=d._next,!this._paused||n);)(d._active||d._startTime<=this._time&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=g;else for(d=this._last;d&&(g=d._prev,!this._paused||n);)(d._active||k>=d._startTime&&!d._paused&&!d._gc)&&(d._reversed?d.render((d._dirty?d.totalDuration():d._totalDuration)-(a-d._startTime)*d._timeScale,b,c):d.render((a-d._startTime)*d._timeScale,b,c)),d=g;this._onUpdate&&(b||this._onUpdate.apply(this.vars.onUpdateScope||this,this.vars.onUpdateParams||f)),h&&(this._gc||(l===this._startTime||m!==this._timeScale)&&(0===this._time||j>=this.totalDuration())&&(e&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!b&&this.vars[h]&&this.vars[h].apply(this.vars[h+"Scope"]||this,this.vars[h+"Params"]||f)))}},i._hasPausedChild=function(){for(var a=this._first;a;){if(a._paused||a instanceof d&&a._hasPausedChild())return!0;a=a._next}return!1},i.getChildren=function(a,b,d,e){e=e||-9999999999;for(var f=[],g=this._first,h=0;g;)e>g._startTime||(g instanceof c?b!==!1&&(f[h++]=g):(d!==!1&&(f[h++]=g),a!==!1&&(f=f.concat(g.getChildren(!0,b,d)),h=f.length))),g=g._next;return f},i.getTweensOf=function(a,b){for(var d=c.getTweensOf(a),e=d.length,f=[],g=0;--e>-1;)(d[e].timeline===this||b&&this._contains(d[e]))&&(f[g++]=d[e]);return f},i._contains=function(a){for(var b=a.timeline;b;){if(b===this)return!0;b=b.timeline}return!1},i.shiftChildren=function(a,b,c){c=c||0;for(var d,e=this._first,f=this._labels;e;)e._startTime>=c&&(e._startTime+=a),e=e._next;if(b)for(d in f)f[d]>=c&&(f[d]+=a);return this._uncache(!0)},i._kill=function(a,b){if(!a&&!b)return this._enabled(!1,!1);for(var c=b?this.getTweensOf(b):this.getChildren(!0,!0,!1),d=c.length,e=!1;--d>-1;)c[d]._kill(a,b)&&(e=!0);return e},i.clear=function(a){var b=this.getChildren(!1,!0,!0),c=b.length;for(this._time=this._totalTime=0;--c>-1;)b[c]._enabled(!1,!1);return a!==!1&&(this._labels={}),this._uncache(!0)},i.invalidate=function(){for(var a=this._first;a;)a.invalidate(),a=a._next;return this},i._enabled=function(a,c){if(a===this._gc)for(var d=this._first;d;)d._enabled(a,!0),d=d._next;return b.prototype._enabled.call(this,a,c)},i.progress=function(a){return arguments.length?this.totalTime(this.duration()*a,!1):this._time/this.duration()},i.duration=function(a){return arguments.length?(0!==this.duration()&&0!==a&&this.timeScale(this._duration/a),this):(this._dirty&&this.totalDuration(),this._duration)},i.totalDuration=function(a){if(!arguments.length){if(this._dirty){for(var b,c,d=0,e=this._last,f=999999999999;e;)b=e._prev,e._dirty&&e.totalDuration(),e._startTime>f&&this._sortChildren&&!e._paused?this.add(e,e._startTime-e._delay):f=e._startTime,0>e._startTime&&!e._paused&&(d-=e._startTime,this._timeline.smoothChildTiming&&(this._startTime+=e._startTime/this._timeScale),this.shiftChildren(-e._startTime,!1,-9999999999),f=0),c=e._startTime+e._totalDuration/e._timeScale,c>d&&(d=c),e=b;this._duration=this._totalDuration=d,this._dirty=!1}return this._totalDuration}return 0!==this.totalDuration()&&0!==a&&this.timeScale(this._totalDuration/a),this},i.usesFrames=function(){for(var b=this._timeline;b._timeline;)b=b._timeline;return b===a._rootFramesTimeline},i.rawTime=function(){return this._paused||0!==this._totalTime&&this._totalTime!==this._totalDuration?this._totalTime:(this._timeline.rawTime()-this._startTime)*this._timeScale},d},!0)}),window._gsDefine&&window._gsQueue.pop()();(window._gsQueue||(window._gsQueue=[])).push(function(){"use strict";window._gsDefine("easing.Back",["easing.Ease"],function(a){var b,c,d,e=window.GreenSockGlobals||window,f=e.com.greensock,g=2*Math.PI,h=Math.PI/2,i=f._class,j=function(b,c){var d=i("easing."+b,function(){},!0),e=d.prototype=new a;return e.constructor=d,e.getRatio=c,d},k=a.register||function(){},l=function(a,b,c,d){var e=i("easing."+a,{easeOut:new b,easeIn:new c,easeInOut:new d},!0);return k(e,a),e},m=function(a,b,c){this.t=a,this.v=b,c&&(this.next=c,c.prev=this,this.c=c.v-b,this.gap=c.t-a)},n=function(b,c){var d=i("easing."+b,function(a){this._p1=a||0===a?a:1.70158,this._p2=1.525*this._p1},!0),e=d.prototype=new a;return e.constructor=d,e.getRatio=c,e.config=function(a){return new d(a)},d},o=l("Back",n("BackOut",function(a){return(a-=1)*a*((this._p1+1)*a+this._p1)+1}),n("BackIn",function(a){return a*a*((this._p1+1)*a-this._p1)}),n("BackInOut",function(a){return 1>(a*=2)?.5*a*a*((this._p2+1)*a-this._p2):.5*((a-=2)*a*((this._p2+1)*a+this._p2)+2)})),p=i("easing.SlowMo",function(a,b,c){b=b||0===b?b:.7,null==a?a=.7:a>1&&(a=1),this._p=1!==a?b:0,this._p1=(1-a)/2,this._p2=a,this._p3=this._p1+this._p2,this._calcEnd=c===!0},!0),q=p.prototype=new a;return q.constructor=p,q.getRatio=function(a){var b=a+(.5-a)*this._p;return this._p1>a?this._calcEnd?1-(a=1-a/this._p1)*a:b-(a=1-a/this._p1)*a*a*a*b:a>this._p3?this._calcEnd?1-(a=(a-this._p3)/this._p1)*a:b+(a-b)*(a=(a-this._p3)/this._p1)*a*a*a:this._calcEnd?1:b},p.ease=new p(.7,.7),q.config=p.config=function(a,b,c){return new p(a,b,c)
},b=i("easing.SteppedEase",function(a){a=a||1,this._p1=1/a,this._p2=a+1},!0),q=b.prototype=new a,q.constructor=b,q.getRatio=function(a){return 0>a?a=0:a>=1&&(a=.999999999),(this._p2*a>>0)*this._p1},q.config=b.config=function(a){return new b(a)},c=i("easing.RoughEase",function(b){b=b||{};for(var c,d,e,f,g,h,i=b.taper||"none",j=[],k=0,l=0|(b.points||20),n=l,o=b.randomize!==!1,p=b.clamp===!0,q=b.template instanceof a?b.template:null,r="number"==typeof b.strength?.4*b.strength:.4;--n>-1;)c=o?Math.random():1/l*n,d=q?q.getRatio(c):c,"none"===i?e=r:"out"===i?(f=1-c,e=f*f*r):"in"===i?e=c*c*r:.5>c?(f=2*c,e=.5*f*f*r):(f=2*(1-c),e=.5*f*f*r),o?d+=Math.random()*e-.5*e:n%2?d+=.5*e:d-=.5*e,p&&(d>1?d=1:0>d&&(d=0)),j[k++]={x:c,y:d};for(j.sort(function(a,b){return a.x-b.x}),h=new m(1,1,null),n=l;--n>-1;)g=j[n],h=new m(g.x,g.y,h);this._prev=new m(0,0,0!==h.t?h:h.next)},!0),q=c.prototype=new a,q.constructor=c,q.getRatio=function(a){var b=this._prev;if(a>b.t){for(;b.next&&a>=b.t;)b=b.next;b=b.prev}else for(;b.prev&&b.t>=a;)b=b.prev;return this._prev=b,b.v+(a-b.t)/b.gap*b.c},q.config=function(a){return new c(a)},c.ease=new c,l("Bounce",j("BounceOut",function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}),j("BounceIn",function(a){return 1/2.75>(a=1-a)?1-7.5625*a*a:2/2.75>a?1-(7.5625*(a-=1.5/2.75)*a+.75):2.5/2.75>a?1-(7.5625*(a-=2.25/2.75)*a+.9375):1-(7.5625*(a-=2.625/2.75)*a+.984375)}),j("BounceInOut",function(a){var b=.5>a;return a=b?1-2*a:2*a-1,a=1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375,b?.5*(1-a):.5*a+.5})),l("Circ",j("CircOut",function(a){return Math.sqrt(1-(a-=1)*a)}),j("CircIn",function(a){return-(Math.sqrt(1-a*a)-1)}),j("CircInOut",function(a){return 1>(a*=2)?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)})),d=function(b,c,d){var e=i("easing."+b,function(a,b){this._p1=a||1,this._p2=b||d,this._p3=this._p2/g*(Math.asin(1/this._p1)||0)},!0),f=e.prototype=new a;return f.constructor=e,f.getRatio=c,f.config=function(a,b){return new e(a,b)},e},l("Elastic",d("ElasticOut",function(a){return this._p1*Math.pow(2,-10*a)*Math.sin((a-this._p3)*g/this._p2)+1},.3),d("ElasticIn",function(a){return-(this._p1*Math.pow(2,10*(a-=1))*Math.sin((a-this._p3)*g/this._p2))},.3),d("ElasticInOut",function(a){return 1>(a*=2)?-.5*this._p1*Math.pow(2,10*(a-=1))*Math.sin((a-this._p3)*g/this._p2):.5*this._p1*Math.pow(2,-10*(a-=1))*Math.sin((a-this._p3)*g/this._p2)+1},.45)),l("Expo",j("ExpoOut",function(a){return 1-Math.pow(2,-10*a)}),j("ExpoIn",function(a){return Math.pow(2,10*(a-1))-.001}),j("ExpoInOut",function(a){return 1>(a*=2)?.5*Math.pow(2,10*(a-1)):.5*(2-Math.pow(2,-10*(a-1)))})),l("Sine",j("SineOut",function(a){return Math.sin(a*h)}),j("SineIn",function(a){return-Math.cos(a*h)+1}),j("SineInOut",function(a){return-.5*(Math.cos(Math.PI*a)-1)})),i("easing.EaseLookup",{find:function(b){return a.map[b]}},!0),k(e.SlowMo,"SlowMo","ease,"),k(c,"RoughEase","ease,"),k(b,"SteppedEase","ease,"),o},!0)}),window._gsDefine&&window._gsQueue.pop()();(window._gsQueue||(window._gsQueue=[])).push(function(){"use strict";window._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],function(a,b){var c=function(){a.call(this,"css");this._overwriteProps.length=0},d,e,f,g,h={},i=c.prototype=new a("css");i.constructor=c;c.version="1.9.7";c.API=2;c.defaultTransformPerspective=0;i="px";c.suffixMap={top:i,right:i,bottom:i,left:i,width:i,height:i,fontSize:i,padding:i,margin:i,perspective:i};var j=/(?:\d|\-\d|\.\d|\-\.\d)+/g,k=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,l=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,m=/[^\d\-\.]/g,n=/(?:\d|\-|\+|=|#|\.)*/g,o=/opacity *= *([^)]*)/,p=/opacity:([^;]*)/,q=/alpha\(opacity *=.+?\)/i,r=/^(rgb|hsl)/,s=/([A-Z])/g,t=/-([a-z])/gi,u=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,v=function(a,b){return b.toUpperCase()},w=/(?:Left|Right|Width)/i,x=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,y=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,z=/,(?=[^\)]*(?:\(|$))/gi,A=Math.PI/180,B=180/Math.PI,C={},D=document,E=D.createElement("div"),F=D.createElement("img"),G=c._internals={_specialProps:h},H=navigator.userAgent,I,J,K,L,M,N,O=function(){var a=H.indexOf("Android"),b=D.createElement("div"),c;K=H.indexOf("Safari")!==-1&&H.indexOf("Chrome")===-1&&(a===-1||Number(H.substr(a+8,1))>3);M=K&&Number(H.substr(H.indexOf("Version/")+8,1))<6;L=H.indexOf("Firefox")!==-1;/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(H);N=parseFloat(RegExp.$1);b.innerHTML="<a style='top:1px;opacity:.55;'>a</a>";c=b.getElementsByTagName("a")[0];return c?/^0.55/.test(c.style.opacity):false}(),P=function(a){return o.test(typeof a==="string"?a:(a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?parseFloat(RegExp.$1)/100:1},Q=function(a){if(window.console){console.log(a)}},R="",S="",T=function(a,b){b=b||E;var c=b.style,d,e;if(c[a]!==undefined){return a}a=a.charAt(0).toUpperCase()+a.substr(1);d=["O","Moz","ms","Ms","Webkit"];e=5;while(--e>-1&&c[d[e]+a]===undefined){}if(e>=0){S=e===3?"ms":d[e];R="-"+S.toLowerCase()+"-";return S+a}return null},U=D.defaultView?D.defaultView.getComputedStyle:function(){},V=c.getStyle=function(a,b,c,d,e){var f;if(!O)if(b==="opacity"){return P(a)}if(!d&&a.style[b]){f=a.style[b]}else if(c=c||U(a,null)){a=c.getPropertyValue(b.replace(s,"-$1").toLowerCase());f=a||c.length?a:c[b]}else if(a.currentStyle){c=a.currentStyle;f=c[b]}return e!=null&&(!f||f==="none"||f==="auto"||f==="auto auto")?e:f},W=function(a,b,c,d,e){if(d==="px"||!d){return c}if(d==="auto"||!c){return 0}var f=w.test(b),g=a,h=E.style,i=c<0,j;if(i){c=-c}if(d==="%"&&b.indexOf("border")!==-1){j=c/100*(f?a.clientWidth:a.clientHeight)}else{h.cssText="border-style:solid; border-width:0; position:absolute; line-height:0;";if(d==="%"||!g.appendChild){g=a.parentNode||D.body;h[f?"width":"height"]=c+d}else{h[f?"borderLeftWidth":"borderTopWidth"]=c+d}g.appendChild(E);j=parseFloat(E[f?"offsetWidth":"offsetHeight"]);g.removeChild(E);if(j===0&&!e){j=W(a,b,c,d,true)}}return i?-j:j},X=function(a,b,c){if(V(a,"position",c)!=="absolute"){return 0}var d=b==="left"?"Left":"Top",e=V(a,"margin"+d,c);return a["offset"+d]-(W(a,b,parseFloat(e),e.replace(n,""))||0)},Y=function(a,b){var c={},d,e;if(b=b||U(a,null)){if(d=b.length){while(--d>-1){c[b[d].replace(t,v)]=b.getPropertyValue(b[d])}}else{for(d in b){c[d]=b[d]}}}else if(b=a.currentStyle||a.style){for(d in b){c[d.replace(t,v)]=b[d]}}if(!O){c.opacity=P(a)}e=zb(a,b,false);c.rotation=e.rotation*B;c.skewX=e.skewX*B;c.scaleX=e.scaleX;c.scaleY=e.scaleY;c.x=e.x;c.y=e.y;if(yb){c.z=e.z;c.rotationX=e.rotationX*B;c.rotationY=e.rotationY*B;c.scaleZ=e.scaleZ}if(c.filters){delete c.filters}return c},Z=function(a,b,c,d,e){var f={},g=a.style,h,i,j;for(i in c){if(i!=="cssText")if(i!=="length")if(isNaN(i))if(b[i]!==(h=c[i])||e&&e[i])if(i.indexOf("Origin")===-1)if(typeof h==="number"||typeof h==="string"){f[i]=h==="auto"&&(i==="left"||i==="top")?X(a,i):(h===""||h==="auto"||h==="none")&&typeof b[i]==="string"&&b[i].replace(m,"")!==""?0:h;if(g[i]!==undefined){j=new mb(g,i,g[i],j)}}}if(d){for(i in d){if(i!=="className"){f[i]=d[i]}}}return{difs:f,firstMPT:j}},$={width:["Left","Right"],height:["Top","Bottom"]},_=["marginLeft","marginRight","marginTop","marginBottom"],ab=function(a,b,c){var d=parseFloat(b==="width"?a.offsetWidth:a.offsetHeight),e=$[b],f=e.length;c=c||U(a,null);while(--f>-1){d-=parseFloat(V(a,"padding"+e[f],c,true))||0;d-=parseFloat(V(a,"border"+e[f]+"Width",c,true))||0}return d},bb=function(a,b){if(a==null||a===""||a==="auto"||a==="auto auto"){a="0 0"}var c=a.split(" "),d=a.indexOf("left")!==-1?"0%":a.indexOf("right")!==-1?"100%":c[0],e=a.indexOf("top")!==-1?"0%":a.indexOf("bottom")!==-1?"100%":c[1];if(e==null){e="0"}else if(e==="center"){e="50%"}if(d==="center"||isNaN(parseFloat(d))){d="50%"}if(b){b.oxp=d.indexOf("%")!==-1;b.oyp=e.indexOf("%")!==-1;b.oxr=d.charAt(1)==="=";b.oyr=e.charAt(1)==="=";b.ox=parseFloat(d.replace(m,""));b.oy=parseFloat(e.replace(m,""))}return d+" "+e+(c.length>2?" "+c[2]:"")},cb=function(a,b){return typeof a==="string"&&a.charAt(1)==="="?parseInt(a.charAt(0)+"1",10)*parseFloat(a.substr(2)):parseFloat(a)-parseFloat(b)},db=function(a,b){return a==null?b:typeof a==="string"&&a.charAt(1)==="="?parseInt(a.charAt(0)+"1",10)*Number(a.substr(2))+b:parseFloat(a)},eb=function(a,b,c,d){var e=1e-6,f,g,h,i;if(a==null){i=b}else if(typeof a==="number"){i=a*A}else{f=Math.PI*2;g=a.split("_");h=Number(g[0].replace(m,""))*(a.indexOf("rad")===-1?A:1)-(a.charAt(1)==="="?0:b);if(g.length){if(d){d[c]=b+h}if(a.indexOf("short")!==-1){h=h%f;if(h!==h%(f/2)){h=h<0?h+f:h-f}}if(a.indexOf("_cw")!==-1&&h<0){h=(h+f*9999999999)%f-(h/f|0)*f}else if(a.indexOf("ccw")!==-1&&h>0){h=(h-f*9999999999)%f-(h/f|0)*f}}i=b+h}if(i<e&&i>-e){i=0}return i},fb={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},gb=function(a,b,c){a=a<0?a+1:a>1?a-1:a;return(a*6<1?b+(c-b)*a*6:a<.5?c:a*3<2?b+(c-b)*(2/3-a)*6:b)*255+.5|0},hb=function(a){var b,c,d,e,f,g;if(!a||a===""){return fb.black}if(typeof a==="number"){return[a>>16,a>>8&255,a&255]}if(a.charAt(a.length-1)===","){a=a.substr(0,a.length-1)}if(fb[a]){return fb[a]}if(a.charAt(0)==="#"){if(a.length===4){b=a.charAt(1),c=a.charAt(2),d=a.charAt(3);a="#"+b+b+c+c+d+d}a=parseInt(a.substr(1),16);return[a>>16,a>>8&255,a&255]}if(a.substr(0,3)==="hsl"){a=a.match(j);e=Number(a[0])%360/360;f=Number(a[1])/100;g=Number(a[2])/100;c=g<=.5?g*(f+1):g+f-g*f;b=g*2-c;if(a.length>3){a[3]=Number(a[3])}a[0]=gb(e+1/3,b,c);a[1]=gb(e,b,c);a[2]=gb(e-1/3,b,c);return a}a=a.match(j)||fb.transparent;a[0]=Number(a[0]);a[1]=Number(a[1]);a[2]=Number(a[2]);if(a.length>3){a[3]=Number(a[3])}return a},ib="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";for(i in fb){ib+="|"+i+"\\b"}ib=new RegExp(ib+")","gi");var jb=function(a,b,c,d){if(a==null){return function(a){return a}}var e=b?(a.match(ib)||[""])[0]:"",f=a.split(e).join("").match(l)||[],g=a.substr(0,a.indexOf(f[0])),h=a.charAt(a.length-1)===")"?")":"",i=a.indexOf(" ")!==-1?" ":",",k=f.length,m=k>0?f[0].replace(j,""):"",n;if(!k){return function(a){return a}}if(b){n=function(a){var b,j,o,p;if(typeof a==="number"){a+=m}else if(d&&z.test(a)){p=a.replace(z,"|").split("|");for(o=0;o<p.length;o++){p[o]=n(p[o])}return p.join(",")}b=(a.match(ib)||[e])[0];j=a.split(b).join("").match(l)||[];o=j.length;if(k>o--){while(++o<k){j[o]=c?j[(o-1)/2|0]:f[o]}}return g+j.join(i)+i+b+h+(a.indexOf("inset")!==-1?" inset":"")};return n}n=function(a){var b,e,j;if(typeof a==="number"){a+=m}else if(d&&z.test(a)){e=a.replace(z,"|").split("|");for(j=0;j<e.length;j++){e[j]=n(e[j])}return e.join(",")}b=a.match(l)||[];j=b.length;if(k>j--){while(++j<k){b[j]=c?b[(j-1)/2|0]:f[j]}}return g+b.join(i)+h};return n},kb=function(a){a=a.split(",");return function(b,c,d,e,f,g,h){var i=(c+"").split(" "),j;h={};for(j=0;j<4;j++){h[a[j]]=i[j]=i[j]||i[(j-1)/2>>0]}return e.parse(b,h,f,g)}},lb=G._setPluginRatio=function(a){this.plugin.setRatio(a);var b=this.data,c=b.proxy,d=b.firstMPT,e=1e-6,f,g,h,i;while(d){f=c[d.v];if(d.r){f=f>0?f+.5|0:f-.5|0}else if(f<e&&f>-e){f=0}d.t[d.p]=f;d=d._next}if(b.autoRotate){b.autoRotate.rotation=c.rotation}if(a===1){d=b.firstMPT;while(d){g=d.t;if(!g.type){g.e=g.s+g.xs0}else if(g.type===1){i=g.xs0+g.s+g.xs1;for(h=1;h<g.l;h++){i+=g["xn"+h]+g["xs"+(h+1)]}g.e=i}d=d._next}}},mb=function(a,b,c,d,e){this.t=a;this.p=b;this.v=c;this.r=e;if(d){d._prev=this;this._next=d}},nb=G._parseToProxy=function(a,b,c,d,e,f){var g=d,h={},i={},j=c._transform,k=C,l,m,n,o,p;c._transform=null;C=b;d=p=c.parse(a,b,d,e);C=k;if(f){c._transform=j;if(g){g._prev=null;if(g._prev){g._prev._next=null}}}while(d&&d!==g){if(d.type<=1){m=d.p;i[m]=d.s+d.c;h[m]=d.s;if(!f){o=new mb(d,"s",m,o,d.r);d.c=0}if(d.type===1){l=d.l;while(--l>0){n="xn"+l;m=d.p+"_"+n;i[m]=d.data[n];h[m]=d[n];if(!f){o=new mb(d,n,m,o,d.rxp[n])}}}}d=d._next}return{proxy:h,end:i,firstMPT:o,pt:p}},ob=G.CSSPropTween=function(a,b,c,e,f,h,i,j,k,l,m){this.t=a;this.p=b;this.s=c;this.c=e;this.n=i||"css_"+b;if(!(a instanceof ob)){g.push(this.n)}this.r=j;this.type=h||0;if(k){this.pr=k;d=true}this.b=l===undefined?c:l;this.e=m===undefined?c+e:m;if(f){this._next=f;f._prev=this}},pb=c.parseComplex=function(a,b,c,d,e,f,g,h,i,l){c=c||f||"";g=new ob(a,b,0,0,g,l?2:1,null,false,h,c,d);d+="";var m=c.split(", ").join(",").split(" "),n=d.split(", ").join(",").split(" "),o=m.length,p=I!==false,q,s,t,u,v,w,x,y,A,B,C,D;if(d.indexOf(",")!==-1||c.indexOf(",")!==-1){m=m.join(" ").replace(z,", ").split(" ");n=n.join(" ").replace(z,", ").split(" ");o=m.length}if(o!==n.length){m=(f||"").split(" ");o=m.length}g.plugin=i;g.setRatio=l;for(q=0;q<o;q++){u=m[q];v=n[q];y=parseFloat(u);if(y||y===0){g.appendXtra("",y,cb(v,y),v.replace(k,""),p&&v.indexOf("px")!==-1,true)}else if(e&&(u.charAt(0)==="#"||fb[u]||r.test(u))){D=v.charAt(v.length-1)===","?"),":")";u=hb(u);v=hb(v);A=u.length+v.length>6;if(A&&!O&&v[3]===0){g["xs"+g.l]+=g.l?" transparent":"transparent";g.e=g.e.split(n[q]).join("transparent")}else{if(!O){A=false}g.appendXtra(A?"rgba(":"rgb(",u[0],v[0]-u[0],",",true,true).appendXtra("",u[1],v[1]-u[1],",",true).appendXtra("",u[2],v[2]-u[2],A?",":D,true);if(A){u=u.length<4?1:u[3];g.appendXtra("",u,(v.length<4?1:v[3])-u,D,false)}}}else{w=u.match(j);if(!w){g["xs"+g.l]+=g.l?" "+u:u}else{x=v.match(k);if(!x||x.length!==w.length){return g}t=0;for(s=0;s<w.length;s++){C=w[s];B=u.indexOf(C,t);g.appendXtra(u.substr(t,B-t),Number(C),cb(x[s],C),"",p&&u.substr(B+C.length,2)==="px",s===0);t=B+C.length}g["xs"+g.l]+=u.substr(t)}}}if(d.indexOf("=")!==-1)if(g.data){D=g.xs0+g.data.s;for(q=1;q<g.l;q++){D+=g["xs"+q]+g.data["xn"+q]}g.e=D+g["xs"+q]}if(!g.l){g.type=-1;g.xs0=g.e}return g.xfirst||g},qb=9;i=ob.prototype;i.l=i.pr=0;while(--qb>0){i["xn"+qb]=0;i["xs"+qb]=""}i.xs0="";i._next=i._prev=i.xfirst=i.data=i.plugin=i.setRatio=i.rxp=null;i.appendXtra=function(a,b,c,d,e,f){var g=this,h=g.l;g["xs"+h]+=f&&h?" "+a:a||"";if(!c)if(h!==0&&!g.plugin){g["xs"+h]+=b+(d||"");return g}g.l++;g.type=g.setRatio?2:1;g["xs"+g.l]=d||"";if(h>0){g.data["xn"+h]=b+c;g.rxp["xn"+h]=e;g["xn"+h]=b;if(!g.plugin){g.xfirst=new ob(g,"xn"+h,b,c,g.xfirst||g,0,g.n,e,g.pr);g.xfirst.xs0=0}return g}g.data={s:b+c};g.rxp={};g.s=b;g.c=c;g.r=e;return g};var rb=function(a,b){b=b||{};this.p=b.prefix?T(a)||a:a;h[a]=h[this.p]=this;this.format=b.formatter||jb(b.defaultValue,b.color,b.collapsible,b.multi);if(b.parser){this.parse=b.parser}this.clrs=b.color;this.multi=b.multi;this.keyword=b.keyword;this.dflt=b.defaultValue;this.pr=b.priority||0},sb=G._registerComplexSpecialProp=function(a,b,c){if(typeof b!=="object"){b={parser:c}}var d=a.split(","),e=b.defaultValue,f,g;c=c||[e];for(f=0;f<d.length;f++){b.prefix=f===0&&b.prefix;b.defaultValue=c[f]||e;g=new rb(d[f],b)}},tb=function(a){if(!h[a]){var b=a.charAt(0).toUpperCase()+a.substr(1)+"Plugin";sb(a,{parser:function(a,c,d,e,f,g,i){var j=(window.GreenSockGlobals||window).com.greensock.plugins[b];if(!j){Q("Error: "+b+" js file not loaded.");return f}j._cssRegister();return h[d].parse(a,c,d,e,f,g,i)}})}};i=rb.prototype;i.parseComplex=function(a,b,c,d,e,f){var g=this.keyword,h,i,j,k,l,m;if(this.multi)if(z.test(c)||z.test(b)){i=b.replace(z,"|").split("|");j=c.replace(z,"|").split("|")}else if(g){i=[b];j=[c]}if(j){k=j.length>i.length?j.length:i.length;for(h=0;h<k;h++){b=i[h]=i[h]||this.dflt;c=j[h]=j[h]||this.dflt;if(g){l=b.indexOf(g);m=c.indexOf(g);if(l!==m){c=m===-1?j:i;c[h]+=" "+g}}}b=i.join(", ");c=j.join(", ")}return pb(a,this.p,b,c,this.clrs,this.dflt,d,this.pr,e,f)};i.parse=function(a,b,c,d,e,g,h){return this.parseComplex(a.style,this.format(V(a,this.p,f,false,this.dflt)),this.format(b),e,g)};c.registerSpecialProp=function(a,b,c){sb(a,{parser:function(a,d,e,f,g,h,i){var j=new ob(a,e,0,0,g,2,e,false,c);j.plugin=h;j.setRatio=b(a,d,f._tween,e);return j},priority:c})};var ub="scaleX,scaleY,scaleZ,x,y,z,skewX,rotation,rotationX,rotationY,perspective".split(","),vb=T("transform"),wb=R+"transform",xb=T("transformOrigin"),yb=T("perspective")!==null,zb=function(a,b,d){var e=d?a._gsTransform||{skewY:0}:{skewY:0},f=e.scaleX<0,g=2e-5,h=1e5,i=-Math.PI+1e-4,j=Math.PI-1e-4,k=yb?parseFloat(V(a,xb,b,false,"0 0 0").split(" ")[2])||e.zOrigin||0:0,l,m,n,o,p,q,r,s,t,u,v,w,y;if(vb){l=V(a,wb,b,true)}else if(a.currentStyle){l=a.currentStyle.filter.match(x);if(l&&l.length===4){l=[l[0].substr(4),Number(l[2].substr(4)),Number(l[1].substr(4)),l[3].substr(4),e.x||0,e.y||0].join(",")}else if(e.x!=null){return e}else{l=""}}m=(l||"").match(/(?:\-|\b)[\d\-\.e]+\b/gi)||[];n=m.length;while(--n>-1){o=Number(m[n]);m[n]=(p=o-(o|=0))?(p*h+(p<0?-.5:.5)|0)/h+o:o}if(m.length===16){var z=m[8],A=m[9],B=m[10],C=m[12],D=m[13],E=m[14];if(e.zOrigin){E=-e.zOrigin;C=z*E-m[12];D=A*E-m[13];E=B*E+e.zOrigin-m[14]}if(!d||e.rotationX==null){var F=m[0],G=m[1],H=m[2],I=m[3],J=m[4],K=m[5],L=m[6],M=m[7],N=m[11],O=e.rotationX=Math.atan2(L,B),P=O<i||O>j,Q,R,S,T,U,W,X;if(O){T=Math.cos(-O);U=Math.sin(-O);Q=J*T+z*U;R=K*T+A*U;S=L*T+B*U;z=J*-U+z*T;A=K*-U+A*T;B=L*-U+B*T;N=M*-U+N*T;J=Q;K=R;L=S}O=e.rotationY=Math.atan2(z,F);if(O){W=O<i||O>j;T=Math.cos(-O);U=Math.sin(-O);Q=F*T-z*U;R=G*T-A*U;S=H*T-B*U;A=G*U+A*T;B=H*U+B*T;N=I*U+N*T;F=Q;G=R;H=S}O=e.rotation=Math.atan2(G,K);if(O){X=O<i||O>j;T=Math.cos(-O);U=Math.sin(-O);F=F*T+J*U;R=G*T+K*U;K=G*-U+K*T;L=H*-U+L*T;G=R}if(X&&P){e.rotation=e.rotationX=0}else if(X&&W){e.rotation=e.rotationY=0}else if(W&&P){e.rotationY=e.rotationX=0}e.scaleX=(Math.sqrt(F*F+G*G)*h+.5|0)/h;e.scaleY=(Math.sqrt(K*K+A*A)*h+.5|0)/h;e.scaleZ=(Math.sqrt(L*L+B*B)*h+.5|0)/h;e.skewX=0;e.perspective=N?1/(N<0?-N:N):0;e.x=C;e.y=D;e.z=E}}else if((!yb||m.length===0||e.x!==m[4]||e.y!==m[5]||!e.rotationX&&!e.rotationY)&&!(e.x!==undefined&&V(a,"display",b)==="none")){var Y=m.length>=6,Z=Y?m[0]:1,$=m[1]||0,_=m[2]||0,ab=Y?m[3]:1;e.x=m[4]||0;e.y=m[5]||0;q=Math.sqrt(Z*Z+$*$);r=Math.sqrt(ab*ab+_*_);s=Z||$?Math.atan2($,Z):e.rotation||0;t=_||ab?Math.atan2(_,ab)+s:e.skewX||0;u=q-Math.abs(e.scaleX||0);v=r-Math.abs(e.scaleY||0);if(Math.abs(t)>Math.PI/2&&Math.abs(t)<Math.PI*1.5){if(f){q*=-1;t+=s<=0?Math.PI:-Math.PI;s+=s<=0?Math.PI:-Math.PI}else{r*=-1;t+=t<=0?Math.PI:-Math.PI}}w=(s-e.rotation)%Math.PI;y=(t-e.skewX)%Math.PI;if(e.skewX===undefined||u>g||u<-g||v>g||v<-g||w>i&&w<j&&w*h|0!==0||y>i&&y<j&&y*h|0!==0){e.scaleX=q;e.scaleY=r;e.rotation=s;e.skewX=t}if(yb){e.rotationX=e.rotationY=e.z=0;e.perspective=parseFloat(c.defaultTransformPerspective)||0;e.scaleZ=1}}e.zOrigin=k;for(n in e){if(e[n]<g)if(e[n]>-g){e[n]=0}}if(d){a._gsTransform=e}return e},Ab=function(a){var b=this.data,c=-b.rotation,d=c+b.skewX,e=1e5,f=(Math.cos(c)*b.scaleX*e|0)/e,g=(Math.sin(c)*b.scaleX*e|0)/e,h=(Math.sin(d)*-b.scaleY*e|0)/e,i=(Math.cos(d)*b.scaleY*e|0)/e,j=this.t.style,k=this.t.currentStyle,l,m;if(!k){return}m=g;g=-h;h=-m;l=k.filter;j.filter="";var p=this.t.offsetWidth,q=this.t.offsetHeight,r=k.position!=="absolute",s="progid:DXImageTransform.Microsoft.Matrix(M11="+f+", M12="+g+", M21="+h+", M22="+i,t=b.x,u=b.y,v,w;if(b.ox!=null){v=(b.oxp?p*b.ox*.01:b.ox)-p/2;w=(b.oyp?q*b.oy*.01:b.oy)-q/2;t+=v-(v*f+w*g);u+=w-(v*h+w*i)}if(!r){var x=N<8?1:-1,z,A,B;v=b.ieOffsetX||0;w=b.ieOffsetY||0;b.ieOffsetX=Math.round((p-((f<0?-f:f)*p+(g<0?-g:g)*q))/2+t);b.ieOffsetY=Math.round((q-((i<0?-i:i)*q+(h<0?-h:h)*p))/2+u);for(qb=0;qb<4;qb++){A=_[qb];z=k[A];m=z.indexOf("px")!==-1?parseFloat(z):W(this.t,A,parseFloat(z),z.replace(n,""))||0;if(m!==b[A]){B=qb<2?-b.ieOffsetX:-b.ieOffsetY}else{B=qb<2?v-b.ieOffsetX:w-b.ieOffsetY}j[A]=(b[A]=Math.round(m-B*(qb===0||qb===2?1:x)))+"px"}s+=", sizingMethod='auto expand')"}else{v=p/2;w=q/2;s+=", Dx="+(v-(v*f+w*g)+t)+", Dy="+(w-(v*h+w*i)+u)+")"}if(l.indexOf("DXImageTransform.Microsoft.Matrix(")!==-1){j.filter=l.replace(y,s)}else{j.filter=s+" "+l}if(a===0||a===1)if(f===1)if(g===0)if(h===0)if(i===1)if(!r||s.indexOf("Dx=0, Dy=0")!==-1)if(!o.test(l)||parseFloat(RegExp.$1)===100)if(l.indexOf("gradient(")===-1){j.removeAttribute("filter")}},Bb=function(a){var b=this.data,c=this.t.style,d=b.perspective,e=b.scaleX,f=0,g=0,h=0,i=0,j=b.scaleY,k=0,l=0,m=0,n=0,o=b.scaleZ,p=0,q=0,r=0,s=d?-1/d:0,t=b.rotation,u=b.zOrigin,v=1e5,w,x,y,z,A,B,C,D,E;if(L){C=c.top?"top":c.bottom?"bottom":parseFloat(V(this.t,"top",null,false))?"bottom":"top";y=V(this.t,C,null,false);D=parseFloat(y)||0;E=y.substr((D+"").length)||"px";b._ffFix=!b._ffFix;c[C]=(b._ffFix?D+.05:D-.05)+E}if(t||b.skewX){y=e*Math.cos(t);z=j*Math.sin(t);t-=b.skewX;f=e*-Math.sin(t);j=j*Math.cos(t);e=y;i=z}t=b.rotationY;if(t){w=Math.cos(t);x=Math.sin(t);y=e*w;z=i*w;A=o*-x;B=s*-x;g=e*x;k=i*x;o=o*w;s*=w;e=y;i=z;m=A;q=B}t=b.rotationX;if(t){w=Math.cos(t);x=Math.sin(t);y=f*w+g*x;z=j*w+k*x;A=n*w+o*x;B=r*w+s*x;g=f*-x+g*w;k=j*-x+k*w;o=n*-x+o*w;s=r*-x+s*w;f=y;j=z;n=A;r=B}if(u){p-=u;h=g*p;l=k*p;p=o*p+u}h=(y=(h+=b.x)-(h|=0))?(y*v+(y<0?-.5:.5)|0)/v+h:h;l=(y=(l+=b.y)-(l|=0))?(y*v+(y<0?-.5:.5)|0)/v+l:l;p=(y=(p+=b.z)-(p|=0))?(y*v+(y<0?-.5:.5)|0)/v+p:p;c[vb]="matrix3d("+[(e*v|0)/v,(i*v|0)/v,(m*v|0)/v,(q*v|0)/v,(f*v|0)/v,(j*v|0)/v,(n*v|0)/v,(r*v|0)/v,(g*v|0)/v,(k*v|0)/v,(o*v|0)/v,(s*v|0)/v,h,l,p,d?1+-p/d:1].join(",")+")"},Cb=function(a){var b=this.data,c=this.t,d=c.style,e,f,g,h,i,j,k,l,m;if(L){e=d.top?"top":d.bottom?"bottom":parseFloat(V(c,"top",null,false))?"bottom":"top";f=V(c,e,null,false);g=parseFloat(f)||0;h=f.substr((g+"").length)||"px";b._ffFix=!b._ffFix;d[e]=(b._ffFix?g+.05:g-.05)+h}if(!b.rotation&&!b.skewX){d[vb]="matrix("+b.scaleX+",0,0,"+b.scaleY+","+b.x+","+b.y+")"}else{i=b.rotation;j=i-b.skewX;k=1e5;l=b.scaleX*k;m=b.scaleY*k;d[vb]="matrix("+(Math.cos(i)*l|0)/k+","+(Math.sin(i)*l|0)/k+","+(Math.sin(j)*-m|0)/k+","+(Math.cos(j)*m|0)/k+","+b.x+","+b.y+")"}};sb("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation",{parser:function(a,b,c,d,e,g,h){if(d._transform){return e}var i=d._transform=zb(a,f,true),j=a.style,k=1e-6,l=ub.length,m=h,n={},o,p,q,r,s,t,u;if(typeof m.transform==="string"&&vb){q=j.cssText;j[vb]=m.transform;j.display="block";o=zb(a,null,false);j.cssText=q}else if(typeof m==="object"){o={scaleX:db(m.scaleX!=null?m.scaleX:m.scale,i.scaleX),scaleY:db(m.scaleY!=null?m.scaleY:m.scale,i.scaleY),scaleZ:db(m.scaleZ!=null?m.scaleZ:m.scale,i.scaleZ),x:db(m.x,i.x),y:db(m.y,i.y),z:db(m.z,i.z),perspective:db(m.transformPerspective,i.perspective)};u=m.directionalRotation;if(u!=null){if(typeof u==="object"){for(q in u){m[q]=u[q]}}else{m.rotation=u}}o.rotation=eb("rotation"in m?m.rotation:"shortRotation"in m?m.shortRotation+"_short":"rotationZ"in m?m.rotationZ:i.rotation*B,i.rotation,"rotation",n);if(yb){o.rotationX=eb("rotationX"in m?m.rotationX:"shortRotationX"in m?m.shortRotationX+"_short":i.rotationX*B||0,i.rotationX,"rotationX",n);o.rotationY=eb("rotationY"in m?m.rotationY:"shortRotationY"in m?m.shortRotationY+"_short":i.rotationY*B||0,i.rotationY,"rotationY",n)}o.skewX=m.skewX==null?i.skewX:eb(m.skewX,i.skewX);o.skewY=m.skewY==null?i.skewY:eb(m.skewY,i.skewY);if(p=o.skewY-i.skewY){o.skewX+=p;o.rotation+=p}}s=i.z||i.rotationX||i.rotationY||o.z||o.rotationX||o.rotationY||o.perspective;if(!s&&m.scale!=null){o.scaleZ=1}while(--l>-1){c=ub[l];r=o[c]-i[c];if(r>k||r<-k||C[c]!=null){t=true;e=new ob(i,c,i[c],r,e);if(c in n){e.e=n[c]}e.xs0=0;e.plugin=g;d._overwriteProps.push(e.n)}}r=m.transformOrigin;if(r||yb&&s&&i.zOrigin){if(vb){t=true;r=(r||V(a,c,f,false,"50% 50%"))+"";c=xb;e=new ob(j,c,0,0,e,-1,"css_transformOrigin");e.b=j[c];e.plugin=g;if(yb){q=i.zOrigin;r=r.split(" ");i.zOrigin=(r.length>2?parseFloat(r[2]):q)||0;e.xs0=e.e=j[c]=r[0]+" "+(r[1]||"50%")+" 0px";e=new ob(i,"zOrigin",0,0,e,-1,e.n);e.b=q;e.xs0=e.e=i.zOrigin}else{e.xs0=e.e=j[c]=r}}else{bb(r+"",i)}}if(t){d._transformType=s||this._transformType===3?3:2}return e},prefix:true});sb("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:true,color:true,multi:true,keyword:"inset"});sb("borderRadius",{defaultValue:"0px",parser:function(a,b,c,d,g,h){b=this.format(b);var i=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],j=a.style,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z;s=parseFloat(a.offsetWidth);t=parseFloat(a.offsetHeight);k=b.split(" ");for(l=0;l<i.length;l++){if(this.p.indexOf("border")){i[l]=T(i[l])}o=n=V(a,i[l],f,false,"0px");if(o.indexOf(" ")!==-1){n=o.split(" ");o=n[0];n=n[1]}p=m=k[l];q=parseFloat(o);v=o.substr((q+"").length);w=p.charAt(1)==="=";if(w){r=parseInt(p.charAt(0)+"1",10);p=p.substr(2);r*=parseFloat(p);u=p.substr((r+"").length-(r<0?1:0))||""}else{r=parseFloat(p);u=p.substr((r+"").length)}if(u===""){u=e[c]||v}if(u!==v){x=W(a,"borderLeft",q,v);y=W(a,"borderTop",q,v);if(u==="%"){o=x/s*100+"%";n=y/t*100+"%"}else if(u==="em"){z=W(a,"borderLeft",1,"em");o=x/z+"em";n=y/z+"em"}else{o=x+"px";n=y+"px"}if(w){p=parseFloat(o)+r+u;m=parseFloat(n)+r+u}}g=pb(j,i[l],o+" "+n,p+" "+m,false,"0px",g)}return g},prefix:true,formatter:jb("0px 0px 0px 0px",false,true)});sb("backgroundPosition",{defaultValue:"0 0",parser:function(a,b,c,d,e,g){var h="background-position",i=f||U(a,null),j=this.format((i?N?i.getPropertyValue(h+"-x")+" "+i.getPropertyValue(h+"-y"):i.getPropertyValue(h):a.currentStyle.backgroundPositionX+" "+a.currentStyle.backgroundPositionY)||"0 0"),k=this.format(b),l,m,n,o,p,q;if(j.indexOf("%")!==-1!==(k.indexOf("%")!==-1)){q=V(a,"backgroundImage").replace(u,"");if(q&&q!=="none"){l=j.split(" ");m=k.split(" ");F.setAttribute("src",q);n=2;while(--n>-1){j=l[n];o=j.indexOf("%")!==-1;if(o!==(m[n].indexOf("%")!==-1)){p=n===0?a.offsetWidth-F.width:a.offsetHeight-F.height;l[n]=o?parseFloat(j)/100*p+"px":parseFloat(j)/p*100+"%"}}j=l.join(" ")}}return this.parseComplex(a.style,j,k,e,g)},formatter:bb});sb("backgroundSize",{defaultValue:"0 0",formatter:bb});sb("perspective",{defaultValue:"0px",prefix:true});sb("perspectiveOrigin",{defaultValue:"50% 50%",prefix:true});sb("transformStyle",{prefix:true});sb("backfaceVisibility",{prefix:true});sb("margin",{parser:kb("marginTop,marginRight,marginBottom,marginLeft")});sb("padding",{parser:kb("paddingTop,paddingRight,paddingBottom,paddingLeft")});sb("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(a,b,c,d,e,g){var h,i,j;if(N<9){i=a.currentStyle;j=N<8?" ":",";h="rect("+i.clipTop+j+i.clipRight+j+i.clipBottom+j+i.clipLeft+")";b=this.format(b).split(",").join(j)}else{h=this.format(V(a,this.p,f,false,this.dflt));b=this.format(b)}return this.parseComplex(a.style,h,b,e,g)}});sb("textShadow",{defaultValue:"0px 0px 0px #999",color:true,multi:true});sb("autoRound,strictUnits",{parser:function(a,b,c,d,e){return e}});sb("border",{defaultValue:"0px solid #000",parser:function(a,b,c,d,e,g){return this.parseComplex(a.style,this.format(V(a,"borderTopWidth",f,false,"0px")+" "+V(a,"borderTopStyle",f,false,"solid")+" "+V(a,"borderTopColor",f,false,"#000")),this.format(b),e,g)},color:true,formatter:function(a){var b=a.split(" ");return b[0]+" "+(b[1]||"solid")+" "+(a.match(ib)||["#000"])[0]}});sb("float,cssFloat,styleFloat",{parser:function(a,b,c,d,e,f){var g=a.style,h="cssFloat"in g?"cssFloat":"styleFloat";return new ob(g,h,0,0,e,-1,c,false,0,g[h],b)}});var Db=function(a){var b=this.t,c=b.filter,d=this.s+this.c*a|0,e;if(d===100){if(c.indexOf("atrix(")===-1&&c.indexOf("radient(")===-1){b.removeAttribute("filter");e=!V(this.data,"filter")}else{b.filter=c.replace(q,"");e=true}}if(!e){if(this.xn1){b.filter=c=c||"alpha(opacity=100)"}if(c.indexOf("opacity")===-1){b.filter+=" alpha(opacity="+d+")"}else{b.filter=c.replace(o,"opacity="+d)}}};sb("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(a,b,c,d,e,g){var h=parseFloat(V(a,"opacity",f,false,"1")),i=a.style,j;b=parseFloat(b);if(c==="autoAlpha"){j=V(a,"visibility",f);if(h===1&&j==="hidden"&&b!==0){h=0}e=new ob(i,"visibility",0,0,e,-1,null,false,0,h!==0?"visible":"hidden",b===0?"hidden":"visible");e.xs0="visible";d._overwriteProps.push(e.n)}if(O){e=new ob(i,"opacity",h,b-h,e)}else{e=new ob(i,"opacity",h*100,(b-h)*100,e);e.xn1=c==="autoAlpha"?1:0;i.zoom=1;e.type=2;e.b="alpha(opacity="+e.s+")";e.e="alpha(opacity="+(e.s+e.c)+")";e.data=a;e.plugin=g;e.setRatio=Db}return e}});var Eb=function(a,b){if(b){if(a.removeProperty){a.removeProperty(b.replace(s,"-$1").toLowerCase())}else{a.removeAttribute(b)}}},Fb=function(a){this.t._gsClassPT=this;if(a===1||a===0){this.t.className=a===0?this.b:this.e;var b=this.data,c=this.t.style;while(b){if(!b.v){Eb(c,b.p)}else{c[b.p]=b.v}b=b._next}if(a===1&&this.t._gsClassPT===this){this.t._gsClassPT=null}}else if(this.t.className!==this.e){this.t.className=this.e}};sb("className",{parser:function(a,b,c,e,g,h,i){var j=a.className,k=a.style.cssText,l,m,n,o,p;g=e._classNamePT=new ob(a,c,0,0,g,2);g.setRatio=Fb;g.pr=-11;d=true;g.b=j;m=Y(a,f);n=a._gsClassPT;if(n){o={};p=n.data;while(p){o[p.p]=1;p=p._next}n.setRatio(1)}a._gsClassPT=g;g.e=b.charAt(1)!=="="?b:j.replace(new RegExp("\\s*\\b"+b.substr(2)+"\\b"),"")+(b.charAt(0)==="+"?" "+b.substr(2):"");if(e._tween._duration){a.className=g.e;l=Z(a,m,Y(a),i,o);a.className=j;g.data=l.firstMPT;a.style.cssText=k;g=g.xfirst=e.parse(a,l.difs,g,h)}return g}});var Gb=function(a){if(a===1||a===0)if(this.data._totalTime===this.data._totalDuration){var b=this.e==="all",c=this.t.style,d=b?c.cssText.split(";"):this.e.split(","),e=d.length,f=h.transform.parse,g;while(--e>-1){g=d[e];if(b){g=g.substr(0,g.indexOf(":")).split(" ").join("")}if(h[g]){g=h[g].parse===f?vb:h[g].p}Eb(c,g)}}};sb("clearProps",{parser:function(a,b,c,e,f){f=new ob(a,c,0,0,f,2);f.setRatio=Gb;f.e=b;f.pr=-10;f.data=e._tween;d=true;return f}});i="bezier,throwProps,physicsProps,physics2D".split(",");qb=i.length;while(qb--){tb(i[qb])}i=c.prototype;i._firstPT=null;i._onInitTween=function(a,b,h){if(!a.nodeType){return false}this._target=a;this._tween=h;this._vars=b;I=b.autoRound;d=false;e=b.suffixMap||c.suffixMap;f=U(a,"");g=this._overwriteProps;var i=a.style,j,k,l,m,n,o,q,r,s;if(J)if(i.zIndex===""){j=V(a,"zIndex",f);if(j==="auto"||j===""){i.zIndex=0}}if(typeof b==="string"){m=i.cssText;j=Y(a,f);i.cssText=m+";"+b;j=Z(a,j,Y(a)).difs;if(!O&&p.test(b)){j.opacity=parseFloat(RegExp.$1)}b=j;i.cssText=m}this._firstPT=k=this.parse(a,b,null);if(this._transformType){s=this._transformType===3;if(!vb){i.zoom=1}else if(K){J=true;if(i.zIndex===""){q=V(a,"zIndex",f);if(q==="auto"||q===""){i.zIndex=0}}if(M){i.WebkitBackfaceVisibility=this._vars.WebkitBackfaceVisibility||(s?"visible":"hidden")}}l=k;while(l&&l._next){l=l._next}r=new ob(a,"transform",0,0,null,2);this._linkCSSP(r,null,l);r.setRatio=s&&yb?Bb:vb?Cb:Ab;r.data=this._transform||zb(a,f,true);g.pop()}if(d){while(k){o=k._next;l=m;while(l&&l.pr>k.pr){l=l._next}if(k._prev=l?l._prev:n){k._prev._next=k}else{m=k}if(k._next=l){l._prev=k}else{n=k}k=o}this._firstPT=m}return true};i.parse=function(a,b,c,d){var g=a.style,i,j,k,l,m,o,p,q,s,t;for(i in b){o=b[i];j=h[i];if(j){c=j.parse(a,o,i,this,c,d,b)}else{m=V(a,i,f)+"";s=typeof o==="string";if(i==="color"||i==="fill"||i==="stroke"||i.indexOf("Color")!==-1||s&&r.test(o)){if(!s){o=hb(o);o=(o.length>3?"rgba(":"rgb(")+o.join(",")+")"}c=pb(g,i,m,o,true,"transparent",c,0,d)}else if(s&&(o.indexOf(" ")!==-1||o.indexOf(",")!==-1)){c=pb(g,i,m,o,true,null,c,0,d)}else{k=parseFloat(m);p=k||k===0?m.substr((k+"").length):"";if(m===""||m==="auto"){if(i==="width"||i==="height"){k=ab(a,i,f);p="px"}else if(i==="left"||i==="top"){k=X(a,i,f);p="px"}else{k=i!=="opacity"?0:1;p=""}}t=s&&o.charAt(1)==="=";if(t){l=parseInt(o.charAt(0)+"1",10);o=o.substr(2);l*=parseFloat(o);q=o.replace(n,"")}else{l=parseFloat(o);q=s?o.substr((l+"").length)||"":""}if(q===""){q=e[i]||p}o=l||l===0?(t?l+k:l)+q:b[i];if(p!==q)if(q!=="")if(l||l===0)if(k||k===0){k=W(a,i,k,p);if(q==="%"){k/=W(a,i,100,"%")/100;if(k>100){k=100}if(b.strictUnits!==true){m=k+"%"}}else if(q==="em"){k/=W(a,i,1,"em")}else{l=W(a,i,l,q);q="px"}if(t)if(l||l===0){o=l+k+q}}if(t){l+=k}if((k||k===0)&&(l||l===0)){c=new ob(g,i,k,l-k,c,0,"css_"+i,I!==false&&(q==="px"||i==="zIndex"),0,m,o);
c.xs0=q}else if(g[i]===undefined||!o&&(o+""==="NaN"||o==null)){Q("invalid "+i+" tween value: "+b[i])}else{c=new ob(g,i,l||k||0,0,c,-1,"css_"+i,false,0,m,o);c.xs0=o==="none"&&(i==="display"||i.indexOf("Style")!==-1)?m:o}}}if(d)if(c&&!c.plugin){c.plugin=d}}return c};i.setRatio=function(a){var b=this._firstPT,c=1e-6,d,e,f;if(a===1&&(this._tween._time===this._tween._duration||this._tween._time===0)){while(b){if(b.type!==2){b.t[b.p]=b.e}else{b.setRatio(a)}b=b._next}}else if(a||!(this._tween._time===this._tween._duration||this._tween._time===0)||this._tween._rawPrevTime===-1e-6){while(b){d=b.c*a+b.s;if(b.r){d=d>0?d+.5|0:d-.5|0}else if(d<c)if(d>-c){d=0}if(!b.type){b.t[b.p]=d+b.xs0}else if(b.type===1){f=b.l;if(f===2){b.t[b.p]=b.xs0+d+b.xs1+b.xn1+b.xs2}else if(f===3){b.t[b.p]=b.xs0+d+b.xs1+b.xn1+b.xs2+b.xn2+b.xs3}else if(f===4){b.t[b.p]=b.xs0+d+b.xs1+b.xn1+b.xs2+b.xn2+b.xs3+b.xn3+b.xs4}else if(f===5){b.t[b.p]=b.xs0+d+b.xs1+b.xn1+b.xs2+b.xn2+b.xs3+b.xn3+b.xs4+b.xn4+b.xs5}else{e=b.xs0+d+b.xs1;for(f=1;f<b.l;f++){e+=b["xn"+f]+b["xs"+(f+1)]}b.t[b.p]=e}}else if(b.type===-1){b.t[b.p]=b.xs0}else if(b.setRatio){b.setRatio(a)}b=b._next}}else{while(b){if(b.type!==2){b.t[b.p]=b.b}else{b.setRatio(a)}b=b._next}}};i._enableTransforms=function(a){this._transformType=a||this._transformType===3?3:2};i._linkCSSP=function(a,b,c,d){if(a){if(b){b._prev=a}if(a._next){a._next._prev=a._prev}if(c){c._next=a}else if(!d&&this._firstPT===null){this._firstPT=a}if(a._prev){a._prev._next=a._next}else if(this._firstPT===a){this._firstPT=a._next}a._next=b;a._prev=c}return a};i._kill=function(b){var c=b,d,e,f;if(b.css_autoAlpha||b.css_alpha){c={};for(e in b){c[e]=b[e]}c.css_opacity=1;if(c.css_autoAlpha){c.css_visibility=1}}if(b.css_className&&(d=this._classNamePT)){f=d.xfirst;if(f&&f._prev){this._linkCSSP(f._prev,d._next,f._prev._prev)}else if(f===this._firstPT){this._firstPT=d._next}if(d._next){this._linkCSSP(d._next,d._next._next,f._prev)}this._classNamePT=null}return a.prototype._kill.call(this,c)};var Hb=function(a,b,c){var d,e,f,g;if(a.slice){e=a.length;while(--e>-1){Hb(a[e],b,c)}return}d=a.childNodes;e=d.length;while(--e>-1){f=d[e];g=f.type;if(f.style){b.push(Y(f));if(c){c.push(f)}}if((g===1||g===9||g===11)&&f.childNodes.length){Hb(f,b,c)}}};c.cascadeTo=function(a,c,d){var e=b.to(a,c,d),f=[e],g=[],h=[],i=[],j=b._internals.reservedProps,k,l,m;a=e._targets||e.target;Hb(a,g,i);e.render(c,true);Hb(a,h);e.render(0,true);e._enabled(true);k=i.length;while(--k>-1){l=Z(i[k],g[k],h[k]);if(l.firstMPT){l=l.difs;for(m in d){if(j[m]){l[m]=d[m]}}f.push(b.to(i[k],c,l))}}return f};a.activate([c]);return c},true)});if(window._gsDefine){window._gsQueue.pop()()}!function(){var a=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)Z$/;JSON._parse=JSON.parse;JSON.parse=function(b){return JSON._parse(b,function(b,c){if(typeof c==="string"){if(a.exec(c)){return new Date(c)}}return c})};if(window.jQuery!==undefined){jQuery.parseJSON=JSON.parse;jQuery.ajaxSettings.converters["text json"]=JSON.parse}}();var http={};!function(){function a(a,b,c,d,e){var f;if(XMLHttpRequest){f=new XMLHttpRequest}else{f=new ActiveXObject("Microsoft.XMLHTTP")}f.open(a,b,true);f.setRequestHeader("Content-Type","application/json;charset=UTF-8");f.setRequestHeader("If-None-Match","some-random-string");f.setRequestHeader("Cache-Control","no-cache,max-age=0");f.setRequestHeader("Pragma","no-cache");f.onreadystatechange=function(){if(f.readyState===4){var a=f.responseText;try{a=JSON.parse(a)}catch(b){}var g=Array.prototype.slice.call(arguments);g.unshift(a);g.push(f);if(f.status===200&&typeof c==="function"){c.apply(e||f,g)}else if(typeof d==="function"){d.apply(e||f,g)}else{if(console){console.warn("Made Ajax request but set no callback.")}}}};return f}http.HEAD=function(b,c,d,e){xhr=a("HEAD",b,c,d,e);xhr.send()};http.GET=function(b,c,d,e){xhr=a("GET",b,c,d,e);xhr.send()};http.POST=function(b,c,d,e,f){xhr=a("POST",b,d,e,f);xhr.send(JSON.stringify(c))};http.DELETE=function(b,c,d,e){xhr=a("DELETE",b,c,d,e);xhr.send()}}();var EventDispatcher=function(){this._handlers={}};EventDispatcher.prototype={bind:function(a,b){this._handlers[a]=this._handlers[a]||[];if(this._handlers[a].indexOf(b)===-1){this._handlers[a].push(b)}},unbind:function(a,b){if(this._handlers[a]){if(b){this._handlers[a].splice(this._handlers[a].indexOf(b),1)}else{this._handlers[a]=[]}}},trigger:function(a,b){var c;b=Array.prototype.slice.apply(arguments).slice(1);if(this._handlers[a]){for(c=0;c<this._handlers[a].length;++c){this._handlers[a][c].apply(this,b)}}}};var StateDrive=function(){EventDispatcher.call(this);this._state=0;this._callQueue={}};StateDrive.prototype=new EventDispatcher;StateDrive.prototype.getState=function(){return this._state};StateDrive.prototype.setState=function(a){this._state=a;this._executeQueuedCalls()};StateDrive.prototype.setMinCallState=function(a,b,c){var d=this[a],e=arguments[arguments.length-1],f=arguments.length>2?Array.prototype.slice.apply(arguments).slice(1,arguments.length-1):[],g;this[a]=function(){if(this._state>=e||arguments.length<f.length){return d.apply(this,arguments)}else{for(g=0;g<f.length;++g){if(!arguments[g].match(f[g])){return d.apply(this,arguments)}}return this._queueCall(a,arguments,e)}}};StateDrive.prototype._queueCall=function(a,b,c){this._callQueue[c]=this._callQueue[c]||[];this._callQueue[c].push({name:a,args:b})};StateDrive.prototype._executeQueuedCalls=function(){var a,b;for(a=0;a<=this._state;++a){if(this._callQueue[a]){for(b=0;b<this._callQueue[a].length;++b){this[this._callQueue[a][b].name].apply(this,this._callQueue[a][b].args)}this._callQueue[a]=[]}}};var Channel=function(a,b){StateDrive.call(this);this.localNode=a;this.remoteNode=b};Channel.prototype=new StateDrive;Channel.prototype.open=function(){};Channel.prototype.close=function(){};Channel.prototype.send=function(a){return false};Channel.STATE={CLOSED:1,OPENING:2,OPEN:3};var SocketChannel=function(a,b){Channel.call(this,a,b);this.setState(Channel.STATE.CLOSED);this.setMinCallState("send",Channel.STATE.OPEN);this.setMinCallState("close",Channel.STATE.OPEN);this.multiplexer=SocketMultiplexer.get(a.mesh)};SocketChannel.prototype=new Channel;SocketChannel.prototype.open=function(){this.multiplexer.register(this);this.multiplexer.open()};SocketChannel.prototype.close=function(){this.multiplexer.close(this)};SocketChannel.prototype.send=function(a){this.multiplexer.send(this,a)};var RTCPeerConnection=null;var getUserMedia=null;var attachMediaStream=null;var reattachMediaStream=null;var webrtcDetectedBrowser=null;var webrtcDetectedVersion=null;function trace(a){if(a[a.length-1]=="\n"){a=a.substring(0,a.length-1)}console.log((performance.now()/1e3).toFixed(3)+": "+a)}if(navigator.mozGetUserMedia){console.log("This appears to be Firefox");webrtcDetectedBrowser="firefox";webrtcDetectedVersion=parseInt(navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]);try{RTCPeerConnection=mozRTCPeerConnection;RTCSessionDescription=mozRTCSessionDescription;RTCIceCandidate=mozRTCIceCandidate;getUserMedia=navigator.mozGetUserMedia.bind(navigator);createIceServer=function(a,b,c){var d=null;var e=a.split(":");if(e[0].indexOf("stun")===0){d={url:a}}else if(e[0].indexOf("turn")===0&&(a.indexOf("transport=udp")!==-1||a.indexOf("?transport")===-1)){var f=a.split("?");d={url:f[0],credential:c,username:b}}return d};attachMediaStream=function(a,b){console.log("Attaching media stream");a.mozSrcObject=b;a.play()};reattachMediaStream=function(a,b){console.log("Reattaching media stream");a.mozSrcObject=b.mozSrcObject;a.play()};MediaStream.prototype.getVideoTracks=function(){return[]};MediaStream.prototype.getAudioTracks=function(){return[]}}catch(e){console.warn("RTCChannel Error: "+e)}}else if(navigator.webkitGetUserMedia){console.log("This appears to be Chrome");webrtcDetectedBrowser="chrome";webrtcDetectedVersion=parseInt(navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./)[2]);createIceServer=function(a,b,c){var d=null;var e=a.split(":");if(e[0].indexOf("stun")===0){d={url:a}}else if(e[0].indexOf("turn")===0){if(webrtcDetectedVersion<28){var f=a.split("turn:");d={url:"turn:"+b+"@"+f[1],credential:c}}else{d={url:a,credential:c,username:b}}}return d};RTCPeerConnection=webkitRTCPeerConnection;getUserMedia=navigator.webkitGetUserMedia.bind(navigator);attachMediaStream=function(a,b){if(typeof a.srcObject!=="undefined"){a.srcObject=b}else if(typeof a.mozSrcObject!=="undefined"){a.mozSrcObject=b}else if(typeof a.src!=="undefined"){a.src=URL.createObjectURL(b)}else{console.log("Error attaching stream to element.")}};reattachMediaStream=function(a,b){a.src=b.src};if(!webkitMediaStream.prototype.getVideoTracks){webkitMediaStream.prototype.getVideoTracks=function(){return this.videoTracks};webkitMediaStream.prototype.getAudioTracks=function(){return this.audioTracks}}if(!webkitRTCPeerConnection.prototype.getLocalStreams){webkitRTCPeerConnection.prototype.getLocalStreams=function(){return this.localStreams};webkitRTCPeerConnection.prototype.getRemoteStreams=function(){return this.remoteStreams}}}else{console.log("Browser does not appear to be WebRTC-capable")}var DATA_CHANNEL_CONFIG={optional:[{RtpDataChannels:true},{DtlsSrtpKeyAgreement:true}]};var DATA_CHANNEL_SUPPORTED=function(){try{var a=new RTCPeerConnection({iceServers:[]},DATA_CHANNEL_CONFIG);var b=a.createDataChannel("supportCheck",{reliable:false});b.close();return true}catch(c){return false}}();var BANDWIDTH=64;var RTCChannelUtils={defaultIceServers:function(a){var b=[];if(navigator.mozGetUserMedia){b.push(createIceServer("stun:23.21.150.121"))}else{var c=a.localNode.mesh.options;if(c.turn){b.push(createIceServer(c.turn,c.username,c.password))}b.push(createIceServer("stun:stun.l.google.com:19302"))}return b},highBandwidth:function(a,b){b=b||BANDWIDTH;a=a.replace("b=AS:30","b=AS:"+b);return a},preferOpus:function(a){var b=a.split("\r\n"),c,d;for(d=0;d<b.length;d++){if(b[d].search("m=audio")!==-1){c=d;break}}if(c===null){return a}for(d=0;d<b.length;d++){if(b[d].search("opus/48000")!==-1){var e=RTCChannelUtils.extractSdp(b[d],/:(\d+) opus\/48000/i);if(e){b[c]=RTCChannelUtils.setDefaultCodec(b[c],e)}break}}b=RTCChannelUtils.removeCN(b,c);a=b.join("\r\n");return a},extractSdp:function(a,b){var c=a.match(b);return c&&c.length==2?c[1]:null},setDefaultCodec:function(a,b){var c=a.split(" ");var d=[];var e=0;for(var f=0;f<c.length;f++){if(e===3){d[e++]=b}if(c[f]!==b){d[e++]=c[f]}}return d.join(" ")},removeCN:function(a,b){var c=a[b].split(" ");for(var d=a.length-1;d>=0;d--){var e=RTCChannelUtils.extractSdp(a[d],/a=rtpmap:(\d+) CN\/\d+/i);if(e){var f=c.indexOf(e);if(f!==-1){c.splice(f,1)}a.splice(d,1)}}a[b]=c.join(" ");return a},createPeerConnection:function(a){var b=new RTCPeerConnection({iceServers:RTCChannelUtils.defaultIceServers(a)},DATA_CHANNEL_CONFIG);a.pc=b;b.onicecandidate=function(b){if(b.candidate){a.remoteNode._trigger("rtc_iceCandidate",b.candidate)}};b.onconnecting=function(a){console.log("onConnecting",a)};b.onopen=function(a){console.log("onOpen",a)};b.onaddstream=function(a){console.log("add stream",a)};b.ondatachannel=function(a){console.log("add data channel???",a)}},sendOffer:function(a){a.pc.createOffer(function(b){b.sdp=RTCChannelUtils.preferOpus(b.sdp);b.sdp=RTCChannelUtils.highBandwidth(b.sdp);a.pc.setLocalDescription(b);a.remoteNode._trigger("rtc_offer",b)},function(){console.log("createOffer error")})},sendAnswer:function(a){a.pc.createAnswer(function(b){b.sdp=RTCChannelUtils.preferOpus(b.sdp);b.sdp=RTCChannelUtils.highBandwidth(b.sdp);a.pc.setLocalDescription(b);a.remoteNode._trigger("rtc_answer",b)})},bind:function(a){a.remoteNode.bind("rtc_iceCandidate",function(b){var c=new RTCIceCandidate(b);a.pc.addIceCandidate(c)});a.remoteNode.bind("rtc_answer",function(b){a.pc.setRemoteDescription(new RTCSessionDescription(b))});a.remoteNode.bind("rtc_offer",function(b){a.pc.setRemoteDescription(new RTCSessionDescription(b));RTCChannelUtils.sendAnswer(a)})},addStream:function(a){},createDataChannel:function(a){var b="mesh";var c={reliable:false};var d;try{d=a.pc.createDataChannel(b,c)}catch(e){console.log("seems that DataChannel is NOT actually supported!");throw e}return RTCChannelUtils.addDataChannel(a,d)},addDataChannel:function(a,b){a.dataChannel=b;b.onopen=function(c){a.setState(Channel.STATE.OPEN);a.trigger("open",{timestamp:c.timestamp,data:["open",b]})};b.onclose=function(c){a.trigger("close",{timestamp:c.timestamp,data:["close",b]})};b.onmessage=function(b){var c;try{c=JSON.parse(b.data)}catch(b){console.log("Error parsing ",b.data)}a.trigger("message",{timestamp:b.timestamp,data:c})};return b}};var RTCChannel=function(a,b){Channel.call(this,a,b);this.setState(Channel.STATE.CLOSED);this.setMinCallState("send",Channel.STATE.OPEN);this.setMinCallState("close",Channel.STATE.OPEN)};RTCChannel.prototype=new Channel;RTCChannel.prototype.open=function(){if(this.localNode===this.remoteNode){return}if(RTCPeerConnection){RTCChannelUtils.bind(this);RTCChannelUtils.createPeerConnection(this);RTCChannelUtils.addStream(this);RTCChannelUtils.createDataChannel(this);if(this.remoteNode.initiator){RTCChannelUtils.sendOffer(this)}}};RTCChannel.prototype.close=function(){};RTCChannel.prototype.send=function(a){if(this.getState()===Channel.STATE.OPEN){this.dataChannel.send(a);return true}return false};var SocketMultiplexer=function(a){StateDrive.call(this);this.mesh=a;this.setState(Channel.STATE.CLOSED);this.setMinCallState("send",Channel.STATE.OPEN);this.channels={}};SocketMultiplexer._byMesh={};SocketMultiplexer.get=function(a){var b=SocketMultiplexer._byMesh[a];if(!b){b=new SocketMultiplexer(a);SocketMultiplexer._byMesh[a]=b}return b};SocketMultiplexer.prototype=new StateDrive;SocketMultiplexer.prototype.register=function(a){if(this.channels[a.remoteNode.id]===undefined){this.channels[a.remoteNode.id]=a;var b=this.getState();a.setState(b);if(b===Channel.STATE.OPEN){a.trigger("open",{timestamp:Date.now(),data:["open"]})}}};SocketMultiplexer.prototype.unregister=function(a){delete this.channels[a.remoteNode.id];a.setState(Channel.STATE.CLOSED)};SocketMultiplexer.prototype.open=function(a){if(this.getState()!==Channel.STATE.CLOSED){return}this.setState(Channel.STATE.OPENING);var b=this;var c=b.socket=new WebSocket(this.mesh.options.ws);c.addEventListener("open",function(a){b.setState(Channel.STATE.OPEN);for(var c in b.channels){var d=b.channels[c];d.setState(Channel.STATE.OPEN);d.trigger("open",{timestamp:Date.now(),data:["open"]})}},false);c.addEventListener("message",function(a){var c;try{c=JSON.parse(a.data)}catch(d){throw new Error("Invalid container received",c)}var e=c[0];var f=c[1];var g;try{g=JSON.parse(c[2])}catch(d){throw new Error("Invalid data received",g)}if(g[0]==="connect"){var h=b.channels[null];h.localNode.id=e;delete b.channels[null];b.channels[e]=h}var i=b.channels[e];if(i){i.trigger("message",{from:i.remoteNode.id,timestamp:f,data:g})}else{}},false);c.addEventListener("close",function(){b.setState(Channel.STATE.CLOSED);for(var a in b.channels){var c=b.channels[a];c.setState(Channel.STATE.CLOSED);c.trigger("close",{from:c.remoteNode.id,timestamp:Date.now(),data:["close"]})}},false);c.addEventListener("error",function(){b.setState(Channel.STATE.CLOSED);for(var a in b.channels){var c=b.channels[a];c.setState(Channel.STATE.CLOSED);c.trigger("error",{from:c.remoteNode.id,timestamp:Date.now(),data:["error"]})}},false)};SocketMultiplexer.prototype.close=function(a){this.unregister(a);if(a.remoteNode===a.localNode.mesh.self){this.setState(Channel.STATE.CLOSED);this.socket.close()}};var debounce=function(a,b,c){var d;var e=null;return function(){var f=this,g=arguments;var h=function(){e=null;if(!c)d=a.apply(f,g)};var i=c&&!e;clearTimeout(e);e=setTimeout(h,b);if(i)d=a.apply(f,g);return d}};SocketMultiplexer._send=debounce(function(){});SocketMultiplexer.prototype.send=function(a,b){var c=JSON.stringify([[a.remoteNode.id],b]);return this.socket.send(c)};var ChannelChannel=function(a,b){Channel.call(this,a,b);this.setState(Channel.STATE.CLOSED);this.setMinCallState("send",Channel.STATE.OPEN);this.setMinCallState("close",Channel.STATE.OPEN);this.multiplexer=ChannelMultiplexer.get(a.mesh)};ChannelChannel.prototype=new Channel;ChannelChannel.prototype.open=function(){this.multiplexer.register(this);this.multiplexer.open()};ChannelChannel.prototype.close=function(){this.multiplexer.close(this)};ChannelChannel.prototype.send=function(a){this.multiplexer.send(this,a)};var ChannelMultiplexer=function(a){StateDrive.call(this);this.mesh=a;this.setState(Channel.STATE.CLOSED);this.setMinCallState("send",Channel.STATE.OPEN);this.channels={}};ChannelMultiplexer._byMesh={};ChannelMultiplexer.get=function(a){var b=ChannelMultiplexer._byMesh[a];if(!b){b=new ChannelMultiplexer(a);ChannelMultiplexer._byMesh[a]=b}return b};ChannelMultiplexer.prototype=new StateDrive;ChannelMultiplexer.prototype.register=function(a){if(this.channels[a.remoteNode.id]===undefined){this.channels[a.remoteNode.id]=a;var b=this.getState();a.setState(b);if(b===Channel.STATE.OPEN){a.trigger("open",{timestamp:Date.now(),data:["open"]})}}};ChannelMultiplexer.prototype.unregister=function(a){delete this.channels[a.remoteNode.id];a.setState(Channel.STATE.CLOSED)};ChannelMultiplexer.prototype.open=function(a){if(this.getState()!==Channel.STATE.CLOSED){return}this.setState(Channel.STATE.OPENING);var b=this;var c=document.createElement("script");c.src="/_ah/channel/jsapi";document.body.appendChild(c);c.onload=function(){http.GET("/api/channel/"+b.mesh.id,function(a){var c=new goog.appengine.Channel(a.token);var d=b.socket=c.open();d.onopen=function(a){b.setState(Channel.STATE.OPEN);for(var c in b.channels){var d=b.channels[c];d.setState(Channel.STATE.OPEN);d.trigger("open",{timestamp:Date.now(),data:["open"]})}};d.onmessage=function(a){var c;try{c=JSON.parse(a.data)}catch(d){throw new Error("Invalid container received",c)}var e=c[0];var f=c[1];var g;try{g=JSON.parse(c[2])}catch(d){throw new Error("Invalid data received",g)}if(g[0]==="connect"){var h=b.channels[null];if(h){h.localNode.id=e;delete b.channels[null];b.channels[e]=h}else{console.warn("Connection already defined for",e)}if(b.channels[e]==undefined){console.warn("Channel for",e,"not defined.")}}var i=b.channels[e];if(i){i.trigger("message",{from:i.remoteNode.id,timestamp:f,data:g})}else{}};d.onclose=function(){console.log("my channel was closed !!! :(");b.setState(Channel.STATE.CLOSED);for(var a in b.channels){var c=b.channels[a];c.setState(Channel.STATE.CLOSED);c.trigger("close",{from:fromChannel.remoteNode.id,timestamp:Date.now(),data:["close"]})}};d.onerror=function(){b.setState(Channel.STATE.CLOSED);for(var a in b.channels){var c=b.channels[a];c.setState(Channel.STATE.CLOSED);c.trigger("error",{from:fromChannel.remoteNode.id,timestamp:Date.now(),data:["error"]})}}},function(){console.log("Error opening channel.");console.log.apply(console,arguments)})}};ChannelMultiplexer.prototype.close=function(a){this.unregister(a);if(a.remoteNode===a.localNode.mesh.self){this.setState(Channel.STATE.CLOSED);this.socket.close()}};ChannelMultiplexer.prototype.send=function(a,b){var c=[[a.remoteNode.id],b];http.POST("/api/channel/"+this.mesh.id+"/"+this.mesh.self.id,c,function(){});return true};var Peers=function(){Array.call(this);StateDrive.call(this);this.setState(Node.STATE.DISCONNECTED);this.setMinCallState("bind",Node.STATE.CONNECTED);this.setMinCallState("unbind",Node.STATE.CONNECTED);this.setMinCallState("trigger",Node.STATE.CONNECTED)};Peers.prototype=[];for(var k in StateDrive.prototype){Peers.prototype[k]=StateDrive.prototype[k]}Peers.prototype.bind=function(){EventDispatcher.prototype.bind.apply(this,arguments);this._bind.apply(this,arguments)};Peers.prototype._bind=function(){var a=arguments;this.forEach(function(b){b._bind.apply(b,a)})};Peers.prototype.unbind=function(){EventDispatcher.prototype.unbind.apply(this,arguments);this._unbind.apply(this,arguments)};Peers.prototype._unbind=function(){var a=arguments;this.forEach(function(b){b._unbind.apply(b,a)})};Peers.prototype.trigger=function(){var a=arguments;this.forEach(function(b){b.trigger.apply(b,a)})};Peers.prototype.getById=function(a){return this.filter(function(b){return b.id===a})[0]};var NodeUtils={PROTECTED_EVENTS:["open","close","error","connect","enter","leave","bind","unbind"],uidSeed:1,remoteBindsByNodeIds:{},send:function(a,b){var c=a._channels.filter(function(a){return a.getState()===Channel.STATE.OPEN})[0];if(c){c.send(b)}else{console.warn("There is no open send channel.")}},acknowledgeRemoteBind:function(a,b){NodeUtils.remoteBindsByNodeIds[a]=NodeUtils.remoteBindsByNodeIds[a]||[];if(NodeUtils.remoteBindsByNodeIds[a].indexOf(b)===-1){NodeUtils.remoteBindsByNodeIds[a].push(b)}},acknowledgeRemoteUnbind:function(a,b){var c;if(NodeUtils.remoteBindsByNodeIds[a]&&(c=NodeUtils.remoteBindsByNodeIds[a].indexOf(b))){NodeUtils.remoteBindsByNodeIds[a].splice(c,1)}},doesRemoteBindTo:function(a,b){var c=NodeUtils.remoteBindsByNodeIds[a];if(c===undefined){return true}return c&&NodeUtils.remoteBindsByNodeIds[a].indexOf(b)!==-1}};var Node=function(a,b,c){StateDrive.call(this);var d=NodeUtils.uidSeed++;this.__defineGetter__("uid",function(){return d});this.mesh=a;this.id=b;this._channels=[];this._signalingChannel=null;this._remotelyBoundTypes={};this.__defineGetter__("initiator",function(){return c});this.setState(Node.STATE.DISCONNECTED);this.setMinCallState("connect",Node.STATE.DISCONNECTED);this.setMinCallState("disconnect",Node.STATE.CONNECTED);this.setMinCallState("bind",Node.STATE.CONNECTED);this.setMinCallState("unbind",Node.STATE.CONNECTED);this.setMinCallState("_bind",Node.STATE.CONNECTED);this.setMinCallState("_unbind",Node.STATE.CONNECTED);this.setMinCallState("trigger",Node.STATE.CONNECTED)};Node.prototype=new StateDrive;Node.prototype.toString=function(){return"Node@"+this.uid};Node.prototype.connect=function(a){var b=this;var c=this.getState();if(c===Node.STATE.CONNECTING||c===Node.STATE.CONNECTED){return}b.setState(Node.STATE.CONNECTING);if(this.mesh.options.ws){this._signalingChannel=new SocketChannel(this.mesh.self,this)}else{this._signalingChannel=new ChannelChannel(this.mesh.self,this)}if(b!==b.mesh.self&&b.mesh.options.useWebRTC){this._channels.push(new RTCChannel(this.mesh.self,this))}this._channels.push(this._signalingChannel);var d=function(a){var c=b.preprocessIncoming(a.data);EventDispatcher.prototype.trigger.apply(b,c);if(b!==b.mesh.self){EventDispatcher.prototype.trigger.apply(b.mesh.peers,c)}EventDispatcher.prototype.trigger.apply(b.mesh,c)};this._channels.forEach(function(a){["open","message","error","close"].forEach(function(b){a.bind(b,d)})});this._signalingChannel.bind("open",function(a){if(b!=b.mesh.self){var c=Object.keys(b.mesh._handlers);var d=Object.keys(b.mesh.peers._handlers);d.forEach(function(a){if(c.indexOf(a)===-1){c.push(a)}});c.forEach(function(a){b._bind(a)});b._channels.forEach(function(a){a.open()})}b.setState(Node.STATE.CONNECTED)});this._signalingChannel.open()};Node.prototype.disconnect=function(){this._channels.forEach(function(a){a.unbind("message");a.close()})};Node.prototype.bind=function(a,b){EventDispatcher.prototype.bind.apply(this,arguments);this._bind.apply(this,arguments)};Node.prototype._bind=function(a,b){if(this!==this.mesh.self){if(NodeUtils.PROTECTED_EVENTS.indexOf(a)===-1){var c=this._remotelyBoundTypes[a];if(!c){this._remotelyBoundTypes[a]=0;NodeUtils.send(this,'["bind","'+a+'"]')}this._remotelyBoundTypes[a]+=1}}};Node.prototype.unbind=function(a,b){EventDispatcher.prototype.unbind.apply(this,arguments);this._unbind.apply(this,arguments)};Node.prototype._unbind=function(a,b){if(this!==this.mesh.self){if(NodeUtils.PROTECTED_EVENTS.indexOf(a)===-1){this._remotelyBoundTypes[a]-=1;var c=this._remotelyBoundTypes[a];if(c===0){NodeUtils.send(this,'["unbind","'+a+'"]')}}}};Node.prototype.trigger=function(a,b){if(this===this.mesh.self){EventDispatcher.prototype.trigger.apply(this,arguments);EventDispatcher.prototype.trigger.apply(this.mesh,arguments);return}if(!NodeUtils.doesRemoteBindTo(this.id,a)){return}this._trigger.apply(this,arguments)};Node.prototype._trigger=function(a,b){var c;try{var d=this.preprocessOutgoing.apply(this,arguments);c=JSON.stringify(Array.prototype.slice.apply(d));if(c==="null"){return}}catch(e){throw new Error("Trigger not serializable")}NodeUtils.send(this,c)};Node.prototype.preprocessIncoming=function(a){var b=a[0],c=[],d,e;switch(b){case"connect":c.push(b);for(e=1;e<a.length;++e){d=new Node(this.mesh,a[e],true);c.push(d);this.mesh.peers.push(d);if(this.mesh.options.autoPeerConnect){d.connect()}}if(this!=this.mesh.self){console.warn('Expected "connect" triggered only on self node.')}this.mesh.peers.setState(Node.STATE.CONNECTED);this.mesh.setState(Node.STATE.CONNECTED);break;case"enter":c.push(b);for(e=1;e<a.length;++e){d=new Node(this.mesh,a[e],false);c.push(d);this.mesh.peers.push(d);if(this.mesh.options.autoPeerConnect){d.connect()}}break;case"leave":c.push(b);for(e=1;e<a.length;++e){d=this.mesh.peers.getById(a[e]);if(d){c.push(d);this.mesh.peers.splice(this.mesh.peers.indexOf(d),1);d.disconnect()}else{console.warn("Node",a[e],"leave event but not in peers.")}}break;case"bind":NodeUtils.acknowledgeRemoteBind(this.id,a[1]);c=a;break;case"unbind":NodeUtils.acknowledgeRemoteUnbind(this.id,a[1]);c=a;break;default:c=a;break}return c};Node.prototype.preprocessOutgoing=function(a,b){if(NodeUtils.PROTECTED_EVENTS.indexOf(a)===-1){return arguments}else{throw new Error("Event type "+a+" protected")}};Node.STATE={DISCONNECTED:1,CONNECTING:2,CONNECTED:3};var MeshUtils={uidSeed:1};var Mesh=function(a,b){var c=this;StateDrive.call(this);if(a&&typeof a!=="string"){throw new Error("Invalid type ID")}var d=MeshUtils.uidSeed++;this.__defineGetter__("uid",function(){return d});this.id=a;this.self=new Node(this,null);this.peers=new Peers;this.options={};this.config(b);this.setState(Node.STATE.DISCONNECTED);this.setMinCallState("connect",Node.STATE.DISCONNECTED);this.setMinCallState("bind",Node.STATE.CONNECTED);this.setMinCallState("unbind",Node.STATE.CONNECTED);this.setMinCallState("trigger",Node.STATE.CONNECTED);if(this.options.autoConnect){c.connect()}};Mesh.prototype=new StateDrive;Mesh.prototype.toString=function(){return"Mesh@"+this.uid};Mesh.prototype.config=function(a){var b;for(b in Mesh.options){this.options[b]=this.options[b]===undefined?Mesh.options[b]:this.options[b]}if(typeof a==="string"){this.options.api=a}else if(typeof a==="object"){for(b in a){this.options[b]=a[b]}}};Mesh.prototype.connect=function(){var a=this,b,c;if(this.options.ws){c=this.options.ws.match("[^/]+$");if(c){this.id=c[0]}this.self.connect();this.peers.forEach(function(a){a.connect()})}else if(this.options.channel){this.id=this.options.name;this.self.connect();this.peers.forEach(function(a){a.connect()})}else if(this.options.api){http.GET(this.options.api+"/"+(this.id||""),function(b){a.config(b);a.connect()},function(){console.warn("Error connecting to server, retrying in 10 seconds.");setTimeout(function(){a.connect()},10*1e3)})}else{throw new Error("Invalid options")}};Mesh.prototype.disconnect=function(){this.self.disconnect();this.peers.forEach(function(a){a.disconnect()})};Mesh.prototype.bind=function(a,b){EventDispatcher.prototype.bind.apply(this,arguments);this.peers._bind.apply(this.peers,arguments)};Mesh.prototype.unbind=function(a,b){EventDispatcher.prototype.unbind.apply(this,arguments);this.peers._unbind.apply(this.peers,arguments)};Mesh.prototype.trigger=function(a,b){this.self.trigger.apply(this.self,arguments);this.peers.trigger.apply(this.peers,arguments)};Mesh.options={api:"/api/mesh",autoConnect:true,autoPeerConnect:true,useWebRTC:true};var samples=[],clockDelta=0;var now;if(window.performance&&performance.now){now=function(){return performance.timing.navigationStart+performance.now()}}else{now=function(){return+new Date}}var nowsync=function(){return now()-clockDelta};var createSyncData=function(){return{clientLocalTime:now()}};var handleSyncResponse=function(a){var b=now();if(typeof a==="string"){a=JSON.parse(a)}a.receiveTime=b;a.latency=(a.receiveTime-a.clientLocalTime)*.5;a.clockDelta=a.receiveTime-a.serverLocalTime-a.latency;updateSync(a)};var updateSync=function(a){clockDelta=a.clockDelta;pushSample(a);if(samples.length<9){return setTimeout(clocksync.syncMethod,100)}completeSync()};var completeSync=function(){var a=filterSamples(samples);clockDelta=getAverageClockDelta(a);if(clocksync.callback){clocksync.callback(nowsync(),clockDelta)}};var pushSample=function(a){var b,c=samples.length;for(b=0;b<c;b++){if(a.latency<samples[b].latency){samples.splice(b,0,a);return}}samples.push(a)};var calcMedian=function(a){var b=Math.floor(a.length/2);if(a.length%2){return a[b]}else{return(a[b-1]+a[b])/2}};var filterSamples=function(a){var b=[],c,d,e=a.length,f=getStandardDeviation(a),g=calcMedian(a);for(c=0;c<e;c++){d=a[c].latency;if(d>g.latency-f&&d<g.latency+f){b.push(a[c])}}return b};var getAverageClockDelta=function(a){var b=a.length,c=0;while(b--){c+=a[b].clockDelta}return c/a.length};var isArray=function(a){return Object.prototype.toString.call(a)==="[object Array]"},getNumWithSetDec=function(a,b){var c=Math.pow(10,b||0);return b?Math.round(c*a)/c:a},getAverageFromNumArr=function(a,b){if(!isArray(a)){return false}var c=a.length,d=0;while(c--){d+=a[c].latency}return getNumWithSetDec(d/a.length,b)},getVariance=function(a,b){if(!isArray(a)){return false}var c=getAverageFromNumArr(a,b),d=a.length,e=0;while(d--){e+=Math.pow(a[d].latency-c,2)}e/=a.length;return getNumWithSetDec(e,b)},getStandardDeviation=function(a,b){if(!isArray(a)){return false}var c=Math.sqrt(getVariance(a,b));return getNumWithSetDec(c,b)};var ajaxSyncMethod=function(){var a=new XMLHttpRequest;a.open("HEAD","/api/clocksync",false);var b=Date.now();a.onreadystatechange=function(c){if(a.readyState===a.DONE){var d=parseFloat(a.getResponseHeader("Last-Modified"));clocksync.syncResponse({clientLocalTime:b,serverLocalTime:d})}};a.send()};var clocksync={delta:clockDelta,time:nowsync,sync:function(a){this.callback=a;this.syncMethod()},syncMethod:ajaxSyncMethod,data:createSyncData,syncResponse:handleSyncResponse};this["Handlebars"]=this["Handlebars"]||{};this["Handlebars"]["templates"]=this["Handlebars"]["templates"]||{};this["Handlebars"]["templates"]["AboutView"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"];c=this.merge(c,a.helpers);e=e||{};var f="",g,h,i=c.helperMissing,j=this.escapeExpression;f+='<div class="page">\n    <div class="content">\n    	<div class="asset icon-close"></div>\n        <div class="logo">\n            <div class="asset logo-about"></div>\n            <aside class="separator">-</aside>\n            <p class="title"><bdo>';h={hash:{},data:e};f+=j((g=c["t"]||b["t"],g?g.call(b,"AboutView.title",h):i.call(b,"t","AboutView.title",h)))+'</bdo></p>\n        </div>\n\n        <article>\n            <div class="video" id="ytPlayer_about"></div>\n            <p class="body"><bdo>';h={hash:{},data:e};f+=j((g=c["t"]||b["t"],g?g.call(b,"AboutView.article1.body",h):i.call(b,"t","AboutView.article1.body",h)))+'</bdo></p>\n            <div class="video" id="ytPlayer_about2"></div>\n        </article>\n\n        <div class="image">\n        	<a href="/m/img/about/download/justareflektor_arcadefire.jpg" target="_blank"><img class="about-view-image" width="100%"></a>\n          <a href="/m/img/about/download/justareflektor_arcadefire_1.jpg" target="_blank"><img class="about-view-image-1" width="100%"></a>\n          <a href="/m/img/about/download/justareflektor_arcadefire_2.jpg" target="_blank"><img class="about-view-image-2" width="100%"></a>\n          <a href="/m/img/about/download/justareflektor_arcadefire_3.jpg" target="_blank"><img class="about-view-image-3" width="100%"></a>\n          <a href="/m/img/about/download/justareflektor_arcadefire_4.jpg" target="_blank"><img class="about-view-image-4" width="100%"></a>\n          <a href="/m/img/about/download/justareflektor_arcadefire_5.jpg" target="_blank"><img class="about-view-image-5" width="100%"></a>\n        </div>\n\n        <p class="title"><bdo>';
h={hash:{},data:e};f+=j((g=c["t"]||b["t"],g?g.call(b,"AboutView.creditsTitle",h):i.call(b,"t","AboutView.creditsTitle",h)))+'</bdo></p>\n\n        <p class="separator">-</p>\n\n                <p>Written, Directed and Produced by Vincent&nbsp;Morisset</p>\n                <p>Music by Arcade Fire</p>\n                <p>Creative Direction by Vincent&nbsp;Morisset and Aaron&nbsp;Koblin</p>\n                \n                <header>Starring:</header>\n                <div class="entry"><p class="role">Heroine</p><p class="separator">-</p><p class="name">Axelle ‘Ebony’ Munezero</p></div>\n                <div class="entry"><p class="role">Verite</p><p class="separator">-</p><p class="name">Maurice Gilles</p></div>\n                <div class="entry"><p class="role">Lanmè</p><p class="separator">-</p><p class="name">Bybiane Hyppolite</p></div>\n                <div class="entry"><p class="role">Reflektè</p><p class="separator">-</p><p class="name">Charlemagne Fritzner</p></div>\n                <div class="entry"><p class="role">Zonbis</p><p class="separator">-</p><p class="name">Varnessa Alcan, Ricardo Tiberice, Dorcas Jean Louis, Bellgarde MacKendy, Augusutin A. Mentor, Jayes Yves Rotty, Viergeline Jean, Genlittin Guillaume</p></div>\n                <div class="entry"><p class="role">Rara Group</p><p class="separator">-</p><p class="name">Rara Tesser Esprit</p></div>\n\n                <header>Produced by:</header>\n	            <header>AATOAA</header>\n                <div class="entry"><p class="role">Lead Creative Developer</p><p class="separator">-</p><p class="name">Édouard Lanctôt-Benoit</p></div>\n                <div class="entry"><p class="role">Artistic Direction</p><p class="separator">-</p><p class="name">Caroline Robert</p></div>\n                <div class="entry"><p class="role">Visual Effects</p><p class="separator">-</p><p class="name">Brandon Blommaert</p></div>\n\n                <header>Google Creative Lab</header>\n                <div class="entry"><p class="role">Creative Director</p><p class="separator">-</p><p class="name">Aaron Koblin</p></div>\n                <div class="entry"><p class="role">Technologist</p><p class="separator">-</p><p class="name">Doug Fritz</p></div>\n                <div class="entry"><p class="role">Technologist</p><p class="separator">-</p><p class="name">Jono Bandel</p></div>\n                <div class="entry"><p class="role">Technologist</p><p class="separator">-</p><p class="name">Aleksandar Rodic</p></div>\n                <div class="entry"><p class="role">Technologist</p><p class="separator">-</p><p class="name">Mr.doob</p></div>\n                <div class="entry"><p class="role">Producer</p><p class="separator">-</p><p class="name">Sabah Kosoy</p></div>\n                <div class="entry"><p class="role">Producer</p><p class="separator">-</p><p class="name">Valdean Klump</p></div>\n                <div class="entry"><p class="role">Marketing Manager</p><p class="separator">-</p><p class="name">Jenny Ramaswamy</p></div>\n                <div class="entry"><p class="role">Marketing Manager</p><p class="separator">-</p><p class="name">Clem Wright</p></div>\n\n                <header>Unit9</header>\n                <div class="entry"><p class="role">Interactive Producer</p><p class="separator">-</p><p class="name">Amelia Roberts</p></div>\n                <div class="entry"><p class="role">Lead Developer</p><p class="separator">-</p><p class="name">Maciej Zasada</p></div>\n                <div class="entry"><p class="role">Developer</p><p class="separator">-</p><p class="name">Fábio Azevedo</p></div>\n\n                <header>Antler Films</header>\n                <div class="entry"><p class="role">Producer</p><p class="separator">-</p><p class="name">Sach Baylin-Stern</p></div>\n                <div class="entry"><p class="role">Director</p><p class="separator">-</p><p class="name">Vincent Morisset</p></div>\n                <div class="entry"><p class="role">DOP</p><p class="separator">-</p><p class="name">Mathieu Laverdière</p></div>\n                <div class="entry"><p class="role">Costume Designer</p><p class="separator">-</p><p class="name">Renata Morales</p></div>\n                <div class="entry"><p class="role">Choreography</p><p class="separator">-</p><p class="name">Axelle ‘Ebony’ Munezero</p></div>\n                <div class="entry"><p class="role">Editor</p><p class="separator">-</p><p class="name">Nicolas Roy</p></div>\n                \n                <header>Jacmel, Haiti</header>\n                <div class="entry"><p class="role">Line Production</p><p class="separator">-</p><p class="name">Cine-Institute Jacmel</p></div>\n                <div class="entry"><p class="role">Line Producer</p><p class="separator">-</p><p class="name">Andrew Bigosinski</p></div>\n                <div class="entry"><p class="role">Production Manager</p><p class="separator">-</p><p class="name">Frero Pierre</p></div>\n                <div class="entry"><p class="role">Casting / Locations</p><p class="separator">-</p><p class="name">Ilrique Foukifoura Perin</p></div>\n                <div class="entry"><p class="role">Production Assistant</p><p class="separator">-</p><p class="name">Cesar Jean Rony</p></div>\n                <div class="entry"><p class="role">Production Assistant</p><p class="separator">-</p><p class="name">Macdala Prevot</p></div>\n                <div class="entry"><p class="role">1st Camera Assistant / Key Grip</p><p class="separator">-</p><p class="name">Belony Saint Pierre</p></div>\n                <div class="entry"><p class="role">2nd Camera Assistant</p><p class="separator">-</p><p class="name">Djuny Guillaume</p></div>\n                <div class="entry"><p class="role">Video Technician</p><p class="separator">-</p><p class="name">Manase Fortune</p></div>\n                <div class="entry"><p class="role">Playback Technician</p><p class="separator">-</p><p class="name">Guy Marie Jean Louis</p></div>\n                <div class="entry"><p class="role">Make-Up</p><p class="separator">-</p><p class="name">Marie Merci Andris</p></div>\n                <div class="entry"><p class="role">Additional Footage</p><p class="separator">-</p><p class="name">Ian Lagarde, Andy Mitchell, Dave Adams, Jon Bougher</p></div>\n                                          \n                <header>Montréal, Canada</header>\n                <div class="entry"><p class="role">Seamstress</p><p class="separator">-</p><p class="name">Ana Luisa Rodriguez</p></div>\n                <div class="entry"><p class="role">Hair Stylist</p><p class="separator">-</p><p class="name">Esperence Umubyeyi</p></div>\n                <div class="entry"><p class="role">1st AC</p><p class="separator">-</p><p class="name">Guillaume Sabourin</p></div>\n                <div class="entry"><p class="role">Key Electrician</p><p class="separator">-</p><p class="name">Alexis Vallée Charest</p></div>\n                <div class="entry"><p class="role">Key Grip</p><p class="separator">-</p><p class="name">Mathieu Émond</p></div>\n                <div class="entry"><p class="role">Studio Propsmaster</p><p class="separator">-</p><p class="name">Guillaume Bédard</p></div>\n                <div class="entry"><p class="role">Video Technician</p><p class="separator">-</p><p class="name">Mariane Laporte</p></div>\n                <div class="entry"><p class="role">Studio Manager</p><p class="separator">-</p><p class="name">Hugues Lavoie</p></div>\n                <div class="entry"><p class="role">Production Assistant</p><p class="separator">-</p><p class="name">Cody Larocque</p></div>\n                <div class="entry"><p class="role">Production Assistant</p><p class="separator">-</p><p class="name">Laurent Peyre</p></div>\n                <div class="entry"><p class="role">Wardrobe Assistant</p><p class="separator">-</p><p class="name">Charlotte Eedson</p></div>\n\n                <header>Post Production</header>\n                <div class="entry"><p class="role">Sound editing</p><p class="separator">-</p><p class="name">Mark Lawson</p></div>\n                <div class="entry"><p class="role">Assistant Editor</p><p class="separator">-</p><p class="name">Véronique Barbe</p></div>\n                <div class="entry"><p class="role">Digital Compositing</p><p class="separator">-</p><p class="name">Sylvain Lebeau</p></div>\n                <div class="entry"><p class="role">Digital Compositing</p><p class="separator">-</p><p class="name">Nicolas Pellicelli</p></div>\n                <div class="entry"><p class="role">Pre-Grading</p><p class="separator">-</p><p class="name">Julien Alix</p></div>\n                <div class="entry"><p class="role">Grading</p><p class="separator">-</p><p class="name">Brandon Blommaert</p></div>\n                <div class="entry"><p class="role">Grading</p><p class="separator">-</p><p class="name">Caroline Robert</p></div>\n\n                <div class="entry space-above"><p class="role">Camera Rental</p><p class="separator">-</p><p class="name">Les Productions J. Chamberland</p></div>\n                <div class="entry"><p class="role">Studio / Equipment Rental</p><p class="separator">-</p><p class="name">Ciné-pool</p></div>\n                <div class="entry"><p class="role">Vehicle Rental</p><p class="separator">-</p><p class="name">Via Route</p></div>\n                <div class="entry"><p class="role">Compositing Studio</p><p class="separator">-</p><p class="name">Shed</p></div>\n                <div class="entry"><p class="role">Online Editing Studio</p><p class="separator">-</p><p class="name">Post-Moderne</p></div>\n                <div class="entry"><p class="role">Travel Agent</p><p class="separator">-</p><p class="name">ITA International Travel</p></div>\n                <div class="entry"><p class="role">Accomodation</p><p class="separator">-</p><p class="name">Hotel Cyvadier Jacmel</p></div>\n                <div class="entry"><p class="role">Legal</p><p class="separator">-</p><p class="name">Stephane Moraille</p></div>\n                \n                <header>Behind-The-Scenes Video</header>\n                <div class="entry"><p class="role">Director</p><p class="separator">-</p><p class="name">Ian Lagarde</p></div>\n                <div class="entry"><p class="role">Editor</p><p class="separator">-</p><p class="name">Simon Gosselin</p></div>\n                \n                <header>Arcade Fire Management</header>\n                <div class="entry"><p>Scott Rodger</p></div>\n                <div class="entry"><p>Dounia Mikou</p></div>\n\n                <header>Special Thanks</header>\n                <div class="entry"><p>Andy Berndt</p></div>\n                <div class="entry"><p>Ian Ellison-Taylor</p></div>\n                <div class="entry"><p>Fred Chasen</p></div>\n                <div class="entry"><p>AJ Bae</p></div>\n                <div class="entry"><p>Punyabrata Ray</p></div>\n                <div class="entry"><p>Raymond Toy</p></div>\n                <div class="entry"><p>Brandon Jones</p></div>\n                <div class="entry"><p>Jenn Choy</p></div>\n                <div class="entry"><p>Cory Ferreria</p></div>\n                <div class="entry"><p>Jason Amarante</p></div>\n                <div class="entry"><p>Veronica Navarrete</p></div>\n                <div class="entry"><p>Jen Bloch</p></div>\n                <div class="entry"><p>Jesse Eisenhardt</p></div>\n                <div class="entry"><p>Nicholas Boeder</p></div>\n                <div class="entry"><p>Fred Runner</p></div>\n                <div class="entry"><p>Lynn Fu</p></div>\n                <div class="entry"><p>Joanne Feola</p></div>\n                <div class="entry"><p>Suzanne Chambers</p></div>\n                <div class="entry"><p>Jean-François Nadeau</p></div>\n                <div class="entry"><p>Yves Renaud</p></div>\n                <div class="entry"><p>Marc-André Chaput</p></div>\n                <div class="entry"><p>François Turcotte</p></div>\n                <div class="entry"><p>Tom Sacchi</p></div>\n                <div class="entry"><p>Piero Frescobaldi</p></div>\n                <div class="entry"><p>Yates Buckley</p></div>\n                <div class="entry"><p>Justin Uberti</p></div>\n                <div class="entry"><p>Scott Van Woudenberg</p></div>\n              \n                <div class="entry space-above"><p class="separator">-</p></div>\n\n    </div>\n</div>\n';return f});this["Handlebars"]["templates"]["AxelleVideoView"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"];c=this.merge(c,a.helpers);e=e||{};return'<div class="page">\n    <div class="video"></div>\n    <p class="message break-free"></p>\n    <p class="message just-a-reflektor"></p>\n    <div class="broken-screen"></div>\n</div>\n'});this["Handlebars"]["templates"]["ConnectionTimeoutView"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"];c=this.merge(c,a.helpers);e=e||{};var f="",g,h,i=c.helperMissing,j=this.escapeExpression;f+='<div class="page">\n    <div class="content">\n\n        <p class="title"><bdo>';h={hash:{},data:e};f+=j((g=c["t"]||b["t"],g?g.call(b,"ConnectionTimeoutView.title",h):i.call(b,"t","ConnectionTimeoutView.title",h)))+'</bdo></p>\n        <p class="subtitle"><bdo>';h={hash:{},data:e};f+=j((g=c["t"]||b["t"],g?g.call(b,"ConnectionTimeoutView.message",h):i.call(b,"t","ConnectionTimeoutView.message",h)))+'</bdo></p>\n        <button class="box link route" data-route="/"><bdo>';h={hash:{},data:e};f+=j((g=c["t"]||b["t"],g?g.call(b,"ConnectionTimeoutView.tryAgain",h):i.call(b,"t","ConnectionTimeoutView.tryAgain",h)))+"</bdo></button>\n\n    </div>\n</div>\n";return f});this["Handlebars"]["templates"]["ControllerView"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"];c=this.merge(c,a.helpers);e=e||{};return'<div class="page">\n    <canvas class="tracker"></canvas>\n\n    <div class="debug">\n        <p class="time">0</p>\n    </div>\n\n</div>'});this["Handlebars"]["templates"]["DisconnectedView"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"];c=this.merge(c,a.helpers);e=e||{};var f="",g,h,i=c.helperMissing,j=this.escapeExpression;f+='<div class="page">\n    <div class="content">\n\n        <p class="title"><bdo>';h={hash:{},data:e};f+=j((g=c["t"]||b["t"],g?g.call(b,"DeviceDisconnectedView.title",h):i.call(b,"t","DeviceDisconnectedView.title",h)))+'</bdo></p>\n        <button class="box link route trigger" data-route="/"><bdo>';h={hash:{},data:e};f+=j((g=c["t"]||b["t"],g?g.call(b,"DeviceDisconnectedView.startAgain",h):i.call(b,"t","DeviceDisconnectedView.startAgain",h)))+"</bdo></button>\n\n    </div>\n</div>\n";return f});this["Handlebars"]["templates"]["EndScreenView"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"];c=this.merge(c,a.helpers);e=e||{};var f="",g,h,i=c.helperMissing,j=this.escapeExpression;f+='<div class="page">\n    <div class="content">\n        <button class="restart box"><bdo>';h={hash:{},data:e};f+=j((g=c["t"]||b["t"],g?g.call(b,"EndScreenView.restart",h):i.call(b,"t","EndScreenView.restart",h)))+'</bdo></button>\n	    <footer>\n	        <ul>\n	            <li class="asset icon-google">Google</li><li class="asset icon-facebook">facebook</li><li class="asset icon-twitter">Twitter</li>\n	        </ul>\n	    </footer>\n    </div>\n</div>\n';return f});this["Handlebars"]["templates"]["ExperienceEmptyView"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"];c=this.merge(c,a.helpers);e=e||{};var f="",g,h,i=c.helperMissing,j=this.escapeExpression;f+='<div class="page">\n    <div class="content">\n\n        <p class="title"><bdo>';h={hash:{},data:e};f+=j((g=c["t"]||b["t"],g?g.call(b,"ExperienceEmptyView.title",h):i.call(b,"t","ExperienceEmptyView.title",h)))+'</bdo></p>\n        <p class="subtitle"><bdo>';h={hash:{},data:e};f+=j((g=c["t"]||b["t"],g?g.call(b,"ExperienceEmptyView.message",h):i.call(b,"t","ExperienceEmptyView.message",h)))+'</bdo></p>\n        <button class="box link route" data-route="/"><bdo>';h={hash:{},data:e};f+=j((g=c["t"]||b["t"],g?g.call(b,"ExperienceEmptyView.tryAgain",h):i.call(b,"t","ExperienceEmptyView.tryAgain",h)))+"</bdo></button>\n\n    </div>\n</div>\n";return f});this["Handlebars"]["templates"]["ExperienceFullView"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"];c=this.merge(c,a.helpers);e=e||{};var f="",g,h,i=c.helperMissing,j=this.escapeExpression;f+='<div class="page">\n    <div class="content">\n\n        <p class="title"><bdo>';h={hash:{},data:e};f+=j((g=c["t"]||b["t"],g?g.call(b,"ExperienceFullView.title",h):i.call(b,"t","ExperienceFullView.title",h)))+'</bdo></p>\n        <p class="subtitle"><bdo>';h={hash:{},data:e};f+=j((g=c["t"]||b["t"],g?g.call(b,"ExperienceFullView.message",h):i.call(b,"t","ExperienceFullView.message",h)))+'</bdo></p>\n        <button class="box link route" data-route="/"><bdo>';h={hash:{},data:e};f+=j((g=c["t"]||b["t"],g?g.call(b,"ExperienceFullView.tryAgain",h):i.call(b,"t","ExperienceFullView.tryAgain",h)))+"</bdo></button>\n\n    </div>\n</div>\n";return f});this["Handlebars"]["templates"]["ExperienceLoadingView"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"];c=this.merge(c,a.helpers);e=e||{};var f="",g,h,i=c.helperMissing,j=this.escapeExpression;f+='<div class="page">\n    <div class="content">\n\n        <div class="progress">0</div>\n        <div class="title"><bdo>';h={hash:{},data:e};f+=j((g=c["t"]||b["t"],g?g.call(b,"ExperienceLoadingView.title",h):i.call(b,"t","ExperienceLoadingView.title",h)))+"</bdo></div>\n\n    </div>\n</div>\n";return f});this["Handlebars"]["templates"]["JoinView"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"];c=this.merge(c,a.helpers);e=e||{};var f="",g,h,i=c.helperMissing,j=this.escapeExpression;f+='<div class="page">\n    <div class="content">\n\n        <p class="connecting"><bdo>';h={hash:{},data:e};f+=j((g=c["t"]||b["t"],g?g.call(b,"JoinView.connecting",h):i.call(b,"t","JoinView.connecting",h)))+"</bdo></p>\n\n    </div>\n</div>\n";return f});this["Handlebars"]["templates"]["LandingPageView"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"];c=this.merge(c,a.helpers);e=e||{};var f="",g,h,i=c.helperMissing,j=this.escapeExpression;f+='<div class="page">\n    <div class="asset background"></div>\n\n    <div class="content">\n\n        <div class="asset logo-reflektor"></div>\n        <div class="asset logo-reflektor-landscape"></div>\n        <p class="instructions"><bdo>';h={hash:{},data:e};f+=j((g=c["t"]||b["t"],g?g.call(b,"LandingPage.instructions",h):i.call(b,"t","LandingPage.instructions",h)))+'</bdo></p>\n\n        <section class="connect">\n            <form name="form-connection-code">\n                <input type="text" class="connection-code" autocomplete="off" autocorrect="off" autocapitalize="off" maxlength="5" />\n            </form>\n            <button class="box connect">></button>\n        </section>\n        <p class="no-code"><bdo>';h={hash:{},data:e};f+=j((g=c["t"]||b["t"],g?g.call(b,"LandingPage.noCode",h):i.call(b,"t","LandingPage.noCode",h)))+'</bdo></p>\n\n    </div>\n\n    <footer>\n        <ul>\n            <li class="about"><bdo>';h={hash:{},data:e};f+=j((g=c["t"]||b["t"],g?g.call(b,"FooterLinksView.about",h):i.call(b,"t","FooterLinksView.about",h)))+'</bdo></li><li class="terms link external" data-url="https://www.google.com/intl/en-us/policies/"><bdo>';h={hash:{},data:e};f+=j((g=c["t"]||b["t"],g?g.call(b,"FooterLinksView.terms",h):i.call(b,"t","FooterLinksView.terms",h)))+'</bdo></li>\n        </ul>\n        <ul class="links">\n        <li class="asset icon-google">Google</li><li class="asset icon-facebook">Facebook</li><li class="asset icon-twitter">Twitter</li>\n        </ul>\n    </footer>\n</div>\n';return f});this["Handlebars"]["templates"]["PlatformNotSupportedView"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"];c=this.merge(c,a.helpers);e=e||{};return'<div class="page">\n    <div class="content">\n\n        <p class="message"><bdo>{reason}</bdo></p>\n\n    </div>\n</div>\n'});this["Handlebars"]["templates"]["PreloaderView"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"];c=this.merge(c,a.helpers);e=e||{};return'<div class="page">\n    <img class="loader-icon" src="img/essential/ajax-loader.gif" />\n</div>\n'});this["Handlebars"]["templates"]["SyncSuccessView"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"];c=this.merge(c,a.helpers);e=e||{};var f="",g,h,i=c.helperMissing,j=this.escapeExpression;f+='<div class="page">\n    <div class="content">\n\n        <p class="connected chrome-ios"><bdo>';h={hash:{},data:e};f+=j((g=c["t"]||b["t"],g?g.call(b,"SyncSuccessView.connected",h):i.call(b,"t","SyncSuccessView.connected",h)))+'</bdo></p>\n        <p class="connected other"><bdo>';h={hash:{},data:e};f+=j((g=c["t"]||b["t"],g?g.call(b,"Post.connection",h):i.call(b,"t","Post.connection",h)))+"</bdo></p>\n\n    </div>\n</div>\n";return f});this["Handlebars"]["templates"]["TouchButtonView"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"];c=this.merge(c,a.helpers);e=e||{};var f="",g,h,i=c.helperMissing,j=this.escapeExpression;f+='<div class="page">\n    <button class="touch">\n        <div class="blocker"></div>\n        <div class="up"><span><bdo>';h={hash:{},data:e};f+=j((g=c["t"]||b["t"],g?g.call(b,"ControllerView.noSleepTouch",h):i.call(b,"t","ControllerView.noSleepTouch",h)))+'</bdo></span></div>\n        <div class="over"></div>\n    </button>\n</div>\n';return f});this["Handlebars"]["templates"]["TurnItBackView"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"];c=this.merge(c,a.helpers);e=e||{};return'<div class="background"></div>\n<div class="page">\n    <div class="asset turn-it-back"></div>\n</div>\n'});var ConfigCommon=Class._extend({_public:{localisationResGetPath:"/api/client/localisation/get?lng=__lng__&ns=__ns__&format=unit9",meshApiUrl:"/api/mesh",originalUrl:window.location.protocol+"//"+window.location.host+"/m/",desktopConnectionUrl:window.location.protocol+"//"+window.location.host,sleepPreventionHackHelperUrl:"/api/client/endlessrequest/"}});var ConfigLocal=Class._extend({_public:{googleAnalyticsId:"UA-43052049-1"}});var ConfigDev=Class._extend({_public:{googleAnalyticsId:"UA-43052049-1"}});var ConfigTest=Class._extend({_public:{googleAnalyticsId:"UA-42413001-1"}});var ConfigProd=Class._extend({_public:{googleAnalyticsId:"UA-42413001-1"}});var Config=Class._extend(Class.SINGLETON,{_static:{RULES:[{host:"/([\\d]{1,3}\\.){3}[\\d]{1,3}|localhost",config:ConfigLocal},{host:"dev.arcade-fire.appspot.com",config:ConfigDev},{host:"test.arcade-fire.appspot.com",config:ConfigTest},{host:".*",config:ConfigProd}]},_public:{construct:function(){var a,b,c;b=new ConfigCommon;for(c in b){if(b[c]!==undefined){this[c]=b[c]}}for(a=0;a<Config.RULES.length;++a){if(window.location.toString().match(new RegExp(Config.RULES[a].host))){b=new Config.RULES[a].config;b._class=Config.RULES[a].config;break}}for(c in b){if(b[c]!==undefined){this[c]=b[c]}}}}});!function(){var a="/src/desktop/js/lib/stats.min.js",b="/src/desktop/js/lib/dat.gui.js";var c={stats:null,gui:null,data:{test:15},enabled:false,folders:[],delayedTimeoutId:-1,init:function(a){var b=1,c=function(){if(--b===0){if(typeof a==="function"){a()}}};this.initGui(c)},initStats:function(b){var c=this;if(!this.enabled){return}$.getScript(a,function(){c.stats=new Stats;c.stats.setMode(0);c.stats.domElement.style.position="absolute";c.stats.domElement.style.left="0px";c.stats.domElement.style.top="0px";document.body.appendChild(c.stats.domElement);window.stats=c.stats;if(typeof b==="function"){b()}})},initGui:function(a){var c=this;if(!this.enabled){return}$.getScript(b,function(){c.gui=new dat.GUI;window.gui=c.gui;if(typeof a==="function"){a()}})},add:function(a,b,c){var d=null,e=this;if(!this.enabled){return}if(!this.gui){clearTimeout(this.delayedTimeoutId);this.delayedTimeoutId=setTimeout(function(){e.add(a,b,c)},50);return}if(c){d=this["folder"+c];if(!d){d=this.gui.addFolder(c);this["folder"+c]=d;this.folders.push(d)}}if(d){return d.add(a,b).listen()}else{return this.gui.add(a,b).listen()}},remove:function(a,b){var c=null;if(!this.enabled){return}if(b){c=this["folder"+b]}if(c){c.remove(a)}else{this.gui.remove(a)}},openFolder:function(a){if(this["folder"+a]){this["folder"+a].open()}},closeFolder:function(a){if(this["folder"+a]){this["folder"+a].close()}},closeFolders:function(){var a=0;for(a=0;a<this.folders.length;++a){this.folders[a].close()}}};window.Debug=c}();var AppController=Class._extend(Class.SINGLETON,{_public:{construct:function(){this.init();this.bindEvents()},init:function(){DetectionController.getInstance().detectAll()},bindEvents:function(){var a=this;PreloadController.getInstance().events.on(PreloadController.EVENT_INITIAL_COMPLETE,function(){a.onPreloadInitialComplete()})},start:function(){var a=function(){PreloadController.getInstance().preloadInitial();AnimationController.getInstance().start()};switch(Config.getInstance()._class){case ConfigLocal:case ConfigDev:Debug.enabled=true;Debug.init(function(){a()});break;default:a()}},onPreloadInitialComplete:function(){MobileController.getInstance().hideAddressBar();if(DetectionController.getInstance().isChrome){MobileController.getInstance().preventSleep()}RoutingController.getInstance().route()}}});var AnimationController=Class._extend(Class.SINGLETON,{_static:{EVENT_FRAME:"AnimationController_EVENT_FRAME"},_public:{construct:function(){this.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}},start:function(){var a=this;if(this.running){return}this.running=true;this.requestAnimationFrame.call(window,function(){a.onFrame()})},stop:function(){this.running=false}},_private:{requestAnimationFrame:null,running:false,onFrame:function(){var a=this;this.events.trigger(AnimationController.EVENT_FRAME);if(this.running){this.requestAnimationFrame.call(window,function(){a.onFrame()})}}}});var AudioController=Class._extend(Class.SINGLETON,{_static:{EVENT_LOADED:"AudioController_EVENT_LOADED",PLAYLIST_PATH:"/m/data/final.json",OFFSET:0,USE_GAIN:true,urlParser:function(a){return Resource.get(a.replace("Sounds_assets/","media/audio/mobile/"))}},_public:{construct:function(){var a=window.AudioContext||window.webkitAudioContext,b=this;if(a){this.context=new a;this.bufferLoader=new BufferLoader(this.context);this.scheduler=new Scheduler(this.context);if(this.context.createGain&&AudioController.USE_GAIN){this.gainNode=this.context.createGain();this.gainNode.connect(this.context.destination)}}RemoteController.getInstance().events.bind(RemoteController.EVENT_VOLUME_CHANGE,function(a,c){b.onVolumeChange(c)})},load:function(){var a,b=this;if(this.loaded){return}if(!this.context){return this.events.trigger(AudioController.EVENT_LOADED)}$.get(AudioController.PLAYLIST_PATH,function(c){if(typeof c=="string")c=$.parseJSON(c);b.playlist=c.mobile;a=b.playlist.map(function(a){return a.src});b.bufferLoader.load(a.map(AudioController.urlParser),function(){b.onBuffersLoaded()})});this.loaded=true},play:function(a){var b=this;if(this.playing){return}if(a&&a.originalEvent instanceof TouchEvent){$(document).unbind("touchstart.AudioController");this.startPlaying()}else if(!this.touchEventAdded){$(document).bind("touchstart.AudioController",function(a){b.play(a)});this.touchEventAdded=true}},resume:function(){this.scheduler.resume()},pause:function(){this.scheduler.pause()},stop:function(){if(!this.playing){return}this.playing=false;this.scheduler.stop()},resync:function(){this.scheduler.resync()}},_private:{context:null,loaded:false,bufferLoader:null,gainNode:null,scheduler:null,playlist:null,touchEventAdded:false,playing:false,startPlaying:function(){if(this.context){this.playing=true;this.playSilent();this.scheduler.start()}},playSilent:function(){var a=this;if(!this.context){return}if(this.gainNode){this.gainNode.gain.value=0}var b=this.context.createOscillator();b.type=0;b.frequency.value=1;b.connect(this.gainNode||this.context.destination);b.noteOn(0);b.noteOff(.001);setTimeout(function(){if(a.gainNode){a.gainNode.gain.value=1}},200)},onBuffersLoaded:function(){var a=this;this.playlist.forEach(function(b,c){a.scheduler.add(b.when,a.bufferLoader.bufferList[c],b.loop,b.src,b.duration)});this.events.trigger(AudioController.EVENT_LOADED)},onVolumeChange:function(a){console.log("-- volume",a);if(this.gainNode){this.gainNode.gain.value=a===0?0:1}else{this.scheduler.setMuted(a===0)}}}});var FullScreenController=Class._extend(Class.SINGLETON,{_static:{EVENT_FULLSCREEN_ON:"FullScreenController_EVENT_FULLSCREEN_ON",EVENT_FULLSCREEN_OFF:"FullScreenController_EVENT_FULLSCREEN_OFF",EVENT_FULLSCREEN_CHANGE:"FullScreenController_EVENT_FULLSCREEN_CHANGE"},_public:{construct:function(){var a=this;if(document.documentElement.requestFullScreen){this.isPropertyName="fullScreen";this.requestFunctionName="requestFullScreen";this.cancelFunctionName="cancelFullScreen"}else if(document.documentElement.webkitRequestFullScreen){this.isPropertyName="webkitIsFullScreen";this.requestFunctionName="webkitRequestFullScreen";this.cancelFunctionName="webkitCancelFullScreen"}else if(document.documentElement.mozRequestFullScreen){this.isPropertyName="mozfullScreen";this.requestFunctionName="mozRequestFullScreen";this.cancelFunctionName="mozCancelFullScreen"}else if(document.documentElement.mozRequestFullScreen){this.requestFunctionName="mozRequestFullScreen";this.cancelFunctionName="mozCancelFullScreen"}$(document).bind("webkitfullscreenchange mozfullscreenchange fullscreenchange",function(){a.onFullScreenChange()})},toggle:function(a){if(this.isPropertyName){if(this.isFullScreen()){this.cancel(a)}else{this.request(a)}}},request:function(a){if(this.requestFunctionName){a[this.requestFunctionName](Element.ALLOW_KEYBOARD_INPUT)}},cancel:function(a){if(this.cancelFunctionName){document[this.cancelFunctionName]()}return a},isFullScreen:function(){return document[this.isPropertyName]}},_private:{isPropertyName:null,requestFunctionName:null,cancelFunctionName:null,onFullScreenChange:function(){this.events.trigger(FullScreenController.EVENT_FULLSCREEN_CHANGE);if(this.isFullScreen()){this.events.trigger(FullScreenController.EVENT_FULLSCREEN_ON)}else{this.events.trigger(FullScreenController.EVENT_FULLSCREEN_OFF)}}}});var TimelineController=Class._extend(Class.SINGLETON,{_public:{construct:function(){var a=this;RemoteController.getInstance().events.bind(RemoteController.EVENT_PLAY,function(){a.onPlay()});RemoteController.getInstance().events.bind(RemoteController.EVENT_PAUSE,function(){a.onPause()});RemoteController.getInstance().events.bind(RemoteController.EVENT_RESYNC,function(b,c,d){a.onResync(c,d)})},start:function(){var a=this;this.stop();AnimationController.getInstance().events.bind(AnimationController.EVENT_FRAME+".TimelineController",function(){a.onFrame()})},stop:function(){AnimationController.getInstance().events.unbind(AnimationController.EVENT_FRAME+".TimelineController")},getCurrentTime:function(){return this.localTime}},_private:{playing:false,localTimeOffset:0,localTime:0,timeValid:false,nextValidTime:undefined,onPlay:function(){this.timeValid=false;this.playing=true},onPause:function(){this.timeValid=false;this.playing=false;AudioController.getInstance().pause()},onResync:function(a,b){AudioController.getInstance().pause();this.localTimeOffset=b-a;this.timeValid=false;this.nextValidTime=a},onFrame:function(){if(this.timeValid&&this.playing){this.localTime=clocksync.time()+this.localTimeOffset}else if(this.playing&&this.nextValidTime&&clocksync.time()>=this.nextValidTime){this.timeValid=true;this.localTime=clocksync.time()+this.localTimeOffset;AudioController.getInstance().resume();
AudioController.getInstance().resync()}}}});var AnalyticsController=Class._extend(Class.SINGLETON,{_static:{EVENT_SYNC_TIMEOUT:{category:"sync",action:"timeout",label:"sync timeout",value:1},EVENT_SYNC_FULL:{category:"sync",action:"full",label:"sync full",value:1},EVENT_SYNC_WRONG_CODE:{category:"sync",action:"wrong code",label:"sync wrong code",value:1},EVENT_SHARE_GOOGLE:{category:"share",action:"google",label:"share google",value:1},EVENT_SHARE_FACEBOOK:{category:"share",action:"facebook",label:"share facebook",value:1},EVENT_SHARE_TWITTER:{category:"share",action:"twitter",label:"share twitter",value:1}},_public:{construct:function(){this.setupGoogleAnalyticsAPI()},trackEvent:function(a){console.log("[event]",a.category,"|",a.action,"|",a.label,"|",a.value);_gaq.push(["_trackEvent",a.category,a.action,a.label,a.value])},trackPageView:function(a){console.log("[pageview]",a);_gaq.push(["_trackPageview","_view_/mobile/"+a])}},_private:{setupGoogleAnalyticsAPI:function(){window._gaq=window._gaq||[];_gaq.push(["_setAccount",Config.getInstance().googleAnalyticsId]);_gaq.push(["_trackPageview"]);!function(){var a=document.createElement("script");a.type="text/javascript";a.async=true;a.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}()}}});var MobileController=Class._extend(Class.SINGLETON,{_static:{STATE_FINGER_DOWN:"MobileController_STATE_FINGER_DOWN",STATE_FINGER_UP:"MobileController_STATE_FINGER_UP",PAGE_VISIBILITY:true},_public:{construct:function(){var a=this;$(document).bind("touchstart.MobileController",function(){a.onTouchStart()});$(document).bind("touchmove.MobileController",function(){a.onTouchMove()});$(document).bind("touchend.MobileController",function(){a.onTouchEnd()});document.addEventListener("webkitvisibilitychange",this.pageVisibilityChange.bind(this),false)},pageVisibilityChange:function(a){MobileController.PAGE_VISIBILITY=document.webkitHidden;if(!MobileController.PAGE_VISIBILITY){RemoteController.getInstance().onPeerPause();RemoteController.getInstance().sendSleepPauseInfo()}},preventSleep:function(){if(DetectionController.getInstance().isDebug){$("body").append($("<div id='sleep-debug'></div>"));AnimationController.getInstance().events.on(AnimationController.EVENT_FRAME,this.displayDebugData)}switch(DetectionController.getInstance().os){case DetectionController.OS_IOS:this.preventSleepIos();break;case DetectionController.OS_ANDROID:this.preventSleepAndroid();break}},allowSleep:function(){switch(DetectionController.getInstance().os){case DetectionController.OS_IOS:this.allowSleepIos();break;case DetectionController.OS_ANDROID:this.allowSleepAndroid();break}},disableMagnifyingGlass:function(){if(DetectionController.getInstance().os!=DetectionController.OS_IOS)return;this.glassIntervalID=setInterval(this.preventMagnfyingGlassiOS.bind(this),1e3)},enableMagnifyingGlass:function(){clearInterval(this.glassIntervalID);$("*").unbind("touchstart.StopMouseEvents")},preventMagnfyingGlassiOS:function(){$("*").not(".connection-code").css({"-webkit-user-drag":"none","-webkit-user-modify":"none","-webkit-highlight":"none","-webkit-user-callout":"none","-webkit-touch-callout":"none","-webkit-user-select":"none"});$("*").bind("touchstart.StopMouseEvents",this.stopMouseEvents.bind(this))},preventUndoShake:function(){$(".connection-code").unbind("input").bind("input",this.unfocusInput);$(window).unbind("keydown").bind("keydown",this.handleInput)},unfocusInput:function(a){a.preventDefault();a.stopPropagation();$(window).unbind("keydown")},handleInput:function(a){a.preventDefault();a.stopPropagation();$(".connection-code").unbind("input");var b=$(".connection-code").val();if(a.keyCode===8&&b.length){$(".connection-code").val(b.slice(0,b.length-1));return}else{$(".connection-code").val(b+String.fromCharCode(a.keyCode).toLowerCase())}},stopMouseEvents:function(a){this.onTouchStart();a.preventDefault();a.stopPropagation();return false},showAddressBar:function(){this.hideAddressBarAllowed=false},hideAddressBar:function(){var a=$(".main")[0],b=window.navigator.standalone,c=0,d=0,e=0,f=this;this.hideAddressBarAllowed=true;if(DetectionController.getInstance().isIos||true){window.setupScroll=window.onload=function(d){var f=document.documentElement.clientHeight;if(!e||c!=document.documentElement.clientWidth){e=f}if(DetectionController.getInstance().isIos&&!b&&f==e&&!DetectionController.getInstance().isTablet){f+=DetectionController.getInstance().isChrome||DetectionController.getInstance().osVersion==="7_0"?0:60}var g=$("input:focus");if(DetectionController.getInstance().isIos||!g.length){a.style.height=f+"px"}setTimeout(function(){if(g.length&&DetectionController.getInstance().isIos){var a=g.offset();window.scrollTo(0,a.top-20)}else{window.scrollTo(0,1)}},0)};$(window).bind("resize orientationchange webkitfullscreenchange mozfullscreenchange fullscreenchange",function(a){var b=document.documentElement.clientWidth;var e=document.documentElement.clientHeight;var g=$("input:focus");var h=!DetectionController.getInstance().isIos&&g.length&&a.type==="orientationchange";if(h){g.blur()}if(!f.hideAddressBarAllowed)return;if(c===b&&d===e&&!h){}else{window.setupScroll(a);c=b;d=e}});$(window).trigger("resize")}}},_private:{iOsSleepIntervalId:-1,androidSleepStarted:false,androidSleepMethod:0,glassIntervalID:-1,lastMoveSendTime:0,isTouchDown:false,hideAddressBarAllowed:false,preventSleepIos:function(a){this.allowSleepIos();if(DetectionController.getInstance().isSafari&&this.iOsSleepIntervalId===-1){console.log("+++ NO SLEEP HACK iOS +++");this.iOsSleepIntervalId=setInterval(function(){window.location.href=Config.getInstance().sleepPreventionHackHelperUrl;window.setTimeout(function(){window.stop()},0)},2e4);if(a){window.location.href=Config.getInstance().sleepPreventionHackHelperUrl;window.setTimeout(function(){window.stop()},0)}}},allowSleepIos:function(){return},displayDebugData:function(){switch(DetectionController.getInstance().os){case DetectionController.OS_IOS:$("sleep-debug").html("this.iOsSleepIntervalId: "+this.iOsSleepIntervalId);break;case DetectionController.OS_ANDROID:switch(this.androidSleepMethod){case 0:$("#sleep-debug").html("this.iOsSleepIntervalId: "+$("#videoAudioLoop")[0].currentTime);break;case 1:$("#sleep-debug").html("this.iOsSleepIntervalId: "+$("#videoLoop")[0].currentTime);break}break}},preventSleepAndroid:function(){var a=this;console.log("+++ NO SLEEP HACK ANDROID +++");window.addEventListener("touchstart",function(){a.__preventSleepAndroid()})},__preventSleepAndroid:function(a){var b,c=this;if(this.androidSleepStarted){return}$("#videoAudioLoop").remove();this.androidSleepStarted=true;b=document.createElement("video");b.setAttribute("id","videoAudioLoop");b.setAttribute("loop",true);b.src=Resource.get("media/video/silence.mp4");b.addEventListener("progress",function(){if(b.currentTime===0){b.removeEventListener("progress",arguments.callee,false);c.androidSleepStarted=false}});b.play();document.body.appendChild(b)},allowSleepAndroid:function(){return},onTouchStart:function(){if(this.isTouchDown){return}this.isTouchDown=true;MobileController.getInstance().events.trigger(MobileController.STATE_FINGER_DOWN,true);RemoteController.getInstance().sendTouchInfo("start")},onTouchMove:function(){MobileController.getInstance().events.trigger(MobileController.STATE_FINGER_DOWN,true);if((new Date).getTime()-this.lastMoveSendTime>1e3){RemoteController.getInstance().sendTouchInfo("move");this.lastMoveSendTime=(new Date).getTime()}},onTouchEnd:function(){this.isTouchDown=false;MobileController.getInstance().events.trigger(MobileController.STATE_FINGER_UP,true);RemoteController.getInstance().sendTouchInfo("end")}}});var PreloadController=Class._extend(Class.SINGLETON,{_static:{EVENT_INITIAL_PROGRESS:"PreloadController_EVENT_INITIAL_PROGRESS",EVENT_INITIAL_COMPLETE:"PreloadController_EVENT_INITIAL_COMPLETE",EVENT_MAIN_PROGRESS:"PreloadController_EVENT_MAIN_PROGRESS",EVENT_MAIN_COMPLETE:"PreloadController_EVENT_MAIN_COMPLETE",EVENT_EXPERIENCE_PROGRESS:"PreloadController_EVENT_EXPERIENCE_PROGRESS",EVENT_EXPERIENCE_COMPLETE:"PreloadController_EVENT_EXPERIENCE_COMPLETE"},_public:{preloadInitial:function(){var a=this,b=new InitialPreloadTask;b.events.on(Task.EVENT_PROGRESS,function(b,c){a.events.trigger(PreloadController.EVENT_INITIAL_PROGRESS,[c.progress]);return b});b.events.on(Task.EVENT_DONE,function(){a.events.trigger(PreloadController.EVENT_INITIAL_COMPLETE)});b.execute()},preloadMain:function(){var a=this,b=new MainPreloadTask;b.events.on(Task.EVENT_PROGRESS,function(b,c){a.events.trigger(PreloadController.EVENT_MAIN_PROGRESS,[c.progress]);return b});b.events.on(Task.EVENT_DONE,function(){a.events.trigger(PreloadController.EVENT_MAIN_COMPLETE)});b.execute()},preloadExperience:function(){var a=this,b=new ExperiencePreloadTask;b.events.on(Task.EVENT_PROGRESS,function(b,c){a.events.trigger(PreloadController.EVENT_EXPERIENCE_PROGRESS,[c.progress]);return b});b.events.on(Task.EVENT_DONE,function(){a.events.trigger(PreloadController.EVENT_EXPERIENCE_COMPLETE)});b.execute()}}});var DetectionController=Class._extend(Class.SINGLETON,{_static:{PLATFORM_MOBILE:"mobile",PLATFORM_TABLET:"tablet",PLATFORM_DESKTOP:"desktop",OS_MAC:"Mac",OS_WINDOWS:"Windows",OS_LINUX:"Linux",OS_IOS:"iOS",OS_ANDROID:"Android",BROWSER_CHROME:"Chrome",BROWSER_SAFARI:"Safari",BROWSER_FIREFOX:"Firefox",BROWSER_INTERNET_EXPLORER:"InternetExplorer",DISPLAY_NORMAL:"1x",DISPLAY_RETINA:"2x",REQUIREMENTS:{hasCanvas:true,hasWebSockets:true,hasGyroscope:true,isOldIOS:false,isSupportedBrowser:true}},_public:{isDebug:false,platform:null,display:null,os:null,osVersion:null,browser:null,browserVersion:null,isMobile:false,isTablet:false,isDesktop:false,isTouch:false,isRetina:false,isIos:false,isOldIOS:false,isAndroid:false,isMac:false,isWindows:false,isLinux:false,isSafari:false,isChrome:false,isFirefox:false,isInternetExplorer:false,isSupportedBrowser:false,hasCanvas:false,hasWebSockets:false,hasGyroscope:false,detectAll:function(){this.detectPlatform();this.detectOs();this.detectBrowser();this.detectDisplay();this.detectCanvas();this.detectWebSockets();this.detectGyroscope();this.addStyles()},getSupportInfo:function(){var a,b={supported:true,reason:[]},c,d;for(a in DetectionController.REQUIREMENTS){if(DetectionController.REQUIREMENTS[a]!==undefined){c=DetectionController.REQUIREMENTS[a];d=[];d.push(DetectionController.REQUIREMENTS[a]);if(c!==undefined&&d.__proto__===[].__proto__){if(d.indexOf(this[a])===-1){b.supported=false;b.reason.push({property:a,value:this[a]})}}else{if(this[a]!==c){b.supported=false;b.reason.push({property:a,value:this[a]})}}}}return b},detectPlatform:function(){this.isDebug=window.location.search.indexOf("debug")!==-1;this.isMobile=$(".detection .mobile").css("display")==="block";this.isTablet=$(".detection .tablet").css("display")==="block"||navigator.userAgent.toLowerCase().indexOf("android")!==-1;this.isDesktop=!this.isMobile&&!this.isTablet;this.isTouch=window.ontouchstart!==undefined;this.platform=this.isMobile?DetectionController.PLATFORM_MOBILE:this.isTablet?DetectionController.PLATFORM_TABLET:DetectionController.PLATFORM_DESKTOP},detectOs:function(){this.isMac=navigator.platform.toLowerCase().indexOf("mac")!==-1;if(this.isMac){this.os=DetectionController.OS_MAC}this.isWindows=navigator.platform.toLowerCase().indexOf("win")!==-1;if(this.isWindows){this.os=DetectionController.OS_WINDOWS}this.isLinux=navigator.platform.toLowerCase().indexOf("linux")!==-1;if(this.isLinux){this.os=DetectionController.OS_LINUX}this.isIos=navigator.userAgent.match(/(iPad|iPhone|iPod)/g)!==null;if(this.isIos){this.os=DetectionController.OS_IOS;var a=navigator.userAgent.match(/OS ([\d_]+)/);if(a&&a[1]){this.osVersion=a[1]}}this.isAndroid=navigator.userAgent.toLowerCase().indexOf("android")!==-1;if(this.isAndroid){this.os=DetectionController.OS_ANDROID}if(this.isIos&&this.osVersion[0]<=5){this.isOldIOS=true}},detectBrowser:function(){this.isSupportedBrowser=true;this.isFirefox=navigator.userAgent.indexOf("Firefox")!==-1;if(this.isFirefox){this.browser=DetectionController.BROWSER_FIREFOX;this.isSupportedBrowser=false}this.isChrome=navigator.userAgent.indexOf("Chrome")!==-1||navigator.userAgent.indexOf("CriOS")!==-1;if(this.isChrome){this.browser=DetectionController.BROWSER_CHROME}this.isSafari=!this.isChrome&&navigator.userAgent.indexOf("Safari")!==-1;if(this.isSafari){this.browser=DetectionController.BROWSER_SAFARI}this.isInternetExplorer=navigator.userAgent.indexOf("MSIE")!==-1;if(this.isInternetExplorer){this.browser=DetectionController.BROWSER_INTERNET_EXPLORER;this.browserVersion=parseInt(navigator.userAgent.match(/MSIE \d+\.\d+/g)[0].match(/\d+/)[0],10)}},detectLanguage:function(){this.language=window.i18n.lng().toLowerCase();$("html").addClass("lng-"+this.language)},detectDisplay:function(){this.isRetina=$(".detection .display-retina").css("display")==="block";this.display=this.isRetina?DetectionController.DISPLAY_RETINA:DetectionController.DISPLAY_NORMAL},detectCanvas:function(){this.hasCanvas=window.FlashCanvas===undefined},detectWebSockets:function(){this.hasWebSockets=window.WebSocket!==undefined},detectGyroscope:function(){this.hasGyroscope=window.DeviceOrientationEvent!==undefined},addStyles:function(){var a=$("html");a.addClass("browser-"+this.browser);a.addClass("browser-version-"+this.browserVersion);a.addClass("os-"+this.os);a.addClass(this.isTouch?"touch":"mouse");a.addClass(this.isDebug?"debug":"")}},_private:{getIOSVersion:function(){if(/iP(hone|od|ad)/.test(navigator.platform)){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]}}}});var LocalisationController=Class._extend(Class.SINGLETON,{_static:{EVENT_READY:"LocalisationController_EVENT_READY"},_public:{init:function(){var a=this,b;window.Handlebars.registerHelper("t",function(a){return new window.Handlebars.SafeString(window.i18n.t(a))});b=this.getQueryStringLanguage();if(b){this.isLanguageSupported(b,function(c){if(c){a.initI18Next(b)}else{if(b.indexOf("-")===-1){b=null;a.initI18Next(b)}else{b=b.substring(0,b.indexOf("-"));a.isLanguageSupported(b,function(c){if(!c){b=null}a.initI18Next(b)})}}})}else{this.initI18Next(b)}},initI18Next:function(a){var b=this;window.i18n.init({fallbackLng:"en-us",detectLngQS:"lng",cookieName:"lng",ns:"mobile",lng:a||window.LANGUAGE,resGetPath:Config.getInstance().localisationResGetPath},function(){DetectionController.getInstance().detectLanguage();b.events.trigger(LocalisationController.EVENT_READY)})},getQueryStringLanguage:function(){var a=window.location.search.match("lng=([a-zA-Z]+(-)?[a-zA-Z]+)");return a&&a.length>1?a[1]:null},getCookieLanguage:function(){var a=document.cookie.match("lng=([a-zA-Z]+(-)?[a-zA-Z]+)");return a&&a.length>1?a[1]:null},isLanguageSupported:function(a,b){if(typeof b!=="function"){return}$.get(Config.getInstance().localisationResGetPath.replace("__lng__",a).replace("__ns__","mobile")).done(function(){b(true)}).error(function(){b(false)})}}});var RoutingControllerBase=Class._extend(Class.ABSTRACT,{_public:{historyStates:[],history:[],construct:function(a,b){this.supportsHistory=!!window.history;this.routes=a;this.baseUrl=b},init:function(){var a=this;setInterval(function(){a.checkHashChange()},200)},back:function(){this.historyStates.pop();var a=this.historyStates.pop();this.routeDefault();this.route(a||"/")},route:function(a,b){var c=!!a,d,e,f=true,g;a=a||window.location.pathname+window.location.search+window.location.hash;d=this.parseUrl(a);if(a.indexOf("__")!==0){this.history.push(a)}if(!this.initialRouted){if(!this.routeInitial()){return false}this.initialRouted=true}e=this.getRouteHandlers(d);for(g=0;g<e.length;++g){if(e[g].preventDefault){f=false}if(e[g].trigger===false){c=false}}if(f){this.routeDefault()}for(g=0;g<e.length;++g){if(this.history.length<2&&e[g].firstRoute){this[e[g].firstRoute](d)}if(e.length===1||!e[g].exclusive){this[e[g].handler](d)}}if(b&&b.trigger&&c){this.trigger(a)}this.lastHash=window.location.hash},routeInitial:function(){return},routeDefault:function(){return}},_private:{routes:null,baseUrl:"",initialRouted:false,supportsHistory:false,lastHash:null,lastState:null,parseUrl:function(a){var b,c,d,e,f;if(a.indexOf(this.baseUrl)===0){a=a.replace(this.baseUrl,"/")}if(a.indexOf("//")===0){a=a.substring(1,a.length)}if(a.lastIndexOf("/")===a.length-1&&a.length!==1){a=a.substring(0,a.length-1)}b=a.indexOf("#");if(!this.supportsHistory&&b!==-1){a=a.substring(b+1,a.length);b=a.indexOf("#")}f=a.indexOf("?");c=b===-1?"":a.substring(b+1,a.length);d=this.parseSearch(f===-1?"":b===-1?a.substring(f+1,a.length):a.substring(f+1,b));e=f===-1?b===-1?a:a.substring(0,b):a.substring(0,f);return{base:e,hash:c,search:d}},getRouteHandlers:function(a){var b=[],c,d,e;for(c=0;c<this.routes.length;++c){d=this.routes[c];e=a.base.match(new RegExp(d.base));if(e){b.push(d)}}return b},parseSearch:function(a){var b={},c=a.split("&"),d,e;for(e=0;e<c.length;++e){d=c[e].split("=");b[d[0]]=d[1]}return b},trigger:function(a){if(this.supportsHistory){window.history.pushState(null,null,this.baseUrl+a);this.historyStates.push(a)}else{window.location.hash="#"+a}},checkHashChange:function(){if(window.location.hash!==this.lastHash){this.lastHash=window.location.hash;this.onHashChange()}},onHashChange:function(){this.route()}}});var RoutingController=RoutingControllerBase._extend(Class.SINGLETON,{_static:{BASE_URL:"/m",ROUTES:[{base:"^\\/$",handler:"routeLandingPage"},{base:"^\\/controller(\\/)?$",handler:"routeController"},{base:"^\\/disconnected(\\/)?$",handler:"routeDisconnected"},{base:"^\\/end(\\/)?$",handler:"routeEnd"},{base:"^\\/about(\\/)?$",handler:"routeAbout"},{base:"__back__",handler:"back",trigger:false}]},_public:{enabled:false,construct:function(){RoutingControllerBase.call(this,RoutingController.ROUTES,RoutingController.BASE_URL);View.registerHelper(function(){var a=i18n.lng().toLowerCase().indexOf("ar")===0?"rtl":"ltr";this.$container.find("bdo").each(function(){if($(this).attr("dir")=="ltr"){var b=$(this).text().split("").reverse().join("");$(this).replaceWith(b)}else $(this).attr("dir",a)});if(a=="rtl"){this.$container.find("bdo").each(function(){$(this).html($(this).html())})}},true);View.registerHelper(function(){this.$container.find(".link").each(function(){var a=$(this);a.off("click");if(a.hasClass("route")){a.bind("click",function(){RoutingController.getInstance().route(a.data("route"),a.hasClass("trigger")?{trigger:true}:null)})}else{a.bind("click",function(){window.open(a.data("url"),a.hasClass("external")?"_blank":"_self")})}})});ViewController.getInstance().init({"section.PreloaderView":{id:"PreloaderView",Class:PreloaderView},"section.LandingPageView":{id:"LandingPageView",Class:LandingPageView},"section.JoinView":{id:"JoinView",Class:JoinView},"section.ExperienceEmptyView":{id:"ExperienceEmptyView",Class:ExperienceEmptyView},"section.ExperienceFullView":{id:"ExperienceFullView",Class:ExperienceFullView},"section.ConnectionTimeoutView":{id:"ConnectionTimeoutView",Class:ConnectionTimeoutView},"section.SyncSuccessView":{id:"SyncSuccessView",Class:SyncSuccessView},"section.ExperienceLoadingView":{id:"ExperienceLoadingView",Class:ExperienceLoadingView},"section.DisconnectedView":{id:"DisconnectedView",Class:DisconnectedView},"section.TouchButtonView":{id:"TouchButtonView",Class:TouchButtonView},"section.ControllerView":{id:"ControllerView",Class:ControllerView},"section.EndScreenView":{id:"EndScreenView",Class:EndScreenView},"section.AboutView":{id:"AboutView",Class:AboutView},"section.AxelleVideoView":{id:"AxelleVideoView",Class:AxelleVideoView},"section.TurnItBackView":{id:"TurnItBackView",Class:TurnItBackView},"section.PlatformNotSupportedView":{id:"PlatformNotSupportedView",Class:PlatformNotSupportedView}});this.bindExceptionViews();this.init()},bindExceptionViews:function(){var a=this;RemoteController.getInstance().events.bind(RemoteController.EVENT_PEER_LEAVE,function(){window.location.href="/m/disconnected"});RemoteController.getInstance().events.bind(RemoteController.EVENT_MESH_CLOSE,function(){window.location.href="/m/disconnected"});RemoteController.getInstance().events.bind(RemoteController.EVENT_EXPERIENCE_END,function(){a.route("/end")});RemoteController.getInstance().events.bind(RemoteController.EVENT_EXPERIENCE_RESTART,function(){if(!ViewController.getInstance().getView("ControllerView").shown){a.route("/controller")}})},routeInitial:function(){var a=DetectionController.getInstance().getSupportInfo();RoutingControllerBase.prototype.routeInitial.call(this);$(".code-loader").remove();if(!a.supported){this.routeNotSupported(a);return false}this.routePreloader();return true},routeDefault:function(){ViewController.getInstance().getView("LandingPageView").hide();ViewController.getInstance().getView("JoinView").hide();ViewController.getInstance().getView("ExperienceEmptyView").hide();ViewController.getInstance().getView("ExperienceFullView").hide();ViewController.getInstance().getView("ConnectionTimeoutView").hide();ViewController.getInstance().getView("SyncSuccessView").hide();ViewController.getInstance().getView("ExperienceLoadingView").hide();ViewController.getInstance().getView("DisconnectedView").hide();ViewController.getInstance().getView("ControllerView").hide();ViewController.getInstance().getView("TouchButtonView").hide();ViewController.getInstance().getView("EndScreenView").hide();ViewController.getInstance().getView("AxelleVideoView").hide();ViewController.getInstance().getView("TurnItBackView").hide();ViewController.getInstance().getView("PlatformNotSupportedView").hide();ViewController.getInstance().getView("AboutView").hide()},routeDesktop:function(){window.location.href="/"},routeNotSupported:function(a){ViewController.getInstance().getView("PlatformNotSupportedView").show(a)},routePreloader:function(){ViewController.getInstance().getView("PreloaderView").show()},routeLandingPage:function(){if(!this.enabled){return}ViewController.getInstance().getView("LandingPageView").show()},routeController:function(){ViewController.getInstance().getView("ControllerView").show()},routeDisconnected:function(){MobileController.getInstance().enableMagnifyingGlass();MobileController.getInstance().allowSleepIos();ViewController.getInstance().getView("DisconnectedView").show()},routeEnd:function(){MobileController.getInstance().enableMagnifyingGlass();ViewController.getInstance().getView("EndScreenView").show()},routeAbout:function(){MobileController.getInstance().enableMagnifyingGlass();ViewController.getInstance().getView("AboutView").show()}}});var ViewController=Class._extend(Class.SINGLETON,{_static:{},_public:{init:function(a){var b,c,d;for(d in a){if(a.hasOwnProperty(d)){b=a[d].id;if(!this.viewsById[b]){c=a[d].Class;this.viewsById[b]=new c(b,d)}}}},getView:function(a){return this.viewsById[a]}},_private:{viewsById:{}}});var RemoteController=Class._extend(Class.SINGLETON,{_static:{EVENT_CONNECTION_CODE_READY:"RemoteController_EVENT_CONNECTION_URL_READY",EVENT_PEER_EXIST:"RemoteController_EVENT_PEER_EXIST",EVENT_PEER_ENTER:"RemoteController_EVENT_PEER_ENTER",EVENT_PEER_LEAVE:"RemoteController_EVENT_PEER_LEAVE",EVENT_PEER_READY:"RemoteController_EVENT_PEER_READY",EVENT_MESH_EMPTY:"RemoteController_EVENT_MESH_EMPTY",EVENT_MESH_FULL:"RemoteController_EVENT_MESH_FULL",EVENT_MESH_CLOSE:"RemoteController_EVENT_MESH_CLOSE",EVENT_PEER_INVALID_PLATFORM:"RemoteController_EVENT_PEER_INVALID_PLATFORM",EVENT_EXPERIENCE_START:"RemoteController_EVENT_EXPERIENCE_START",EVENT_EXPERIENCE_END:"RemoteController_EVENT_EXPERIENCE_END",EVENT_EXPERIENCE_RESTART:"RemoteController_EVENT_EXPERIENCE_RESTART",EVENT_AXELLE_START:"RemoteController_EVENT_AXELLE_START",EVENT_AXELLE_PAUSE:"RemoteController_EVENT_AXELLE_PAUSE",EVENT_AXELLE_HIDE:"RemoteController_EVENT_AXELLE_HIDE",EVENT_TURNITBACK_START:"RemoteController_EVENT_TURNITBACK_START",EVENT_TURNITBACK_STOP:"RemoteController_EVENT_TURNITBACK_STOP",EVENT_LUMINOSITY_CHANGE:"RemoteController_EVENT_LUMINOSITY_CHANGE",EVENT_PLAY:"RemoteController_EVENT_PLAY",EVENT_PAUSE:"RemoteController_EVENT_PAUSE",EVENT_RESYNC:"RemoteController_EVENT_RESYNC",EVENT_VOLUME_CHANGE:"RemoteController_EVENT_VOLUME_CHANGE",INFO_PLATFROM_CHOME_IOS:"RemoteController_EVENT_INFO_PLATFROM_CHOME_IOS",MODE_JOIN:"join",MODE_HOST:"host"},_public:{resynced:false,host:function(){if(this.mesh){this.dispose()}this.mode=RemoteController.MODE_HOST;this.mesh=new window.Mesh(null,{api:Config.getInstance().meshApiUrl,autoConnect:false,useWebRTC:false});this.bindEvents();this.mesh.connect()},waitForConnectionCode:function(){if(window.LocalAutoConnectSocket!==undefined&&LocalAutoConnectSocket.getInstance().enabled){console.log("Automatic Local Connection.");$.cookie("code","");var a=false;LocalAutoConnectSocket.getInstance().connect();LocalAutoConnectSocket.getInstance().events.on(LocalAutoConnectSocket.EVENT_URL_RECEIVED,function(b,c){if(a)return;a=true;console.log("URL Received");ViewController.getInstance().getView("LandingPageView").forceConnection(c.code);ViewController.getInstance().getView("ControllerView").show();ViewController.getInstance().getView("ExperienceEmptyView").hide();ViewController.getInstance().getView("ExperienceEmptyView").$container.hide()});LocalAutoConnectSocket.getInstance().askForURL()}},join:function(a){if(this.mesh){this.dispose()}this.mode=RemoteController.MODE_JOIN;this.mesh=new window.Mesh(a,{api:Config.getInstance().meshApiUrl,autoConnect:false,useWebRTC:false});this.bindEvents();this.mesh.connect()},tryReconnect:function(a,b,c){var d=this,e=-1,f=function(){clearTimeout(e);d.events.unbind(RemoteController.EVENT_PEER_ENTER+".Reconnect");d.events.unbind(RemoteController.EVENT_MESH_FULL+".Reconnect");d.events.unbind(RemoteController.EVENT_MESH_EMPTY+".Reconnect")};console.log("-- trying to reconnect");this.events.bind(RemoteController.EVENT_PEER_ENTER+".Reconnect",function(){f();console.log("-- reconnect success");if(typeof b==="function"){b()}});this.events.bind(RemoteController.EVENT_MESH_FULL+".Reconnect",function(){f();console.log("-- reconnect mesh full");if(typeof c==="function"){c()}});this.events.bind(RemoteController.EVENT_MESH_EMPTY+".Reconnect",function(){f();console.log("-- reconnect mesh empty");if(typeof c==="function"){c()}});e=setTimeout(function(){f();console.log("-- reconnect timeout");if(typeof c==="function"){c()}},JoinView.TIMEOUT);this.join(a)},reportLoadingProgress:function(a){if(this.mesh){this.mesh.trigger("progress",a)}},ready:function(a){var b=this;if(!this.readyToStart&&a){setTimeout(function(){b.ready(a)},20)}else{this.mesh.trigger("ready")}},sendOrientation:function(a,b,c,d,e,f,g){if(this.mesh){this.mesh.trigger("orientation",a.toFixed(3),b.toFixed(3),c.toFixed(3),d.toFixed(3),e.toFixed(2),f.toFixed(2),g.toFixed(2),clocksync.time())}},restart:function(){if(this.mesh){this.mesh.trigger("restart")}},sendSleepPauseInfo:function(a){if(this.mesh){this.mesh.trigger("hidden",{pageVisibility:a})}},sendTouchInfo:function(a){if(this.mesh){this.mesh.trigger("touch",{state:a,time:clocksync.time()})}}},_private:{mesh:null,peerNode:null,readyToStart:false,bindEvents:function(){var a=this;this.mesh.self.bind("connect",function(){a.onMeshConnect();a.onPeerExist.apply(a,arguments)});this.mesh.self.bind("error",function(){a.onMeshClose()});this.mesh.self.bind("close",function(){a.onMeshClose()});this.mesh.self.bind("enter",function(b){this.mesh.trigger("platfrom_info");a.onPeerEnter(b)});this.mesh.self.bind("leave",function(b){a.onPeerLeave(b)});this.mesh.bind("bind",function(b){a.onPeerBind(b)})},bindPeerEvents:function(a){var b=this;a.bind("start",function(){b.onPeerStart()});a.bind("end",function(){b.onPeerEnd()});a.bind("restart",function(){b.onPeerRestart()});a.bind("play",function(){b.onPeerPlay()});a.bind("pause",function(){b.onPeerPause()});a.bind("resync",function(a,c){b.onPeerResync(a,c)});a.bind("axelle_start",function(a){b.onPeerAxelleStart(a)});a.bind("axelle_pause",function(a){b.onPeerAxellePause(a)});a.bind("axelle_hide",function(){b.onPeerAxelleHide()});a.bind("turnitback_start",function(){b.onTurnItBackStart()});a.bind("turnitback_stop",function(){b.onTurnItBackStop()});a.bind("setluminosity",function(a){b.onLuminosity(a)});a.bind("volume",function(a){b.onPeerVolumeChange(a)})},dispose:function(){if(this.peerNode){this.peerNode.unbind();this.peerNode=null}if(this.mesh){this.mesh.unbind();this.mesh.disconnect();this.mesh=null}this.readyToStart=false},onMeshConnect:function(){this.events.trigger(RemoteController.EVENT_CONNECTION_CODE_READY,[this.mesh.options.name])},onMeshClose:function(){this.events.trigger(RemoteController.EVENT_MESH_CLOSE);console.log("Mesh Close");if(window.LocalAutoConnectSocket!==undefined&&window.LocalAutoConnectSocket.getInstance().connected){console.log("Reloading Autoconnection.");window.location.href=Config.getInstance().originalUrl}},onPeerExist:function(){var a;if(this.mode===RemoteController.MODE_JOIN&&arguments.length<1){return this.events.trigger(RemoteController.EVENT_MESH_EMPTY)}for(a=0;a<arguments.length;++a){this.onPeerEnter(arguments[a])}},onPeerEnter:function(a){var b=this;if(this.peerNode){this.events.trigger(RemoteController.EVENT_MESH_FULL,[a])}else{a.bind("platform",function(c){b.onPeerPlatform(a,c)})}},onPeerLeave:function(a){if(this.peerNode&&this.peerNode.id===a.id){this.dispose();this.events.trigger(RemoteController.EVENT_PEER_LEAVE)}console.log("Peer Leave");if(window.LocalAutoConnectSocket!==undefined&&window.LocalAutoConnectSocket.getInstance().connected){console.log("Reloading Autoconnection.");window.location.href=Config.getInstance().originalUrl}},onPeerBind:function(a){switch(a){case"platform":this.mesh.trigger("platform",this.peerNode?RemoteController.EVENT_MESH_FULL:DetectionController.getInstance().platform,DetectionController.getInstance().isChrome&&DetectionController.getInstance().isIos?RemoteController.INFO_PLATFROM_CHOME_IOS:null);break;case"ready":this.readyToStart=true;this.events.trigger(RemoteController.EVENT_PEER_READY);break}},onPeerPlatform:function(a,b){if(this.peerNode){return}if(DetectionController.getInstance().platform===DetectionController.PLATFORM_DESKTOP&&(b===DetectionController.PLATFORM_TABLET||b===DetectionController.PLATFORM_MOBILE)||DetectionController.getInstance().platform!==DetectionController.PLATFORM_DESKTOP&&b===DetectionController.PLATFORM_DESKTOP){this.peerNode=a;this.bindPeerEvents(a);this.events.trigger(RemoteController.EVENT_PEER_ENTER,[a])}else if(b===RemoteController.EVENT_MESH_FULL){this.events.trigger(RemoteController.EVENT_MESH_FULL,[a])}else{this.events.trigger(RemoteController.EVENT_PEER_INVALID_PLATFORM,[a])}a.unbind("platform")},onPeerStart:function(){this.events.trigger(RemoteController.EVENT_EXPERIENCE_START)},onPeerEnd:function(){this.events.trigger(RemoteController.EVENT_EXPERIENCE_END)},onPeerRestart:function(){this.events.trigger(RemoteController.EVENT_EXPERIENCE_RESTART)},onPeerPlay:function(){this.events.trigger(RemoteController.EVENT_PLAY)},onPeerPause:function(){this.events.trigger(RemoteController.EVENT_PAUSE)},onPeerResync:function(a,b){this.events.trigger(RemoteController.EVENT_RESYNC,[a,b])},onPeerAxelleStart:function(a){this.events.trigger(RemoteController.EVENT_AXELLE_START,[a])},onPeerAxellePause:function(a){this.events.trigger(RemoteController.EVENT_AXELLE_PAUSE,[a])},onPeerAxelleHide:function(){this.events.trigger(RemoteController.EVENT_AXELLE_HIDE)},onTurnItBackStart:function(){this.events.trigger(RemoteController.EVENT_TURNITBACK_START)},onTurnItBackStop:function(){this.events.trigger(RemoteController.EVENT_TURNITBACK_STOP)},onLuminosity:function(a){this.events.trigger(RemoteController.EVENT_LUMINOSITY_CHANGE,[a])},onPeerVolumeChange:function(a){this.events.trigger(RemoteController.EVENT_VOLUME_CHANGE,[a])}}});var Quaternion=function(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=d!==undefined?d:1};Quaternion.prototype={constructor:Quaternion,set:function(a,b,c,d){this.x=a;
this.y=b;this.z=c;this.w=d;return this},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=a.w;return this},setFromEuler:function(a,b){var c=Math.cos(a.x/2),d=Math.cos(a.y/2),e=Math.cos(a.z/2),f=Math.sin(a.x/2),g=Math.sin(a.y/2),h=Math.sin(a.z/2);if(b===undefined||b==="XYZ"){this.x=f*d*e+c*g*h;this.y=c*g*e-f*d*h;this.z=c*d*h+f*g*e;this.w=c*d*e-f*g*h}else if(b==="YXZ"){this.x=f*d*e+c*g*h;this.y=c*g*e-f*d*h;this.z=c*d*h-f*g*e;this.w=c*d*e+f*g*h}else if(b==="ZXY"){this.x=f*d*e-c*g*h;this.y=c*g*e+f*d*h;this.z=c*d*h+f*g*e;this.w=c*d*e-f*g*h}else if(b==="ZYX"){this.x=f*d*e-c*g*h;this.y=c*g*e+f*d*h;this.z=c*d*h-f*g*e;this.w=c*d*e+f*g*h}else if(b==="YZX"){this.x=f*d*e+c*g*h;this.y=c*g*e+f*d*h;this.z=c*d*h-f*g*e;this.w=c*d*e-f*g*h}else if(b==="XZY"){this.x=f*d*e-c*g*h;this.y=c*g*e-f*d*h;this.z=c*d*h+f*g*e;this.w=c*d*e+f*g*h}return this},setFromAxisAngle:function(a,b){var c=b/2,d=Math.sin(c);this.x=a.x*d;this.y=a.y*d;this.z=a.z*d;this.w=Math.cos(c);return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0],d=b[4],e=b[8],f=b[1],g=b[5],h=b[9],i=b[2],j=b[6],k=b[10],l=c+g+k,m;if(l>0){m=.5/Math.sqrt(l+1);this.w=.25/m;this.x=(j-h)*m;this.y=(e-i)*m;this.z=(f-d)*m}else if(c>g&&c>k){m=2*Math.sqrt(1+c-g-k);this.w=(j-h)/m;this.x=.25*m;this.y=(d+f)/m;this.z=(e+i)/m}else if(g>k){m=2*Math.sqrt(1+g-c-k);this.w=(e-i)/m;this.x=(d+f)/m;this.y=.25*m;this.z=(h+j)/m}else{m=2*Math.sqrt(1+k-c-g);this.w=(f-d)/m;this.x=(e+i)/m;this.y=(h+j)/m;this.z=.25*m}return this},inverse:function(){this.conjugate().normalize();return this},conjugate:function(){this.x*=-1;this.y*=-1;this.z*=-1;return this},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},normalize:function(){var a=this.length();if(a===0){this.x=0;this.y=0;this.z=0;this.w=1}else{a=1/a;this.x=this.x*a;this.y=this.y*a;this.z=this.z*a;this.w=this.w*a}return this},multiply:function(a,b){if(b!==undefined){console.warn("DEPRECATED: Quaternion's .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.");return this.multiplyQuaternions(a,b)}return this.multiplyQuaternions(this,a)},multiplyQuaternions:function(a,b){var c=a.x,d=a.y,e=a.z,f=a.w,g=b.x,h=b.y,i=b.z,j=b.w;this.x=c*j+f*g+d*i-e*h;this.y=d*j+f*h+e*g-c*i;this.z=e*j+f*i+c*h-d*g;this.w=f*j-c*g-d*h-e*i;return this},multiplyVector3:function(a){console.warn("DEPRECATED: Quaternion's .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return a.applyQuaternion(this)},slerp:function(a,b){var c=this.x,d=this.y,e=this.z,f=this.w,g=f*a.w+c*a.x+d*a.y+e*a.z,h=Math.acos(g),i=Math.sqrt(1-g*g),j=Math.sin((1-b)*h)/i,k=Math.sin(b*h)/i;if(g<0){this.w=-a.w;this.x=-a.x;this.y=-a.y;this.z=-a.z;g=-g}else{this.copy(a)}if(g>=1){this.w=f;this.x=c;this.y=d;this.z=e;return this}if(Math.abs(i)<.001){this.w=.5*(f+this.w);this.x=.5*(c+this.x);this.y=.5*(d+this.y);this.z=.5*(e+this.z);return this}this.w=f*j+this.w*k;this.x=c*j+this.x*k;this.y=d*j+this.y*k;this.z=e*j+this.z*k;return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},clone:function(){return new Quaternion(this.x,this.y,this.z,this.w)}};Quaternion.slerp=function(a,b,c,d){return c.copy(a).slerp(b,d)};var Vector3=function(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0};Vector3.prototype={constructor:Vector3,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw new Error("index is out of range: "+a)}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+a)}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(b!==undefined){console.warn("DEPRECATED: Vector3's .add() now only accepts one argument. Use .addVectors( a, b ) instead.");return this.addVectors(a,b)}this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},sub:function(a,b){if(b!==undefined){console.warn("DEPRECATED: Vector3's .sub() now only accepts one argument. Use .subVectors( a, b ) instead.");return this.subVectors(a,b)}this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(b!==undefined){console.warn("DEPRECATED: Vector3's .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.");return this.multiplyVectors(a,b)}this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;return this},multiplyVectors:function(a,b){this.x=a.x*b.x;this.y=a.y*b.y;this.z=a.z*b.z;return this},applyMatrix3:function(a){var b=this.x,c=this.y,d=this.z,e=a.elements;this.x=e[0]*b+e[3]*c+e[6]*d;this.y=e[1]*b+e[4]*c+e[7]*d;this.z=e[2]*b+e[5]*c+e[8]*d;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=a.elements;this.x=e[0]*b+e[4]*c+e[8]*d+e[12];this.y=e[1]*b+e[5]*c+e[9]*d+e[13];this.z=e[2]*b+e[6]*c+e[10]*d+e[14];return this},applyProjection:function(a){var b=this.x,c=this.y,d=this.z,e=a.elements,f=1/(e[3]*b+e[7]*c+e[11]*d+e[15]);this.x=(e[0]*b+e[4]*c+e[8]*d+e[12])*f;this.y=(e[1]*b+e[5]*c+e[9]*d+e[13])*f;this.z=(e[2]*b+e[6]*c+e[10]*d+e[14])*f;return this},applyQuaternion:function(a){var b=this.x,c=this.y,d=this.z,e=a.x,f=a.y,g=a.z,h=a.w,i=h*b+f*d-g*c,j=h*c+g*b-e*d,k=h*d+e*c-f*b,l=-e*b-f*c-g*d;this.x=i*h+l*-e+j*-g-k*-f;this.y=j*h+l*-f+k*-e-i*-g;this.z=k*h+l*-g+i*-f-j*-e;return this},applyEuler:function(a,b){var c=Vector3.__q1.setFromEuler(a,b);this.applyQuaternion(c);return this},applyAxisAngle:function(a,b){var c=Vector3.__q1.setFromAxisAngle(a,b);this.applyQuaternion(c);return this},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){if(a!==0){this.x/=a;this.y/=a;this.z/=a}else{this.x=0;this.y=0;this.z=0}return this},min:function(a){if(this.x>a.x){this.x=a.x}if(this.y>a.y){this.y=a.y}if(this.z>a.z){this.z=a.z}return this},max:function(a){if(this.x<a.x){this.x=a.x}if(this.y<a.y){this.y=a.y}if(this.z<a.z){this.z=a.z}return this},clamp:function(a,b){if(this.x<a.x){this.x=a.x}else if(this.x>b.x){this.x=b.x}if(this.y<a.y){this.y=a.y}else if(this.y>b.y){this.y=b.y}if(this.z<a.z){this.z=a.z}else if(this.z>b.z){this.z=b.z}return this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){var b=this.length();if(b!==0&&a!==b){this.multiplyScalar(a/b)}return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},cross:function(a,b){if(b!==undefined){console.warn("DEPRECATED: Vector3's .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.");return this.crossVectors(a,b)}var c=this.x,d=this.y,e=this.z;this.x=d*a.z-e*a.y;this.y=e*a.x-c*a.z;this.z=c*a.y-d*a.x;return this},crossVectors:function(a,b){this.x=a.y*b.z-a.z*b.y;this.y=a.z*b.x-a.x*b.z;this.z=a.x*b.y-a.y*b.x;return this},angleTo:function(a){return Math.acos(this.dot(a)/this.length()/a.length())},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y,d=this.z-a.z;return b*b+c*c+d*d},getPositionFromMatrix:function(a){this.x=a.elements[12];this.y=a.elements[13];this.z=a.elements[14];return this},setEulerFromRotationMatrix:function(a,b){var c=a.elements,d=c[0],e=c[4],f=c[8],g=c[1],h=c[5],i=c[9],j=c[2],k=c[6],l=c[10];function m(a){return Math.min(Math.max(a,-1),1)}if(b===undefined||b==="XYZ"){this.y=Math.asin(m(f));if(Math.abs(f)<.99999){this.x=Math.atan2(-i,l);this.z=Math.atan2(-e,d)}else{this.x=Math.atan2(k,h);this.z=0}}else if(b==="YXZ"){this.x=Math.asin(-m(i));if(Math.abs(i)<.99999){this.y=Math.atan2(f,l);this.z=Math.atan2(g,h)}else{this.y=Math.atan2(-j,d);this.z=0}}else if(b==="ZXY"){this.x=Math.asin(m(k));if(Math.abs(k)<.99999){this.y=Math.atan2(-j,l);this.z=Math.atan2(-e,h)}else{this.y=0;this.z=Math.atan2(g,d)}}else if(b==="ZYX"){this.y=Math.asin(-m(j));if(Math.abs(j)<.99999){this.x=Math.atan2(k,l);this.z=Math.atan2(g,d)}else{this.x=0;this.z=Math.atan2(-e,h)}}else if(b==="YZX"){this.z=Math.asin(m(g));if(Math.abs(g)<.99999){this.x=Math.atan2(-i,h);this.y=Math.atan2(-j,d)}else{this.x=0;this.y=Math.atan2(f,l)}}else if(b==="XZY"){this.z=Math.asin(-m(e));if(Math.abs(e)<.99999){this.x=Math.atan2(k,h);this.y=Math.atan2(f,d)}else{this.x=Math.atan2(-i,l);this.y=0}}return this},setEulerFromQuaternion:function(a,b){function c(a){return Math.min(Math.max(a,-1),1)}var d=a.x*a.x,e=a.y*a.y,f=a.z*a.z,g=a.w*a.w;if(b===undefined||b==="XYZ"){this.x=Math.atan2(2*(a.x*a.w-a.y*a.z),g-d-e+f);this.y=Math.asin(c(2*(a.x*a.z+a.y*a.w)));this.z=Math.atan2(2*(a.z*a.w-a.x*a.y),g+d-e-f)}else if(b==="YXZ"){this.x=Math.asin(c(2*(a.x*a.w-a.y*a.z)));this.y=Math.atan2(2*(a.x*a.z+a.y*a.w),g-d-e+f);this.z=Math.atan2(2*(a.x*a.y+a.z*a.w),g-d+e-f)}else if(b==="ZXY"){this.x=Math.asin(c(2*(a.x*a.w+a.y*a.z)));this.y=Math.atan2(2*(a.y*a.w-a.z*a.x),g-d-e+f);this.z=Math.atan2(2*(a.z*a.w-a.x*a.y),g-d+e-f)}else if(b==="ZYX"){this.x=Math.atan2(2*(a.x*a.w+a.z*a.y),g-d-e+f);this.y=Math.asin(c(2*(a.y*a.w-a.x*a.z)));this.z=Math.atan2(2*(a.x*a.y+a.z*a.w),g+d-e-f)}else if(b==="YZX"){this.x=Math.atan2(2*(a.x*a.w-a.z*a.y),g-d+e-f);this.y=Math.atan2(2*(a.y*a.w-a.x*a.z),g+d-e-f);this.z=Math.asin(c(2*(a.x*a.y+a.z*a.w)))}else if(b==="XZY"){this.x=Math.atan2(2*(a.x*a.w+a.y*a.z),g-d+e-f);this.y=Math.atan2(2*(a.x*a.z+a.y*a.w),g+d-e-f);this.z=Math.asin(c(2*(a.z*a.w-a.x*a.y)))}return this},getScaleFromMatrix:function(a){var b=this.set(a.elements[0],a.elements[1],a.elements[2]).length(),c=this.set(a.elements[4],a.elements[5],a.elements[6]).length(),d=this.set(a.elements[8],a.elements[9],a.elements[10]).length();this.x=b;this.y=c;this.z=d;return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},clone:function(){return new Vector3(this.x,this.y,this.z)}};Vector3.__q1=new Quaternion;var OrientationController=Class._extend(Class.SINGLETON,{_static:{EVENT_ORIENTATION_CHANGE:"OrientationController_EVENT_ORIENTATION_CHANGE",EVENT_ACCELERATION_CHANGE:"OrientationController_EVENT_ACCELERATION_CHANGE",EVENT_POSITION_CHANGE:"OrientationController_EVENT_POSITION_CHANGE",TO_RADIANS:Math.PI/180,GRAVITY:new Vector3(0,-9.8,0),AXIS_X:new Vector3(-1,0,0),AXIS_Y:new Vector3(0,-1,0),AXIS_Z:new Vector3(0,0,-1),VELOCITY_DAMPING:.85,POSITION_DAMPING:.85,ACCELERATION_BUFFER_LENGTH:4,MIN_ACCELERATION_TO_UPDATE_POSITION:.1},_public:{debug:{hSpeed:1e-4,vSpeed:1e-4},localAccelerationIncludingGravity:{x:0,y:0,z:0},localAccelerationIncludingGravityFiltered:{x:0,y:0,z:0},localOrientation:{alpha:0,beta:0,gamma:0},worldAcceleration:{x:0,y:0,z:0},worldOrientation:{x:0,y:0,z:0},worldQuaternion:{x:0,y:0,z:0,w:0},position:{x:0,y:0,z:0},velocity:{x:0,y:0,z:0},isVRelative:false,phoneOrientation:0,hasGyroscope:"false",hasAccelerometer:"false",construct:function(){this._isAndroid=navigator.userAgent.toLowerCase().indexOf("android")!==-1},start:function(){var a=this;if(window.DeviceOrientationEvent){window.addEventListener("deviceorientation",function(b){a.onDeviceOrientationEvent(b)},true)}if(window.DeviceMotionEvent){window.addEventListener("devicemotion",function(b){a.onDeviceMotionEvent(b);b.preventDefault();b.stopPropagation()},true)}},stop:function(){clearInterval(this._intervalId)},resetOrientation:function(){this.setOrientation(0,0,0);this.position.x=0;this.position.y=0;this.position.z=0},resetOrientationInverse:function(){this.setOrientation(-180,0,0);this.position.x=0;this.position.y=0;this.position.z=0},setOrientation:function(a,b,c){this._worldOrientationOffset.x=-this._worldOrientation.x+a;this._worldOrientationOffset.y=b;this._worldOrientationOffset.z=-this._worldOrientation.z+c;this._hOffset=0;this._vOffset=0;this._vElasticity=0;this._vElasticSpeed=0;this._view.hLookAt=0;this._view.vLookAt=0;this._view.camRoll=0;this._worldOrientation.x=0;this._worldOrientation.y=0;this._worldOrientation.z=0;this._isSampleValid=false;this._firstSample=null}},_private:{_isAndroid:false,_mobileStateBatch:null,_firstSample:null,_isSampleValid:false,_isCamRoll:true,_view:{hLookAt:0,vLookAt:0,camRoll:0},_worldOrientation:{x:0,y:0,z:0},_worldOrientationOffset:{x:0,y:0,z:0},_hOffset:0,_vOffset:0,_vElasticity:0,_vElasticSpeed:0,_friction:.5,_localAcceleration:{x:0,y:0,z:0},_localAccelerationBuffer:[],_localAccelerationBufferIndex:0,_localAccelerationAverage:{x:0,y:0,z:0},_lastWorldAcceleration:{x:0,y:0,z:0},_lastLocalAcceleration:null,_lastAccelerationUpdateTime:-1,_isAccelerationSampleValid:false,_gravityX:0,_gravityY:0,_gravityZ:0,wrapAngle:function(a){a=a%360;return a<=180?a:a-360},wrapAngleRect:function(a){if(a<=90){if(a<0){if(a>-90){a=-90+(a+90)}else{a=-(a+90+90)}}}else{a=90-(a-90)}return a},rotateEuler:function(a){var b,c,d,e=Math.cos(a.yaw),f=Math.sin(a.yaw),g=Math.cos(a.pitch),h=Math.sin(a.pitch),i=Math.cos(a.roll),j=Math.sin(a.roll),k=[f*j-e*h*i,-e*g,e*h*j+f*i,g*i,-h,-g*j,f*h*i+e*j,f*g,-f*h*j+e*i];if(k[3]>.9999){b=Math.atan2(k[2],k[8]);d=Math.PI/2;c=0}else if(k[3]<-.9999){b=Math.atan2(k[2],k[8]);d=-Math.PI/2;c=0}else{b=Math.atan2(-k[6],k[0]);c=Math.atan2(-k[5],k[4]);d=Math.asin(k[3])}return{yaw:b,pitch:d,roll:c}},getWorldAcceleration:function(a){var b=new Vector3(a.x,a.y,a.z);b.applyQuaternion(this.worldQuaternion);b.x-=OrientationController.GRAVITY.x;b.y-=OrientationController.GRAVITY.y;b.z-=OrientationController.GRAVITY.z;if(b.y===9.81){b.y=0}return b},calculateAverageAcceleration:function(){var a={x:this.localAccelerationIncludingGravity.x,y:this.localAccelerationIncludingGravity.y,z:this.localAccelerationIncludingGravity.z},b;if(this._localAccelerationBuffer.length<OrientationController.ACCELERATION_BUFFER_LENGTH){this._localAccelerationBuffer.push(a)}else{this._isAccelerationSampleValid=true;this._localAccelerationBuffer[this._localAccelerationBufferIndex]=a;this._localAccelerationAverage.x=0;this._localAccelerationAverage.y=0;this._localAccelerationAverage.z=0;for(b=0;b<OrientationController.ACCELERATION_BUFFER_LENGTH;b++){this._localAccelerationAverage.x+=this._localAccelerationBuffer[b].x;this._localAccelerationAverage.y+=this._localAccelerationBuffer[b].y;this._localAccelerationAverage.z+=this._localAccelerationBuffer[b].z}this._localAccelerationAverage.x/=OrientationController.ACCELERATION_BUFFER_LENGTH;this._localAccelerationAverage.y/=OrientationController.ACCELERATION_BUFFER_LENGTH;this._localAccelerationAverage.z/=OrientationController.ACCELERATION_BUFFER_LENGTH}this._localAccelerationBufferIndex=(this._localAccelerationBufferIndex+1)%OrientationController.ACCELERATION_BUFFER_LENGTH},processPosition:function(a){var b=this.worldAcceleration.x,c=this.worldAcceleration.y,d=this.worldAcceleration.z,e=a,f=a,g,h,i;c=c===9.8?0:c;b=Math.abs(b)<OrientationController.MIN_ACCELERATION_TO_UPDATE_POSITION?0:b;c=Math.abs(c)<OrientationController.MIN_ACCELERATION_TO_UPDATE_POSITION?0:c;d=Math.abs(d)<OrientationController.MIN_ACCELERATION_TO_UPDATE_POSITION?0:d;g=this.velocity.x*OrientationController.VELOCITY_DAMPING+b*e;h=this.velocity.y*OrientationController.VELOCITY_DAMPING+c*e;i=this.velocity.z*OrientationController.VELOCITY_DAMPING+d*e;this.position.x=this.position.x*OrientationController.POSITION_DAMPING+(g+this.velocity.x)*.5*f;this.position.y=this.position.y*OrientationController.POSITION_DAMPING+(h+this.velocity.y)*.5*f;this.position.z=this.position.z*OrientationController.POSITION_DAMPING+(i+this.velocity.z)*.5*f;this.velocity.x=g;this.velocity.y=h;this.velocity.z=i},processAcceleration:function(){if(this._lastLocalAcceleration){this.localAccelerationIncludingGravityFiltered.x=this._lastLocalAcceleration.x+(this._localAccelerationAverage.x-this._lastLocalAcceleration.x)*.5;this.localAccelerationIncludingGravityFiltered.y=this._lastLocalAcceleration.y+(this._localAccelerationAverage.y-this._lastLocalAcceleration.y)*.5;this.localAccelerationIncludingGravityFiltered.z=this._lastLocalAcceleration.z+(this._localAccelerationAverage.z-this._lastLocalAcceleration.z)*.5}else{this._lastLocalAcceleration={x:0,y:0,z:0}}this._lastLocalAcceleration.x=this._localAccelerationAverage.x;this._lastLocalAcceleration.y=this._localAccelerationAverage.y;this._lastLocalAcceleration.z=this._localAccelerationAverage.z;this._lastWorldAcceleration.x=this.worldAcceleration.x;this._lastWorldAcceleration.y=this.worldAcceleration.y;this._lastWorldAcceleration.z=this.worldAcceleration.z;this.worldAcceleration=this.getWorldAcceleration(this.localAccelerationIncludingGravityFiltered)},processOrientation:function(a,b,c){var d,e,f,g,h,i,j,k,l;this.localOrientation.alpha=a;this.localOrientation.beta=b;this.localOrientation.gamma=c;if(this._isAndroid){a-=180}d=this.rotateEuler({yaw:a*OrientationController.TO_RADIANS,pitch:b*OrientationController.TO_RADIANS,roll:c*OrientationController.TO_RADIANS});e=window.top?window.top.orientation:window.orientation;f=this.wrapAngle(d.yaw/OrientationController.TO_RADIANS);g=d.pitch/OrientationController.TO_RADIANS;h=f;j=this._view.hLookAt-this._worldOrientation.x;k=this._view.vLookAt-this._worldOrientation.y;this.debug.hSpeed=j;this.debug.vSpeed=k;if(!this._isSampleValid){if(!this._firstSample){this._firstSample=d}else{if(d.yaw!==this._firstSample.yaw||d.pitch!==this._firstSample.pitch||d.roll!==this._firstSample.roll){this._firstSample=null;this._isSampleValid=true;if(this.isVRelative){this._vOffset=-g}}}return}this.phoneOrientation=e;if(this._isCamRoll){this._view.camRoll=this.wrapAngle(180-d.roll/OrientationController.TO_RADIANS)}if(Math.abs(g)>90){h=a;switch(e){case 0:if(g>0){h+=180}break;case 90:h+=90;break;case-90:h+=-90;break;case 180:if(g<0){h+=180}break}h=this.wrapAngle(h);if(Math.abs(h-f)>180){h+=h<f?360:-360}i=Math.min(1,(Math.abs(g)-70)/10);f=f*(1-i)+h*i;this._view.camRoll*=1-i}this._hOffset+=j;this._vOffset+=k;if(Math.abs(g+this._vOffset)>90){this._vOffset=g+this._vOffset>0?90-g:-90-g}this._view.hLookAt=this.wrapAngle(-f-180+this._hOffset);this._view.vLookAt=Math.max(Math.min(g+this._vOffset,90),-90);if(Math.abs(this._worldOrientation.x-this._view.hLookAt)>180){this._worldOrientation.x+=this._view.hLookAt>this._worldOrientation.x?360:-360}this._view.hLookAt=(1-this._friction)*this._view.hLookAt+this._friction*this._worldOrientation.x;this._view.vLookAt=(1-this._friction)*this._view.vLookAt+this._friction*this._worldOrientation.y;if(Math.abs(this._view.camRoll-this._worldOrientation.z)>180){this._worldOrientation.z+=this._view.camRoll>this._worldOrientation.z?360:-360}this._view.camRoll=(1-this._friction)*this._view.camRoll+this._friction*this._worldOrientation.z;this._worldOrientation.x=this.wrapAngle(this._view.hLookAt);this._worldOrientation.y=this._view.vLookAt;this._worldOrientation.z=this.wrapAngle(this._view.camRoll);if(this._vOffset!==0&&this._vElasticity>0){if(this._vSpeed===0){if(this._vElasticity===1){this._vOffset=0;this._vElasticSpeed=0}else{this._vElasticSpeed=1-(1-this._vElasticSpeed)*this._touchfriction;this._vOffset*=1-Math.pow(this._vElasticity,2)*this._vElasticSpeed;if(Math.abs(this._vOffset)<.1){this._vOffset=0;this._vElasticSpeed=0}}}else{this._vElasticSpeed=0}}this.worldOrientation.x=this._worldOrientation.x+this._worldOrientationOffset.x;this.worldOrientation.y=this._worldOrientation.y+this._worldOrientationOffset.y;this.worldOrientation.z=this._worldOrientation.z+this._worldOrientationOffset.z;l=new Quaternion;l.setFromAxisAngle(OrientationController.AXIS_Y,this.worldOrientation.x*OrientationController.TO_RADIANS);l.multiply((new Quaternion).setFromAxisAngle(OrientationController.AXIS_X,this.worldOrientation.y*OrientationController.TO_RADIANS));l.multiply((new Quaternion).setFromAxisAngle(OrientationController.AXIS_Z,this.worldOrientation.z*OrientationController.TO_RADIANS));this.worldQuaternion.x=l.x;this.worldQuaternion.y=l.y;this.worldQuaternion.z=l.z;this.worldQuaternion.w=l.w},onDeviceMotionEvent:function(a){var b;this.localAccelerationIncludingGravity.x=a.accelerationIncludingGravity.x;this.localAccelerationIncludingGravity.y=a.accelerationIncludingGravity.y;this.localAccelerationIncludingGravity.z=a.accelerationIncludingGravity.z;this.calculateAverageAcceleration();this.events.trigger(OrientationController.EVENT_ACCELERATION_CHANGE);b=(new Date).getTime();if(this._isAccelerationSampleValid){this.processAcceleration();this.processPosition(((new Date).getTime()-this._lastAccelerationUpdateTime)*.001);this.events.trigger(OrientationController.EVENT_POSITION_CHANGE)}this._lastAccelerationUpdateTime=b},onDeviceOrientationEvent:function(a){if(this.hasGyroscope){this.processOrientation(a.alpha,a.beta,a.gamma)}this.events.trigger(OrientationController.EVENT_ORIENTATION_CHANGE)}}});var SharingController=Class._extend(Class.SINGLETON,{_static:{},_public:{construct:function(){this.shareLink=window.location.protocol+"//"+window.location.host+"/lng/"+i18n.lng().toLowerCase()},shareLinkOnFacebook:function(a){a=encodeURIComponent(a||this.shareLink);AnalyticsController.getInstance().trackEvent(AnalyticsController.EVENT_SHARE_FACEBOOK);this.openPopup("http://www.facebook.com/sharer.php?u={url}".replace("{url}",a),600,300)},shareOnTwitter:function(a,b){a=encodeURIComponent(a||$.t("Sharing.twitter"));b="";AnalyticsController.getInstance().trackEvent(AnalyticsController.EVENT_SHARE_TWITTER);this.openPopup("https://twitter.com/share/?text={text}&url={url}".replace("{text}",a).replace("{url}",b),600,300)},shareLinkOnGoogle:function(a){a=encodeURIComponent(a||this.shareLink);AnalyticsController.getInstance().trackEvent(AnalyticsController.EVENT_SHARE_GOOGLE);this.openPopup("https://plus.google.com/share?url={url}".replace("{url}",a),640,480)}},_private:{openPopup:function(a,b,c,d,e,f){var g;d=d||true;e=d?(screen.width-b)*.5:e;f=d?(screen.height-c)*.5:f;g="toolbar=no,status=no,width={width},height={height},left={left},top={top}".replace("{width}",b).replace("{height}",c).replace("{left}",e).replace("{top}",f);window.open(a,"_blank",g)}}});var Task=Class._extend(Class.ABSTRACT,{_static:{EVENT_PROGRESS:"Task_EVENT_PROGRESS",EVENT_DONE:"Task_EVENT_DONE"},_public:{construct:function(a,b){this.ownWeight=b||0;this.subtasks=a||[];this.events=$({});this.recalculateWeight()},execute:function(){var a;this.bindEvents();for(a=0;a<this.subtasks.length;a++){this.subtasks[a].execute()}this.run()}},_protected:{ownWeight:0,ownProgress:0,subtasks:[],weight:0,progress:0,done:false,wrapHandler:function(a,b){return function(c,d){b.call(a,c,d)}},bindEvents:function(){var a;for(a=0;a<this.subtasks.length;a++){this.subtasks[a].events.on(Task.EVENT_PROGRESS,this.wrapHandler(this,this.onSubtaskProgress));this.subtasks[a].events.on(Task.EVENT_COMPLETE,this.wrapHandler(this,this.onSubtaskDone))}},unbindEvents:function(){return false},recalculateWeight:function(){var a;this.weight=this.ownWeight;for(a=0;a<this.subtasks.length;a++){this.weight+=this.subtasks[a].weight}},recalculateProgress:function(){var a=this.ownProgress*this.ownWeight,b;for(b=0;b<this.subtasks.length;b++){a+=this.subtasks[b].progress*this.subtasks[b].weight}this.progress=this.weight===0?this.ownWeight===0?1:a/this.ownWeight:a/this.weight},run:function(){return false},notifyProgress:function(a){this.ownProgress=a;this.recalculateProgress();this.events.trigger(Task.EVENT_PROGRESS,[{progress:this.progress,weight:this.weight}]);if(this.progress===1){this.done=true;this.unbindEvents();this.events.trigger(Task.EVENT_DONE,[{progress:this.progress,weight:this.weight}])}},notifyDone:function(){this.notifyProgress(1)},onSubtaskProgress:function(){this.notifyProgress(this.progress)},onSubtaskDone:function(){this.notifyProgress(this.progress)}},_private:{}});var ImagePreloadTask=Task._extend(Class.ABSTRACT,{_static:{ROOT:"/m/"},_public:{construct:function(a){Task.call(this,[],1);this.url=ImagePreloadTask.ROOT+a}},_protected:{url:null,run:function(){var a=this,b=$("<div/>").css("background-image","url('"+this.url+"')"),c=new Image;$(".preload").append(b);c.onload=function(){a.onComplete()};c.src=this.url}},_private:{url:null,onComplete:function(){this.notifyDone()}}});var AssetPreloadTask=Task._extend(Class.ABSTRACT,{_public:{construct:function(a,b){var c=DetectionController.getInstance().platform,d=DetectionController.getInstance().display,e="img/"+a+"/"+c+"/"+a+"-"+c+"-"+d+"/"+b;Task.call(this,[new ImagePreloadTask(e)],0)}}});var SpriteMapPreloadTask=Task._extend(Class.ABSTRACT,{_static:{ROOT:"/m/"},_public:{construct:function(a){Task.call(this,[],1);this.mapName=a}},_protected:{mapName:null,run:function(){var a=this,b,c,d,e,f,g,h;for(g=0;g<document.styleSheets.length&&!c;++g){d=document.styleSheets[g].cssRules?document.styleSheets[g].cssRules.length:document.styleSheets[g].rules.length;for(h=0;h<d;++h){b=document.styleSheets[g].cssRules?document.styleSheets[g].cssRules[h]:document.styleSheets[g].rules[h];if(b.selectorText===".detection .url-"+this.mapName){c=b.cssText?b.cssText.match("url(.*)")[0]:b.style.content;c=c.substring(c.indexOf("img/"),c.indexOf(")")).replace("'","").replace('"',"");break}}}c=SpriteMapPreloadTask.ROOT+c;e=$("<div/>").css("background-image","url('"+c+"')");$(".preload").append(e);f=new Image;f.onload=function(){a.onPreloadComplete()};f.src=c}},_private:{onPreloadComplete:function(){this.notifyDone()}}});var ClockSyncTask=Task._extend({_public:{construct:function(){var a=[];Task.call(this,a,1)}},_protected:{run:function(){var a=this;clocksync.sync(function(){console.log("clock synced",clocksync.time());a.notifyDone()})}}});var AudioPreloadTask=Task._extend({_public:{construct:function(){var a=[];Task.call(this,a,1)}},_protected:{run:function(){var a=this;AudioController.getInstance().events.bind(AudioController.EVENT_LOADED,function(){AudioController.getInstance().play();a.notifyDone()});AudioController.getInstance().load()}}});var InitialPreloadTask=Task._extend({_static:{},_public:{construct:function(){var a=[new LocalisationInitTask];Task.call(this,a,0)}},_private:{}});var MainPreloadTask=Task._extend({_public:{construct:function(){var a=[new AssetPreloadTask("main","background.jpg"),new ImagePreloadTask("img/main/turn-it-back.jpg"),new SpriteMapPreloadTask("main"),new ClockSyncTask,new AudioPreloadTask];Task.call(this,a,0)}}});var LocalisationInitTask=Task._extend({_public:{construct:function(){var a=[];Task.call(this,a,1)}},_protected:{run:function(){var a=this;LocalisationController.getInstance().events.on(LocalisationController.EVENT_READY,function(){a.notifyDone()});LocalisationController.getInstance().init()}}});var ExperiencePreloadTask=Task._extend({_public:{construct:function(){var a=[new ImagePreloadTask(AxelleVideoView.FRAME_PATH.replace("/m/","")+"/"+"phone_txt_break_free.png"),new ImagePreloadTask(AxelleVideoView.FRAME_PATH.replace("/m/","")+"/"+"phone_txt_just.png"),new ImagePreloadTask(AxelleVideoView.FRAME_PATH.replace("/m/","")+"/"+"phone_broken_v2_1.png")],b;for(b=AxelleVideoView.FRAME_START;b<AxelleVideoView.FRAME_END+1;b+=AxelleVideoView.FRAME_STEP){a.push(new ImagePreloadTask(AxelleVideoView.FRAME_PATH.replace("/m/","")+"/"+AxelleVideoView.FRAME_BASE+this.pad(b,AxelleVideoView.PADDING)+AxelleVideoView.FRAME_EXTENSION))}Task.call(this,a,0)}},_protected:{pad:function(a,b){var c="000000000000"+a;return c.substring(Math.max(c.length-b,0),c.length)}}});var Model=Class._extend(Class.ABSTRACT,{});var ImageVideoPlayer=Class._extend({_static:{SCALE_MODE:{NO_SCALE:"noscale",FIT:"fit",COVER:"cover",EXACT_FIT:"exactfit"},EVENT_PRELOAD_COMPLETE:"ImageVideoPlayer_EVENT_PRELOAD_COMPLETE",EVENT_PLAYBACK_FRAME:"ImageVideoPlayer_EVENT_PLAYBACK_FRAME",EVENT_PLAYBACK_END:"ImageVideoPlayer_EVENT_PLAYBACK_END",OPTIONS:{path:"",base:"frame_",start:0,end:100,step:1,pad:6,ext:".jpg",frameRate:24,width:640,height:480,scaleMode:"noscale",loop:false}},_public:{construct:function(a){this.options=$.extend(ImageVideoPlayer.OPTIONS,a);this.interval=Math.round(1e3/this.options.frameRate);this.bindEvents();this.initCanvas();this.frames=[];this.preload()},seekProgress:function(a){this.currentFrameIndex=a?Math.round(a*(this.options.end-this.options.start)):this.options.start},play:function(){var a=this;if(this.playing){return}this.playing=true;AnimationController.getInstance().events.unbind(AnimationController.EVENT_FRAME+".ImageVideoPlayer");AnimationController.getInstance().events.bind(AnimationController.EVENT_FRAME+".ImageVideoPlayer",function(){a.onFrame()})},pause:function(){if(!this.playing){return}this.playing=false;AnimationController.getInstance().events.unbind(AnimationController.EVENT_FRAME+".ImageVideoPlayer")},stop:function(){this.pause();this.currentFrame=0}},_private:{options:null,canvas:null,context:null,currentFrameIndex:0,interval:100,frames:[],preloaded:false,playing:false,numImagesToLoad:0,lastFrameTime:-1,bindEvents:function(){var a=this;this.events.bind(ImageVideoPlayer.EVENT_PRELOAD_COMPLETE,function(){a.onPreloadComplete()})},initCanvas:function(){this.canvas=document.createElement("canvas");this.canvas.width=this.options.width;this.canvas.height=this.options.height;this.context=this.canvas.getContext("2d")},wrapHandler:function(a,b){return function(){b.call(a)}},preload:function(){var a,b;this.numImagesToLoad=0;for(a=this.options.start;a<=this.options.end;a+=this.options.step){b=this.getFrameImageById(a);this.frames.push(b);this.numImagesToLoad++;b.onload=this.wrapHandler(this,this.onImageLoaded)}},renderFrame:function(a){var b,c,d,e,f;this.context.clearRect(0,0,this.canvas.width,this.canvas.height);if(a>this.frames.length-1){this.events.trigger(ImageVideoPlayer.EVENT_PLAYBACK_FRAME);return}a=Math.min(Math.max(Math.round(a),0),this.frames.length-1);f=this.frames[a].width/this.frames[a].height;if(f>this.canvas.width/this.canvas.height){e=this.canvas.height;d=e*f}else{d=this.canvas.width;e=d/f}b=(this.canvas.width-d)*.5;c=(this.canvas.height-e)*.5;this.context.drawImage(this.frames[a],b,c,d,e);this.events.trigger(ImageVideoPlayer.EVENT_PLAYBACK_FRAME)},getFrameUrlByIndex:function(a){return this.options.path+"/"+this.options.base+this.pad(this.options.start+a*this.options.step,this.options.pad)+this.options.ext},getFrameUrlById:function(a){return this.options.path+"/"+this.options.base+this.pad(a,this.options.pad)+this.options.ext},getFrameImageByIndex:function(a){var b=new Image;b.src=this.getFrameUrlByIndex(a);return b},getFrameImageById:function(a){var b=new Image;b.src=this.getFrameUrlById(a);return b},pad:function(a,b){var c="00000000000"+a;return c.substring(c.length-b,c.length)},onImageLoaded:function(){if(--this.numImagesToLoad===0){this.events.trigger(ImageVideoPlayer.EVENT_PRELOAD_COMPLETE)}},onPreloadComplete:function(){this.preloaded=true;if(this.playing){this.render()}},onFrame:function(){if(this.playing){if(this.currentFrameIndex<this.frames.length){if((new Date).getTime()-this.lastFrameTime>=this.interval){this.renderFrame(this.currentFrameIndex++);this.lastFrameTime=(new Date).getTime()}}else{this.pause();this.events.trigger(ImageVideoPlayer.EVENT_PLAYBACK_END)}}}}});var Resource=Class._extend({_static:{CLOUD_STORAGE_URL:"//arcade-fire.commondatastorage.googleapis.com/",local:/localhost/.test(window.location.host)||/127.0.0.1/.test(window.location.host),get:function(a,b){var c=Resource.local||b;if(c){return"../"+a}else{return Resource.CLOUD_STORAGE_URL+a.replace(/^\//,"")}}}});var BufferLoader=Class._extend({_public:{construct:function(a){this.context=a;this.bufferList=[];this.loadCount=0},load:function(a,b){var c=0,d,e=this,f=function(d,f){console.log("buffer loaded:",a[f]);
e.bufferList[f]=d;if(++c===a.length){if(typeof b==="function"){b(e.bufferList)}}};for(d=0;d<a.length;++d){this.loadBuffer(a[d],this.createLoadHandler(d,f))}}},_private:{context:null,bufferList:[],loadCount:0,loadBuffer:function(a,b){var c=new XMLHttpRequest,d=this;c.open("GET",a,true);c.responseType="arraybuffer";c.onload=function(){d.context.decodeAudioData(c.response,function(c){if(!c){console.error("error decoding file data: "+a);return}if(typeof b==="function"){b(c)}})};c.onerror=function(){console.error("BufferLoader: XHR error")};c.send()},createLoadHandler:function(a,b){return function(c){b(c,a)}}}});var Scheduler=Class._extend({_public:{construct:function(a){this.context=a;this.sounds=[];this.scheduleAheadTime=5;this.offset=0},add:function(a,b,c,d,e){this.sounds.push([a,b,c,d,e]);this.sounds.sort(function(a,b){return a[0]-b[0]})},start:function(){this.paused=false;return},stop:function(){this.paused=true;return},pause:function(){this.paused=true;this.clear()},resume:function(){this.paused=false},resync:function(){this.reschedule()},setMuted:function(a){this.muted=a;if(a){this.clear()}else{this.reschedule()}}},_private:{paused:true,muted:false,context:null,sounds:[],sources:[],scheduleAheadTime:0,localTimeOffset:0,clear:function(){var a;for(a=0;a<this.sources.length;++a){try{this.sources[a].disconnect()}catch(b){}try{this.sources[a].stop(0)}catch(b){}}this.sources=[]},reschedule:function(){var a,b,c,d=99999,e;this.clear();if(this.paused||this.muted){return}for(e=0;e<this.sounds.length;++e){b=this.sounds[e][0]-TimelineController.getInstance().getCurrentTime()*.001+this.context.currentTime+AudioController.OFFSET;d=this.sounds[e][4];c=b<this.context.currentTime?this.context.currentTime-b:0;if(c<d){a=this.context.createBufferSource();a.buffer=this.sounds[e][1];a.loop=this.sounds[e][2]||false;if(AudioController.getInstance().gainNode){a.connect(AudioController.getInstance().gainNode)}else{a.connect(this.context.destination)}this.sources.push(a);if(a.start){a.start(b,c,d)}else if(a.noteOn){if(c===0||c<1&&this.sounds[e][0]===1){a.noteOn(b)}}}else{}}}}});var View=Class._extend(Class.ABSTRACT,{_static:{EVENT_READY:"View_EVENT_READY",TEMPLATES_PATH:"m/template/view/",TRANSITION_TIME:2e3,helpers:[],registerHelper:function(a,b){View.helpers.push({f:a,pre:b===true})}},_public:{construct:function(a,b,c){var d=this;this.$container=b?$(b):null;if(b){this.endTransitionHide()}this.id=a;this.model=c;this.hideTimeoutId=-1;this.showTransitionId=-1;this.hideTransitionId=-1;if(this.model){this.model.events.on(Model.EVENT_CHANGE,function(a){d.onModelChange(a.data)})}if(this.id){this.loadTemplate();$(window).bind("resize orientationchange webkitfullscreenchange mozfullscreenchange fullscreenchange",function(){d.onResize.apply(d,arguments)});$(window).bind("touchmove",function(){d.onTouchMove.apply(d,arguments)})}},init:function(){return},bindEvents:function(){return},show:function(){var a=arguments,b=this;clearTimeout(this.hideTimeoutId);if(!this.template){clearTimeout(this.showTimeoutId);this.showTimeoutId=setTimeout(function(){b.show.apply(b,a)},5);return false}if(this.shown){return true}this.shown=true;this.transitionShow();return true},hide:function(){var a=this;clearTimeout(this.showTimeoutId);clearTimeout(this.hideTimeoutId);this.hideTimeoutId=setTimeout(function(){if(!a.shown){return false}a.shown=false;a.transitionHide()},1);return true},transitionShow:function(){clearTimeout(this.showTimeoutId);clearTimeout(this.hideTimeoutId);this.$page.css("opacity",0);this.$container.show();TweenLite.to(this.$page,View.TRANSITION_TIME*.001,{css:{opacity:1},ease:Power2.easeIn,delay:.05});this.endTransitionShow()},endTransitionShow:function(){this.$container.removeClass("hidden");this.$container.removeClass("hiding");this.$container.removeClass("showing");this.$container.addClass("shown")},transitionHide:function(){clearTimeout(this.showTimeoutId);clearTimeout(this.hideTimeoutId);this.endTransitionHide()},endTransitionHide:function(){this.$container.removeClass("hiding");this.$container.removeClass("shown");this.$container.addClass("hidden")},destroy:function(){this.$container.remove()}},_protected:{id:null,$container:null,shown:false,template:null,model:null,showTimeoutId:-1,hideTimeoutId:-1,loadTemplate:function(){var a=this;if(Handlebars&&Handlebars.templates&&Handlebars.templates[this.id]){this.onTemplateLoadComplete()}else{$.getScript(View.TEMPLATES_PATH+this.id+".js",function(){a.onTemplateLoadComplete()})}},renderTemplate:function(){this.$container.html(this.template(this.model));this.$page=this.$container?this.$container.find(".page"):$({})},runHelpers:function(a){var b;for(b=0;b<View.helpers.length;++b){if(typeof View.helpers[b].f==="function"&&View.helpers[b].pre===a){View.helpers[b].f.call(this)}}},onTemplateLoadComplete:function(){this.template=Handlebars.templates[this.id];this.renderTemplateCore()},onPreRender:function(){return},onPostRender:function(){return},onModelChange:function(a){return a},onResize:function(a){return a},onTouchMove:function(a){a.preventDefault()}},_private:{renderTemplateCore:function(){this.runHelpers(true);this.renderTemplate();this.init();this.runHelpers(false);this.bindEvents();this.onPostRender()}}});var PreloaderView=View._extend({_public:{construct:function(a,b){View.call(this,a,b)},show:function(){if(!View.prototype.show.call(this)){return}PreloadController.getInstance().preloadMain();AnalyticsController.getInstance().trackPageView("PreloaderView")}},_protected:{init:function(){this.$loaderIcon=this.$container.find(".loader-icon")}},_private:{$loaderIcon:null,bindEvents:function(){var a=this;PreloadController.getInstance().events.on(PreloadController.EVENT_MAIN_PROGRESS,function(b,c){a.onProgress(c);return b});PreloadController.getInstance().events.on(PreloadController.EVENT_MAIN_COMPLETE,function(){a.onComplete()})},proceed:function(){this.hide();RoutingController.getInstance().enabled=true;RoutingController.getInstance().route();if(/controller/g.test(window.location.href.toString())){ViewController.getInstance().getView("ControllerView").show();MobileController.getInstance().preventSleep()}},tryReconnect:function(a){var b=this;RemoteController.getInstance().tryReconnect(a,function(){console.log("*** reconnect success ***");b.hide();RoutingController.getInstance().enabled=true;RemoteController.getInstance().resynced=true;ViewController.getInstance().getView("JoinView").show(a)},function(){console.log("*** reconnect failure ***");b.proceed();return})},onProgress:function(a){return a},onComplete:function(){if($.cookie("code")&&$.cookie("code").length===5){this.tryReconnect($.cookie("code"))}else{this.proceed()}}}});var LandingPageView=View._extend({_public:{construct:function(a,b){View.call(this,a,b)},init:function(){this.fullScreenTarget=$(".main")[0];this.$connectionCode=this.$container.find("input.connection-code");this.$formConnectionCode=this.$container.find('[name="form-connection-code"]');this.$buttonConnect=this.$container.find("button.connect");this.$noCode=this.$container.find(".no-code");this.$noCode.html(this.$noCode.html().replace("{{url}}","<span>"+Config.getInstance().desktopConnectionUrl+"</span>").replace("http://","").replace("https://",""));this.$buttonGoogle=this.$container.find(".icon-google");this.$buttonTwitter=this.$container.find(".icon-twitter");this.$buttonFacebook=this.$container.find(".icon-facebook")},bindEvents:function(){var a=this;this.$buttonConnect.off("click").bind("click",function(){a.onButtonConnectClick()});this.$formConnectionCode.submit(function(){a.onButtonConnectClick();return false});this.$connectionCode.off("blur").bind("blur",function(){a.onConnectionCodeBlur()});this.$connectionCode.off("keyup").bind("keyup",function(b){a.onConnectionCodeChange(b)});this.$connectionCode.off("keydown").bind("keydown",function(b){return a.onConnectionCodeKeyDown(b)});this.$buttonGoogle.bind("click",function(){a.onButtonGoogleClick();return false});this.$buttonTwitter.bind("click",function(){a.onButtonTwitterClick();return false});this.$buttonFacebook.bind("click",function(){a.onButtonFacebookClick();return false});this.$container.find(".about").bind("click",function(){RoutingController.getInstance().routeAbout()});this.$container.find(".terms").bind("click",function(){RoutingController.getInstance().routeTerms()});$(window).bind("touchstart.LandingPageView",function(){a.onTouch()})},show:function(a){if(!View.prototype.show.call(this,a)){return}this.$connectionCode.val("");this.onConnectionCodeChange();RemoteController.getInstance().waitForConnectionCode();MobileController.getInstance().preventUndoShake();AnalyticsController.getInstance().trackPageView("LandingPageView")},forceConnection:function(a){console.log("Automatic Connection: ",a);this.$connectionCode.val(a);this.onButtonConnectClick()}},_private:{fullScreenTarget:null,$buttonGoogle:null,$buttonTwitter:null,$buttonFacebook:null,$connectionCode:null,$buttonConnect:null,$noCode:null,connectionClickInProgress:false,onButtonConnectClick:function(){if($.trim(this.$connectionCode.val()).length!==5){return}this.connectionClickInProgress=true;document.activeElement.blur();this.$connectionCode.blur();this.hide();ViewController.getInstance().getView("JoinView").show(this.$connectionCode.val().toLowerCase())},onConnectionCodeBlur:function(){if(!this.connectionClickInProgress&&DetectionController.getInstance().isSafari){window.setTimeout(function(){$(window).trigger("resize")},0);this.connectionClickInProgress=false}},onConnectionCodeKeyDown:function(a){if(DetectionController.getInstance().isAndroid){return true}if(this.$connectionCode.val().length===5){return a.which===8}},onConnectionCodeChange:function(a){if(DetectionController.getInstance().isAndroid){var b=this.$connectionCode.val();if(b.length>5){this.$connectionCode.val(b.slice(0,5))}}if(a&&a.keyCode===13){this.onButtonConnectClick();a.preventDefault();a.stopPropagation();return false}if(this.$connectionCode.val().length===5){this.$buttonConnect.addClass("active")}else{this.$buttonConnect.removeClass("active")}},onButtonGoogleClick:function(){SharingController.getInstance().shareLinkOnGoogle()},onButtonTwitterClick:function(){SharingController.getInstance().shareOnTwitter()},onButtonFacebookClick:function(){SharingController.getInstance().shareLinkOnFacebook()},onTouch:function(){if(DetectionController.getInstance().isAndroid){FullScreenController.getInstance().request(this.fullScreenTarget)}}}});var JoinView=View._extend({_static:{TIMEOUT:3e4},_public:{construct:function(a,b){View.call(this,a,b)},bindEventsShown:function(){var a=this;RemoteController.getInstance().events.bind(RemoteController.EVENT_PEER_ENTER,function(b,c){a.onPeerEnter(c);return b});RemoteController.getInstance().events.bind(RemoteController.EVENT_MESH_EMPTY,function(b,c){a.onMeshEmpty(c);return b});RemoteController.getInstance().events.bind(RemoteController.EVENT_MESH_FULL,function(b,c){a.onMeshFull(c);return b})},unbind:function(){RemoteController.getInstance().events.unbind(RemoteController.EVENT_PEER_ENTER);RemoteController.getInstance().events.unbind(RemoteController.EVENT_MESH_FULL);RemoteController.getInstance().events.unbind(RemoteController.EVENT_MESH_EMPTY)},show:function(a){var b,c=this;if(!View.prototype.show.call(this)){return}this.bindEventsShown();b=a;RemoteController.getInstance().join(b);clearTimeout(this.timeoutId);this.timeoutId=setTimeout(function(){c.onTimeout()},JoinView.TIMEOUT);AnalyticsController.getInstance().trackPageView("JoinView")}},_private:{onPeerEnter:function(){this.unbind();this.hide();clearTimeout(this.timeoutId);ViewController.getInstance().getView("SyncSuccessView").show()},onMeshEmpty:function(){this.unbind();this.hide();clearTimeout(this.timeoutId);AnalyticsController.getInstance().trackEvent(AnalyticsController.EVENT_SYNC_WRONG_CODE);ViewController.getInstance().getView("ExperienceEmptyView").show()},onMeshFull:function(){this.unbind();this.hide();clearTimeout(this.timeoutId);AnalyticsController.getInstance().trackEvent(AnalyticsController.EVENT_SYNC_FULL);ViewController.getInstance().getView("ExperienceFullView").show()},onTimeout:function(){this.unbind();this.hide();clearTimeout(this.timeoutId);AnalyticsController.getInstance().trackEvent(AnalyticsController.EVENT_SYNC_TIMEOUT);ViewController.getInstance().getView("ConnectionTimeoutView").show()}}});var ExperienceEmptyView=View._extend({_public:{construct:function(a,b){View.call(this,a,b)},show:function(){if(!View.prototype.show.call(this)){return}AnalyticsController.getInstance().trackPageView("ExperienceEmptyView")}}});var ExperienceFullView=View._extend({_public:{construct:function(a,b){View.call(this,a,b)},show:function(){if(!View.prototype.show.call(this)){return}AnalyticsController.getInstance().trackPageView("ExperienceFullView")}}});var ConnectionTimeoutView=View._extend({_public:{construct:function(a,b){View.call(this,a,b)},show:function(){if(!View.prototype.show.call(this)){return}AnalyticsController.getInstance().trackPageView("ConnectionTimeoutView")}}});var SyncSuccessView=View._extend({_public:{construct:function(a,b){View.call(this,a,b)},show:function(){var a=this;if(!View.prototype.show.call(this)){return}this.nextTimeoutId=setTimeout(function(){a.onTimeout()},4e3);AnalyticsController.getInstance().trackPageView("SyncSuccessView")},hide:function(){View.prototype.hide.call(this);clearTimeout(this.nextTimeoutId)}},_private:{nextTimeoutId:-1,onTimeout:function(){this.hide();ViewController.getInstance().getView("ExperienceLoadingView").show();ViewController.getInstance().getView("ControllerView").show()}}});var ExperienceLoadingView=View._extend({_public:{construct:function(a,b){View.call(this,a,b)},init:function(){this.$progress=this.$container.find(".progress")},show:function(){if(!View.prototype.show.call(this)){return}this.bindEventsShown();setTimeout(function(){PreloadController.getInstance().preloadExperience()},4500);MobileController.getInstance().disableMagnifyingGlass();AnalyticsController.getInstance().trackPageView("ExperienceFullView")},hide:function(){this.unbindEventsHidden()}},_private:{$progress:null,selfReady:false,peerReady:false,lastSendTime:-1,bindEventsShown:function(){var a=this;PreloadController.getInstance().events.bind(PreloadController.EVENT_EXPERIENCE_PROGRESS+".ExperienceLoadingView",function(b,c){a.onProgress(c);return b});PreloadController.getInstance().events.bind(PreloadController.EVENT_EXPERIENCE_COMPLETE+".ExperienceLoadingView",function(){a.onComplete()});RemoteController.getInstance().events.bind(RemoteController.EVENT_EXPERIENCE_START+".ExperienceLoadingView",function(){a.onExperienceStart()})},unbindEventsHidden:function(){PreloadController.getInstance().events.unbind(PreloadController.EVENT_EXPERIENCE_PROGRESS+".ExperienceLoadingView");PreloadController.getInstance().events.unbind(PreloadController.EVENT_EXPERIENCE_COMPLETE+".ExperienceLoadingView");RemoteController.getInstance().events.unbind(RemoteController.EVENT_EXPERIENCE_START+".ExperienceLoadingView")},tryGoNext:function(){if(this.selfReady&&this.peerReady){this.hide();ViewController.getInstance().getView("ControllerView").show();ViewController.getInstance().getView("ControllerView").setMaxExperienceTimeTimeout()}},onProgress:function(a){var b=(new Date).getTime();this.$progress.text(Math.round(a*100));if(b-this.lastSendTime>1e3){this.lastSendTime=b;RemoteController.getInstance().reportLoadingProgress(a)}},onComplete:function(){this.selfReady=true;ViewController.getInstance().getView("AxelleVideoView").initAsync();RemoteController.getInstance().reportLoadingProgress(1);RemoteController.getInstance().ready(true);this.tryGoNext();if(!DetectionController.getInstance().isChrome){MobileController.getInstance().preventSleep(true)}},onExperienceStart:function(){this.peerReady=true;this.tryGoNext()}}});var DisconnectedView=View._extend({_public:{construct:function(a,b){View.call(this,a,b)},show:function(){if(!View.prototype.show.call(this)){return}$.cookie("code","");AnalyticsController.getInstance().trackPageView("DisconnectedView")}}});var ControllerView=View._extend({_static:{ORIENTATION_SEND_INTERVAL:10,COLOUR_ACTIVE:"00ffff",COLOUR_INACTIVE:"4f4f4f",BUTTON_TOUCH_TIMEOUT:3e4,MAX_EXPERIENCE_TIME_TIMEOUT:15*60*1e3,MAX_TRACKER_SIZE:350},_public:{construct:function(a,b){View.call(this,a,b)},show:function(){if(this.shown||!View.prototype.show.call(this)){return}this.buttonTouchView.show();this.bindEventsShown();OrientationController.getInstance().start();if(DetectionController.getInstance().isChrome){$(".main").height(window.innerHeight)}TimelineController.getInstance().start();$.cookie("code",RemoteController.getInstance().mesh.id,{expires:1});AnalyticsController.getInstance().trackPageView("ControllerView");this.buildTimeline()},hide:function(){View.prototype.hide.call(this);this.buttonTouchView.hide();TimelineController.getInstance().stop();this.unbindEventsHidden()}},_private:{x:1e-4,y:1e-4,z:1e-4,uTime:1e-4,sTime:1e-4,lastUpdateTime:0,$buttonTouch:null,buttonTouchView:null,$time:null,$canvas:null,canvas:null,context:null,contextMirror:null,touchMode:false,isTouched:false,isLandscape:false,buttonTouchTimeoutId:-1,lightpc:1,holepc:.5,blackScreen:false,lastOrientationSendTime:0,lastLuminosityMessage:0,drawAnimation:false,animOptions:{},timeline:null,imageLogo:null,imageLogo2:null,init:function(){this.buttonTouchView=ViewController.getInstance().getView("TouchButtonView");this.$buttonTouch=this.buttonTouchView.$container.find("button.touch");this.$canvas=this.$container.find("canvas.tracker");this.$time=this.$container.find(".debug .time");this.canvas=this.$canvas[0];this.context=this.canvas.getContext("2d");this.touchMode=DetectionController.getInstance().isIos&&DetectionController.getInstance().isChrome||window.top.document!==window.document;this.drawAnimation=true;if(this.touchMode){this.$buttonTouch.show()}this.currentColor=ControllerView.COLOUR_ACTIVE;Debug.add(this,"x","Gyro");Debug.add(this,"y","Gyro");Debug.add(this,"z","Gyro");Debug.add(this,"uTime","Gyro");Debug.add(this,"sTime","Gyro");window.startTime=Date.now()},setMaxExperienceTimeTimeout:function(){clearTimeout(this.maxExperienceTimeTimeoutId);this.maxExperienceTimeTimeoutId=setTimeout(function(){window.location.href="/m/disconnected"},ControllerView.MAX_EXPERIENCE_TIME_TIMEOUT)},lightDebug:function(a){this.holepc=.25+.4*a.touches[0].pageX/window.innerWidth;this.lightpc=1-.5*(a.touches[0].pageX/window.innerWidth);this.drawTracker()},onLuminosityChange:function(a){this.lightpc=a[0];this.holepc=a[1];this.lastLuminosityMessage=Math.floor(Date.now()-window.startTime);this.drawTracker()},bindEvents:function(){var a=this},bindEventsShown:function(){var a=this;RemoteController.getInstance().events.bind(RemoteController.EVENT_AXELLE_START+".ControllerView",function(b,c){a.onAxelleStart(c);return b});RemoteController.getInstance().events.bind(RemoteController.EVENT_AXELLE_PAUSE+".ControllerView",function(b,c){a.onAxellePause(c);return b});RemoteController.getInstance().events.bind(RemoteController.EVENT_AXELLE_HIDE+".ControllerView",function(){a.onAxelleHide()});RemoteController.getInstance().events.bind(RemoteController.EVENT_LUMINOSITY_CHANGE+".ControllerView",function(b,c){a.onLuminosityChange(c)});OrientationController.getInstance().events.bind(OrientationController.EVENT_ORIENTATION_CHANGE+".ControllerView",function(){a.onOrientationChange()});MobileController.getInstance().events.bind(MobileController.STATE_FINGER_DOWN+".ControllerView",function(){a.onButtonTouchTouchStart()});MobileController.getInstance().events.bind(MobileController.STATE_FINGER_UP+".ControllerView",function(){a.onButtonTouchTouchEnd()});AnimationController.getInstance().events.bind(AnimationController.EVENT_FRAME+".ControllerView",function(){a.onFrame()})},unbindEventsHidden:function(){RemoteController.getInstance().events.unbind(RemoteController.EVENT_AXELLE_START+".ControllerView");RemoteController.getInstance().events.unbind(RemoteController.EVENT_AXELLE_PAUSE+".ControllerView");RemoteController.getInstance().events.unbind(RemoteController.EVENT_AXELLE_HIDE+".ControllerView");RemoteController.getInstance().events.unbind(RemoteController.EVENT_LUMINOSITY_CHANGE+".ControllerView");OrientationController.getInstance().events.unbind(OrientationController.EVENT_ORIENTATION_CHANGE+".ControllerView");MobileController.getInstance().events.unbind(MobileController.STATE_FINGER_DOWN+".ControllerView");AnimationController.getInstance().events.unbind(AnimationController.EVENT_FRAME+".ControllerView")},onPortraitLandscapeChange:function(){switch(window.orientation){case-90:this.$buttonTouch.removeClass("right").addClass("left");this.isLandscape=true;break;case 90:this.$buttonTouch.removeClass("left").addClass("right");this.isLandscape=true;break;default:this.$buttonTouch.removeClass("left right");this.isLandscape=false;break}},buildTimeline:function(){var a=this,b=function(){a.drawAnimation=false;a.drawTracker()};this.drawAnimation=true;if(RemoteController.getInstance().resynced){b()}else{this.animOptions={gridProgress:1,grid:true,squareFillProgress:0,squareFill:false,squareRotation:-Math.PI/4,squareScale:this.holepc,circleFillProgress:0,circleFill:false};var a=this;var c=this.timeline=new TimelineLite({delay:0,onUpdate:function(){a.drawTracker()},onComplete:function(){b()}});c.to(this.animOptions,1,{delay:2,gridProgress:0,squareFillProgress:1});c.to(this.animOptions,.05,{squareFillProgress:0});c.to(this.animOptions,.5,{squareRotation:0,squareScale:1});c.to(this.animOptions,.05,{circleFillProgress:1,squareFillProgress:1});c.to(this.animOptions,.05,{squareFillProgress:0});c.to(this.animOptions,.05,{squareFillProgress:1});c.to(this.animOptions,.05,{squareFillProgress:0});c.to(this.animOptions,.05,{squareFillProgress:1});c.to(this.animOptions,.05,{squareFillProgress:0});c.to(this.animOptions,.05,{squareFillProgress:1});c.play()}},drawTrackerAnim:function(){var a=Math.max(window.innerHeight,$(".main").height()),b=window.innerHeight<$(window).height(),c=this.touchMode&&!this.isLandscape?b?-165:-135:0,d=20,e=Math.min($(window).width()+(this.isLandscape?-135*2:0)-d,a+c-d,ControllerView.MAX_TRACKER_SIZE),f,g,h,i,j,k,l=this.context;this.canvas.width=$(window).width();this.canvas.height=a;l.fillStyle="black";l.fillRect(0,0,this.canvas.width,this.canvas.height);g=e*this.animOptions.squareScale-d*2;h=e*this.animOptions.squareScale-d*2;i=(this.canvas.width-g)/2;j=(this.canvas.height-h)/2+c*.5;k=e*this.holepc-d*2;l.lineWidth=2;l.strokeStyle="#ffffff";l.save();l.translate(this.canvas.width/2,this.canvas.height/2+c*.5);l.rotate(this.animOptions.squareRotation);l.translate(-this.canvas.width/2,-this.canvas.height/2-c*.5);l.beginPath();l.rect(i,j,g,h);l.closePath();l.stroke();if(this.animOptions.squareFillProgress<.1){this.animOptions.squareFill=false}else if(this.animOptions.squareFillProgress>.9){this.animOptions.squareFill=true}if(this.animOptions.squareFill){l.fillStyle="#ffffff";l.fill()}if(this.animOptions.gridProgress<.1){this.animOptions.grid=false}else if(this.animOptions.gridProgress>.9){this.animOptions.grid=true}if(this.animOptions.grid){l.beginPath();for(var m=1;m<3;m++){var n=g/3*m;l.moveTo(i+n,j);l.lineTo(i+n,j+h);l.moveTo(i,j+n);l.lineTo(i+g,j+n)}l.closePath();l.stroke()}l.restore();l.fillStyle="black";l.globalAlpha=1;l.beginPath();l.arc(i+g/2,j+h/2,k/2,0,Math.PI*2,true);l.closePath();l.lineWidth=2;l.strokeStyle="#ffffff";l.stroke();if(this.animOptions.circleFillProgress<.1){this.animOptions.circleFill=false}else if(this.animOptions.circleFillProgress>.9){this.animOptions.circleFill=true}if(this.animOptions.circleFill){l.fillStyle="#000000";l.fill()}},drawTracker:function(){if(!this.shown){return}if(this.drawAnimation){return this.drawTrackerAnim()}var a=Math.max(window.innerHeight,$(".main").height()),b=window.innerHeight<$(window).height(),c=this.touchMode&&!this.isLandscape?b?-165:-135:0,d=20,e=Math.min(Math.min($(window).width()+(this.isLandscape?-135*2:0)-d,a+c-d),ControllerView.MAX_TRACKER_SIZE),f,g,h,i,j,k,l=this.context;this.canvas.width=$(window).width();this.canvas.height=a;l.fillStyle="black";l.fillRect(0,0,this.canvas.width,this.canvas.height);g=e-d*2;h=e-d*2;i=(this.canvas.width-g)/2;j=(this.canvas.height-h)/2+c*.5;k=g*this.holepc;l.lineWidth=2;l.strokeStyle="#ffffff";l.beginPath();l.rect(i,j,g,h);l.closePath();l.stroke();f="#"+this.currentColor;l.globalAlpha=!this.blackScreen?this.lightpc:0;l.fillStyle=f;l.fillRect(i,j,g,h);l.fillStyle="black";l.globalAlpha=1;l.beginPath();l.arc(i+g/2,j+h/2,k/2,0,Math.PI*2,true);l.closePath();l.lineWidth=4;l.strokeStyle="#ffffff";l.stroke();l.fillStyle="#000000";l.fill();l.globalAlpha=1},secondsToMinutesString:function(a){var b=Math.floor(a/60);var c=Math.round(a-b*60);return b+":"+(c<10?"0"+c:c)},onButtonTouchTouchStart:function(){var a=this;clearTimeout(this.buttonTouchTimeoutId);this.$buttonTouch.addClass("over");this.currentColor=ControllerView.COLOUR_ACTIVE;this.drawTracker();clearTimeout(this.buttonTouchTimeoutId);this.buttonTouchTimeoutId=setTimeout(function(){a.$buttonTouch.removeClass("over").addClass("inactive");a.$buttonTouch.removeClass("inactive");a.drawTracker()},ControllerView.BUTTON_TOUCH_TIMEOUT)},onButtonTouchTouchEnd:function(){var a=this;this.$buttonTouch.removeClass("over").addClass("inactive");clearTimeout(this.buttonTouchTimeoutId);this.buttonTouchTimeoutId=setTimeout(function(){a.$buttonTouch.removeClass("inactive");a.drawTracker()},ControllerView.BUTTON_TOUCH_TIMEOUT)},onAxelleStart:function(a){ViewController.getInstance().getView("AxelleVideoView").show(a)},onAxellePause:function(a){ViewController.getInstance().getView("AxelleVideoView").pause(a)},onAxelleHide:function(){ViewController.getInstance().getView("AxelleVideoView").hide()},onFrame:function(){this.$time.text(this.secondsToMinutesString(TimelineController.getInstance().getCurrentTime()*.001)+" / "+(TimelineController.getInstance().getCurrentTime()*.001).toFixed(2))},onResize:function(){this.onPortraitLandscapeChange();if(this.shown){this.drawTracker()}},onOrientationChange:function(){var a=(new Date).getTime();if(a-this.lastOrientationSendTime>ControllerView.ORIENTATION_SEND_INTERVAL){this.lastOrientationSendTime=a;this.sTime=((a-this.lastOrientationSendTime)*.001).toFixed(2);RemoteController.getInstance().sendOrientation(OrientationController.getInstance().worldQuaternion.x,OrientationController.getInstance().worldQuaternion.y,OrientationController.getInstance().worldQuaternion.z,OrientationController.getInstance().worldQuaternion.w,OrientationController.getInstance().worldAcceleration.x,OrientationController.getInstance().worldAcceleration.y,OrientationController.getInstance().worldAcceleration.z)}this.x=OrientationController.getInstance().worldQuaternion.x.toFixed(2);this.y=OrientationController.getInstance().worldQuaternion.y.toFixed(2);this.z=OrientationController.getInstance().worldQuaternion.z.toFixed(2);this.uTime=((a-this.lastUpdateTime)*.001).toFixed(2);this.lastUpdateTime=a}}});var EndScreenView=View._extend({_public:{construct:function(a,b){View.call(this,a,b)},show:function(){if(!View.prototype.show.call(this)){return}$.cookie("code","");AnalyticsController.getInstance().trackPageView("EndScreenView")}},_protected:{$buttonRestart:null,init:function(){this.$buttonRestart=this.$container.find("button.restart");this.$buttonGoogle=this.$container.find(".icon-google");this.$buttonTwitter=this.$container.find(".icon-twitter");this.$buttonFacebook=this.$container.find(".icon-facebook")},bindEvents:function(){var a=this;this.$buttonRestart.bind("click",function(){a.onRestartClick()});this.$buttonGoogle.bind("click",function(){a.onButtonGoogleClick();return false});this.$buttonTwitter.bind("click",function(){a.onButtonTwitterClick();return false});this.$buttonFacebook.bind("click",function(){a.onButtonFacebookClick();return false})},onRestartClick:function(){RemoteController.getInstance().restart();this.hide();ViewController.getInstance().getView("ControllerView").show();ViewController.getInstance().getView("ControllerView").setMaxExperienceTimeTimeout()},onButtonGoogleClick:function(){SharingController.getInstance().shareLinkOnGoogle()},onButtonTwitterClick:function(){SharingController.getInstance().shareOnTwitter()},onButtonFacebookClick:function(){SharingController.getInstance().shareLinkOnFacebook()}}});var AboutView=View._extend({_static:{IMAGES_FOLDER:"/m/img/about/"},_public:{$logo:null,$close:null,$linkCine:null,player:null,player2:null,imageUrls:{"about-view-image":"justareflektor_arcadefire.jpg","about-view-image-1":"justareflektor_arcadefire_1.jpg","about-view-image-2":"justareflektor_arcadefire_2.jpg","about-view-image-3":"justareflektor_arcadefire_3.jpg","about-view-image-4":"justareflektor_arcadefire_4.jpg","about-view-image-5":"justareflektor_arcadefire_5.jpg"},construct:function(a,b){View.call(this,a,b)},init:function(){this.$close=this.$container.find(".icon-close");this.$logo=this.$container.find(".logo-about");this.$linkCine=this.$container.find('a[href="http://www.cineinstitute.com"]')},bindEvents:function(){var a=this;this.$logo.unbind("click").bind("click",function(){a.hide()});this.$close.unbind("click").bind("click",function(){a.hide()});this.$linkCine.unbind("click").bind("click",function(b){a.onLinkCineClick(b)})},show:function(){var a;if(!View.prototype.show.call(this)){return}for(a in this.imageUrls){console.log("adding image",a,AboutView.IMAGES_FOLDER+this.imageUrls[a]);if(!this.$container.find("."+a).attr("src")){this.$container.find("."+a).attr("src",AboutView.IMAGES_FOLDER+this.imageUrls[a])}}if(!this.$container.find("#ytPlayer_about").is("iframe")){var b=document.createElement("script");b.src="https://www.youtube.com/player_api";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c);var d=this;window.onYouTubePlayerAPIReady=function(){d.player=new YT.Player("ytPlayer_about",{height:"240",width:"100%",videoId:"_3D8hYIfpqg",playerVars:{showinfo:0,modestbranding:1,wmode:"opaque"}});d.player2=new YT.Player("ytPlayer_about2",{height:"240",width:"100%",videoId:"KW63DY8dvww",playerVars:{showinfo:0,modestbranding:1,wmode:"opaque"}})}}$(".main").css({overflow:"visible"});$(window).unbind("touchmove")},hide:function(){$(window).bind("touchmove",function(a){a.preventDefault()});$(".main").css({overflow:"hidden"});if(this.player&&this.player.stopVideo){this.player.stopVideo()}View.prototype.hide.call(this);window.setupScroll()},onLinkCineClick:function(a){a.preventDefault();window.open("http://www.cineinstitute.com","_blank")}}});var TouchButtonView=View._extend({_public:{construct:function(a,b){View.call(this,a,b)},show:function(){if(this.shown||!View.prototype.show.call(this)){return}},hide:function(){View.prototype.hide.call(this)}}});var AxelleVideoView=View._extend({_static:{START_TIME:4*60+7,END_TIME:4*60+42,NOISE_FADE_START:80,NOISE_FADE_END:200,FRAME_PATH:"/m/img/axelle",FRAME_BASE:"AXELLE_GLITCH_phone_",FRAME_START:0,FRAME_END:279,FRAME_STEP:1,PADDING:6,FRAME_EXTENSION:".jpg",FRAME_RATE:11,FRAME_WIDTH:320,FRAME_HEIGHT:480},_public:{construct:function(a,b){View.call(this,a,b)},show:function(a){if(!View.prototype.show.call(this,a)){return}this.paused=false},pause:function(){if(this.paused){return}this.paused=true},hide:function(){View.prototype.hide.call(this);this.pause()}},_private:{$video:null,$canvas:null,paused:false,player:null,overlayImages:[],currentOverlayIndex:0,canvas:null,context:null,clear:false,redrawRate:0,lastRedrawTime:-1,lastFrameIndex:-1,initAsync:function(){this.$video=this.$container.find(".video");this.canvas=document.createElement("canvas");this.context=this.canvas.getContext("2d");this.player=new ImageVideoPlayer({path:AxelleVideoView.FRAME_PATH,base:AxelleVideoView.FRAME_BASE,start:AxelleVideoView.FRAME_START,end:AxelleVideoView.FRAME_END,step:AxelleVideoView.FRAME_STEP,pad:AxelleVideoView.PADDING,ext:AxelleVideoView.FRAME_EXTENSION,frameRate:AxelleVideoView.FRAME_RATE,width:AxelleVideoView.FRAME_WIDTH,height:AxelleVideoView.FRAME_HEIGHT});
this.redrawRate=1e3/this.player.options.frameRate;this.$canvas=$(this.player.canvas);this.$video.append(this.$canvas);this.loadOverlayImages();this.bindEventsAsync()},bindEventsAsync:function(){var a=this;AnimationController.getInstance().events.unbind(AnimationController.EVENT_FRAME+".AxelleVideoView");AnimationController.getInstance().events.bind(AnimationController.EVENT_FRAME+".AxelleVideoView",function(){a.onFrame()})},loadOverlayImages:function(){var a=this,b=6,c;function d(){a.overlayImages.push(c);if(--b===0){a.onResize();if(a.shown){a.player.play()}}else{e()}}function e(){c=new Image;c.onload=d;c.src="/m/img/axelle/NOISE_0000"+a.overlayImages.length+".jpg"}e()},onFrame:function(){if(!this.shown){return}this.player.currentFrameIndex=Math.round(Math.max(0,(TimelineController.getInstance().getCurrentTime()*.001-AxelleVideoView.START_TIME)/(AxelleVideoView.END_TIME-AxelleVideoView.START_TIME)*AxelleVideoView.FRAME_END));if(this.player&&this.player.currentFrameIndex!==this.lastFrameIndex&&this.player.currentFrameIndex<=this.player.options.end){this.player.context.clearRect(0,0,this.player.canvas.width,this.player.canvas.height);this.lastFrameIndex=this.player.currentFrameIndex;this.player.context.globalAlpha=1;this.player.renderFrame(this.player.currentFrameIndex);this.player.context.globalAlpha=Math.min(Math.max((this.player.currentFrameIndex-AxelleVideoView.NOISE_FADE_START)/(AxelleVideoView.NOISE_FADE_END-AxelleVideoView.NOISE_FADE_START),0),1);this.player.context.drawImage(this.overlayImages[this.currentOverlayIndex],0,0,this.player.canvas.width,this.player.canvas.height);this.player.context.globalAlpha=1;this.currentOverlayIndex=(this.currentOverlayIndex+1)%this.overlayImages.length;this.lastRedrawTime=-1}else if(!this.player||this.player.currentFrameIndex>=this.player.options.end){if((new Date).getTime()-this.lastRedrawTime>=this.redrawRate){this.player.context.clearRect(0,0,this.player.canvas.width,this.player.canvas.height);this.player.context.globalAlpha=1;this.player.context.drawImage(this.overlayImages[this.currentOverlayIndex],0,0,this.player.canvas.width,this.player.canvas.height);this.currentOverlayIndex=(this.currentOverlayIndex+1)%this.overlayImages.length;this.lastRedrawTime=(new Date).getTime()}}if(this.player.currentFrameIndex>=AxelleVideoView.NOISE_FADE_END){this.$container.addClass("end")}else{this.$container.removeClass("end")}if(ViewController.getInstance().getView("TurnItBackView").shown||this.player.currentFrameIndex>=this.player.options.end){this.$container.addClass("back")}else{this.$container.removeClass("back")}},onResize:function(){var a=$(document).width(),b=$(document).height(),c;if(!this.player){return}c=this.player.options.width/this.player.options.height;if(a/b>c){this.$canvas.width(a);this.$canvas.height(Math.ceil(a/c))}else{this.$canvas.height(b);this.$canvas.width(Math.ceil(b*c))}this.player.canvas.width=a;this.player.canvas.height=b;this.$canvas.css("margin-left",(a-this.$canvas.width())*.5);this.$canvas.css("margin-top",(b-this.$canvas.height())*.5);this.onFrame()}}});var TurnItBackView=View._extend({_public:{construct:function(a,b){View.call(this,a,b)},show:function(){var a=this;clearTimeout(this.showTimeoutId);clearTimeout(this.hideTimeoutId);this.shown=true;this.showTimeoutId=setTimeout(function(){AnalyticsController.getInstance().trackPageView("TurnItBackView");if(DetectionController.getInstance().isTablet){a.$container.find(".turn-it-back").css({left:50,right:50,top:50,bottom:50})}a.transitionShow();clearTimeout(a.hideTimeoutId);a.hideTimeoutId=setTimeout(function(){a.transitionHide()},3e3)},1e3)},hide:function(){clearTimeout(this.showTimeoutId);clearTimeout(this.hideTimeoutId);View.prototype.hide.call(this)}},_private:{showTimeoutId:-1,hideTimeoutId:-1,transitionShow:function(){this.$page.css("opacity",0);this.$container.show();TweenLite.to(this.$page,0,{delay:0,css:{opacity:1}});this.endTransitionShow()},bindEvents:function(){var a=this;RemoteController.getInstance().events.bind(RemoteController.EVENT_TURNITBACK_START,function(){a.onTurnItBackStart()});RemoteController.getInstance().events.bind(RemoteController.EVENT_TURNITBACK_STOP,function(){a.onTurnItBackStop()})},onTurnItBackStart:function(){this.show()},onTurnItBackStop:function(){this.hide()}}});var PlatformNotSupportedView=View._extend({_static:{COPY:{isOldIOS:"PlatformNotSupportedView.deviceIos",hasCanvas:"PlatformNotSupportedView.os",hasWebSockets:"PlatformNotSupportedView.os",isSupportedBrowser:"LandingPage.errorBrowser",hasGyroscope:"PlatformNotSupportedView.os"}},_public:{construct:function(a,b){View.call(this,a,b)},show:function(a){if(!View.prototype.show.call(this,a)){return}var b=PlatformNotSupportedView.COPY[a.reason[0].property];var c=$.t(b);this.$message.html(this.$message.html().replace("{reason}",c));AnalyticsController.getInstance().trackPageView("PlatformNotSupportedView")}},_private:{$message:null,init:function(){this.$message=this.$container.find(".message bdo")}}});!function(a,b){function c(){AppController.getInstance().start()}function d(c){if(b.addEventListener){b.addEventListener("DOMContentLoaded",c,false)}else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent)){var d=setInterval(function(){if(/loaded|complete/i.test(b.readyState)){clearInterval(d);c()}},10)}else{a.onload=c}}d(function(){c()})}(window,document);
/*
//@ sourceMappingURL=/js/main.js.map
*/